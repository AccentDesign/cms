(()=>{var Qi=Object.create;var Li=Object.defineProperty;var Bi=Object.getOwnPropertyDescriptor;var Gi=Object.getOwnPropertyNames;var Vi=Object.getPrototypeOf,Xi=Object.prototype.hasOwnProperty;var Fi=(Qr,Wr)=>()=>(Wr||Qr((Wr={exports:{}}).exports,Wr),Wr.exports);var Wi=(Qr,Wr,Jr,Kr)=>{if(Wr&&typeof Wr=="object"||typeof Wr=="function")for(let an of Gi(Wr))!Xi.call(Qr,an)&&an!==Jr&&Li(Qr,an,{get:()=>Wr[an],enumerable:!(Kr=Bi(Wr,an))||Kr.enumerable});return Qr};var Pi=(Qr,Wr,Jr)=>(Jr=Qr!=null?Qi(Vi(Qr)):{},Wi(Wr||!Qr||!Qr.__esModule?Li(Jr,"default",{value:Qr,enumerable:!0}):Jr,Qr));var Oi=Fi((exports,module)=>{(function(Qr,Wr){typeof define=="function"&&define.amd?define([],Wr):typeof module=="object"&&module.exports?module.exports=Wr():Qr.htmx=Qr.htmx||Wr()})(typeof self<"u"?self:exports,function(){return function(){"use strict";var Q={onLoad:F,process:zt,on:de,off:ge,trigger:ce,ajax:Nr,find:C,findAll:f,closest:v,values:function(Qr,Wr){var Jr=dr(Qr,Wr||"post");return Jr.values},remove:_,addClass:z,removeClass:n,toggleClass:$,takeClass:W,defineExtension:Ur,removeExtension:Br,logAll:V,logNone:j,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",useTemplateFragments:!1,scrollBehavior:"smooth",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get"],selfRequestsOnly:!1,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null},parseInterval:d,_:t,createEventSource:function(Qr){return new EventSource(Qr,{withCredentials:!0})},createWebSocket:function(Qr){var Wr=new WebSocket(Qr,[]);return Wr.binaryType=Q.config.wsBinaryType,Wr},version:"1.9.12"},r={addTriggerHandler:Lt,bodyContains:se,canAccessLocalStorage:U,findThisElement:xe,filterValues:yr,hasAttribute:o,getAttributeValue:te,getClosestAttributeValue:ne,getClosestMatch:c,getExpressionVars:Hr,getHeaders:xr,getInputValues:dr,getInternalData:ae,getSwapSpecification:wr,getTriggerSpecs:it,getTarget:ye,makeFragment:l,mergeObjects:le,makeSettleInfo:T,oobSwap:Ee,querySelectorExt:ue,selectAndSwap:je,settleImmediately:nr,shouldCancel:ut,triggerEvent:ce,triggerErrorEvent:fe,withExtensions:R},w=["get","post","put","delete","patch"],i=w.map(function(Qr){return"[hx-"+Qr+"], [data-hx-"+Qr+"]"}).join(", "),S=e("head"),q=e("title"),H=e("svg",!0);function e(Qr,Wr){return new RegExp("<"+Qr+"(\\s[^>]*>|>)([\\s\\S]*?)<\\/"+Qr+">",Wr?"gim":"im")}function d(Qr){if(Qr==null)return;let Wr=NaN;return Qr.slice(-2)=="ms"?Wr=parseFloat(Qr.slice(0,-2)):Qr.slice(-1)=="s"?Wr=parseFloat(Qr.slice(0,-1))*1e3:Qr.slice(-1)=="m"?Wr=parseFloat(Qr.slice(0,-1))*1e3*60:Wr=parseFloat(Qr),isNaN(Wr)?void 0:Wr}function ee(Qr,Wr){return Qr.getAttribute&&Qr.getAttribute(Wr)}function o(Qr,Wr){return Qr.hasAttribute&&(Qr.hasAttribute(Wr)||Qr.hasAttribute("data-"+Wr))}function te(Qr,Wr){return ee(Qr,Wr)||ee(Qr,"data-"+Wr)}function u(Qr){return Qr.parentElement}function re(){return document}function c(Qr,Wr){for(;Qr&&!Wr(Qr);)Qr=u(Qr);return Qr||null}function L(Qr,Wr,Jr){var Kr=te(Wr,Jr),an=te(Wr,"hx-disinherit");return Qr!==Wr&&an&&(an==="*"||an.split(" ").indexOf(Jr)>=0)?"unset":Kr}function ne(Qr,Wr){var Jr=null;if(c(Qr,function(Kr){return Jr=L(Qr,Kr,Wr)}),Jr!=="unset")return Jr}function h(Qr,Wr){var Jr=Qr.matches||Qr.matchesSelector||Qr.msMatchesSelector||Qr.mozMatchesSelector||Qr.webkitMatchesSelector||Qr.oMatchesSelector;return Jr&&Jr.call(Qr,Wr)}function A(Qr){var Wr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Jr=Wr.exec(Qr);return Jr?Jr[1].toLowerCase():""}function s(Qr,Wr){for(var Jr=new DOMParser,Kr=Jr.parseFromString(Qr,"text/html"),an=Kr.body;Wr>0;)Wr--,an=an.firstChild;return an==null&&(an=re().createDocumentFragment()),an}function N(Qr){return/<body/.test(Qr)}function l(Qr){var Wr=!N(Qr),Jr=A(Qr),Kr=Qr;if(Jr==="head"&&(Kr=Kr.replace(S,"")),Q.config.useTemplateFragments&&Wr){var an=s("<body><template>"+Kr+"</template></body>",0),En=an.querySelector("template").content;return Q.config.allowScriptTags?oe(En.querySelectorAll("script"),function(yn){Q.config.inlineScriptNonce&&(yn.nonce=Q.config.inlineScriptNonce),yn.htmxExecuted=navigator.userAgent.indexOf("Firefox")===-1}):oe(En.querySelectorAll("script"),function(yn){_(yn)}),En}switch(Jr){case"thead":case"tbody":case"tfoot":case"colgroup":case"caption":return s("<table>"+Kr+"</table>",1);case"col":return s("<table><colgroup>"+Kr+"</colgroup></table>",2);case"tr":return s("<table><tbody>"+Kr+"</tbody></table>",2);case"td":case"th":return s("<table><tbody><tr>"+Kr+"</tr></tbody></table>",3);case"script":case"style":return s("<div>"+Kr+"</div>",1);default:return s(Kr,0)}}function ie(Qr){Qr&&Qr()}function I(Qr,Wr){return Object.prototype.toString.call(Qr)==="[object "+Wr+"]"}function k(Qr){return I(Qr,"Function")}function P(Qr){return I(Qr,"Object")}function ae(Qr){var Wr="htmx-internal-data",Jr=Qr[Wr];return Jr||(Jr=Qr[Wr]={}),Jr}function M(Qr){var Wr=[];if(Qr)for(var Jr=0;Jr<Qr.length;Jr++)Wr.push(Qr[Jr]);return Wr}function oe(Qr,Wr){if(Qr)for(var Jr=0;Jr<Qr.length;Jr++)Wr(Qr[Jr])}function X(Qr){var Wr=Qr.getBoundingClientRect(),Jr=Wr.top,Kr=Wr.bottom;return Jr<window.innerHeight&&Kr>=0}function se(Qr){return Qr.getRootNode&&Qr.getRootNode()instanceof window.ShadowRoot?re().body.contains(Qr.getRootNode().host):re().body.contains(Qr)}function D(Qr){return Qr.trim().split(/\s+/)}function le(Qr,Wr){for(var Jr in Wr)Wr.hasOwnProperty(Jr)&&(Qr[Jr]=Wr[Jr]);return Qr}function E(Qr){try{return JSON.parse(Qr)}catch(Wr){return b(Wr),null}}function U(){var Qr="htmx:localStorageTest";try{return localStorage.setItem(Qr,Qr),localStorage.removeItem(Qr),!0}catch{return!1}}function B(Qr){try{var Wr=new URL(Qr);return Wr&&(Qr=Wr.pathname+Wr.search),/^\/$/.test(Qr)||(Qr=Qr.replace(/\/+$/,"")),Qr}catch{return Qr}}function t(e){return Tr(re().body,function(){return eval(e)})}function F(Qr){var Wr=Q.on("htmx:load",function(Jr){Qr(Jr.detail.elt)});return Wr}function V(){Q.logger=function(Qr,Wr,Jr){console&&console.log(Wr,Qr,Jr)}}function j(){Q.logger=null}function C(Qr,Wr){return Wr?Qr.querySelector(Wr):C(re(),Qr)}function f(Qr,Wr){return Wr?Qr.querySelectorAll(Wr):f(re(),Qr)}function _(Qr,Wr){Qr=p(Qr),Wr?setTimeout(function(){_(Qr),Qr=null},Wr):Qr.parentElement.removeChild(Qr)}function z(Qr,Wr,Jr){Qr=p(Qr),Jr?setTimeout(function(){z(Qr,Wr),Qr=null},Jr):Qr.classList&&Qr.classList.add(Wr)}function n(Qr,Wr,Jr){Qr=p(Qr),Jr?setTimeout(function(){n(Qr,Wr),Qr=null},Jr):Qr.classList&&(Qr.classList.remove(Wr),Qr.classList.length===0&&Qr.removeAttribute("class"))}function $(Qr,Wr){Qr=p(Qr),Qr.classList.toggle(Wr)}function W(Qr,Wr){Qr=p(Qr),oe(Qr.parentElement.children,function(Jr){n(Jr,Wr)}),z(Qr,Wr)}function v(Qr,Wr){if(Qr=p(Qr),Qr.closest)return Qr.closest(Wr);do if(Qr==null||h(Qr,Wr))return Qr;while(Qr=Qr&&u(Qr));return null}function g(Qr,Wr){return Qr.substring(0,Wr.length)===Wr}function G(Qr,Wr){return Qr.substring(Qr.length-Wr.length)===Wr}function J(Qr){var Wr=Qr.trim();return g(Wr,"<")&&G(Wr,"/>")?Wr.substring(1,Wr.length-2):Wr}function Z(Qr,Wr){return Wr.indexOf("closest ")===0?[v(Qr,J(Wr.substr(8)))]:Wr.indexOf("find ")===0?[C(Qr,J(Wr.substr(5)))]:Wr==="next"?[Qr.nextElementSibling]:Wr.indexOf("next ")===0?[K(Qr,J(Wr.substr(5)))]:Wr==="previous"?[Qr.previousElementSibling]:Wr.indexOf("previous ")===0?[Y(Qr,J(Wr.substr(9)))]:Wr==="document"?[document]:Wr==="window"?[window]:Wr==="body"?[document.body]:re().querySelectorAll(J(Wr))}var K=function(Qr,Wr){for(var Jr=re().querySelectorAll(Wr),Kr=0;Kr<Jr.length;Kr++){var an=Jr[Kr];if(an.compareDocumentPosition(Qr)===Node.DOCUMENT_POSITION_PRECEDING)return an}},Y=function(Qr,Wr){for(var Jr=re().querySelectorAll(Wr),Kr=Jr.length-1;Kr>=0;Kr--){var an=Jr[Kr];if(an.compareDocumentPosition(Qr)===Node.DOCUMENT_POSITION_FOLLOWING)return an}};function ue(Qr,Wr){return Wr?Z(Qr,Wr)[0]:Z(re().body,Qr)[0]}function p(Qr){return I(Qr,"String")?C(Qr):Qr}function ve(Qr,Wr,Jr){return k(Wr)?{target:re().body,event:Qr,listener:Wr}:{target:p(Qr),event:Wr,listener:Jr}}function de(Qr,Wr,Jr){jr(function(){var an=ve(Qr,Wr,Jr);an.target.addEventListener(an.event,an.listener)});var Kr=k(Wr);return Kr?Wr:Jr}function ge(Qr,Wr,Jr){return jr(function(){var Kr=ve(Qr,Wr,Jr);Kr.target.removeEventListener(Kr.event,Kr.listener)}),k(Wr)?Wr:Jr}var pe=re().createElement("output");function me(Qr,Wr){var Jr=ne(Qr,Wr);if(Jr){if(Jr==="this")return[xe(Qr,Wr)];var Kr=Z(Qr,Jr);return Kr.length===0?(b('The selector "'+Jr+'" on '+Wr+" returned no matches!"),[pe]):Kr}}function xe(Qr,Wr){return c(Qr,function(Jr){return te(Jr,Wr)!=null})}function ye(Qr){var Wr=ne(Qr,"hx-target");if(Wr)return Wr==="this"?xe(Qr,"hx-target"):ue(Qr,Wr);var Jr=ae(Qr);return Jr.boosted?re().body:Qr}function be(Qr){for(var Wr=Q.config.attributesToSettle,Jr=0;Jr<Wr.length;Jr++)if(Qr===Wr[Jr])return!0;return!1}function we(Qr,Wr){oe(Qr.attributes,function(Jr){!Wr.hasAttribute(Jr.name)&&be(Jr.name)&&Qr.removeAttribute(Jr.name)}),oe(Wr.attributes,function(Jr){be(Jr.name)&&Qr.setAttribute(Jr.name,Jr.value)})}function Se(Qr,Wr){for(var Jr=Fr(Wr),Kr=0;Kr<Jr.length;Kr++){var an=Jr[Kr];try{if(an.isInlineSwap(Qr))return!0}catch(En){b(En)}}return Qr==="outerHTML"}function Ee(Qr,Wr,Jr){var Kr="#"+ee(Wr,"id"),an="outerHTML";Qr==="true"||(Qr.indexOf(":")>0?(an=Qr.substr(0,Qr.indexOf(":")),Kr=Qr.substr(Qr.indexOf(":")+1,Qr.length)):an=Qr);var En=re().querySelectorAll(Kr);return En?(oe(En,function(yn){var Cn,Rn=Wr.cloneNode(!0);Cn=re().createDocumentFragment(),Cn.appendChild(Rn),Se(an,yn)||(Cn=Rn);var Un={shouldSwap:!0,target:yn,fragment:Cn};ce(yn,"htmx:oobBeforeSwap",Un)&&(yn=Un.target,Un.shouldSwap&&Fe(an,yn,yn,Cn,Jr),oe(Jr.elts,function(Hn){ce(Hn,"htmx:oobAfterSwap",Un)}))}),Wr.parentNode.removeChild(Wr)):(Wr.parentNode.removeChild(Wr),fe(re().body,"htmx:oobErrorNoTarget",{content:Wr})),Qr}function Ce(Qr,Wr,Jr){var Kr=ne(Qr,"hx-select-oob");if(Kr)for(var an=Kr.split(","),En=0;En<an.length;En++){var yn=an[En].split(":",2),Cn=yn[0].trim();Cn.indexOf("#")===0&&(Cn=Cn.substring(1));var Rn=yn[1]||"true",Un=Wr.querySelector("#"+Cn);Un&&Ee(Rn,Un,Jr)}oe(f(Wr,"[hx-swap-oob], [data-hx-swap-oob]"),function(Hn){var Qn=te(Hn,"hx-swap-oob");Qn!=null&&Ee(Qn,Hn,Jr)})}function Re(Qr){oe(f(Qr,"[hx-preserve], [data-hx-preserve]"),function(Wr){var Jr=te(Wr,"id"),Kr=re().getElementById(Jr);Kr!=null&&Wr.parentNode.replaceChild(Kr,Wr)})}function Te(Qr,Wr,Jr){oe(Wr.querySelectorAll("[id]"),function(Kr){var an=ee(Kr,"id");if(an&&an.length>0){var En=an.replace("'","\\'"),yn=Kr.tagName.replace(":","\\:"),Cn=Qr.querySelector(yn+"[id='"+En+"']");if(Cn&&Cn!==Qr){var Rn=Kr.cloneNode();we(Kr,Cn),Jr.tasks.push(function(){we(Kr,Rn)})}}})}function Oe(Qr){return function(){n(Qr,Q.config.addedClass),zt(Qr),Nt(Qr),qe(Qr),ce(Qr,"htmx:load")}}function qe(Qr){var Wr="[autofocus]",Jr=h(Qr,Wr)?Qr:Qr.querySelector(Wr);Jr?.focus()}function a(Qr,Wr,Jr,Kr){for(Te(Qr,Jr,Kr);Jr.childNodes.length>0;){var an=Jr.firstChild;z(an,Q.config.addedClass),Qr.insertBefore(an,Wr),an.nodeType!==Node.TEXT_NODE&&an.nodeType!==Node.COMMENT_NODE&&Kr.tasks.push(Oe(an))}}function He(Qr,Wr){for(var Jr=0;Jr<Qr.length;)Wr=(Wr<<5)-Wr+Qr.charCodeAt(Jr++)|0;return Wr}function Le(Qr){var Wr=0;if(Qr.attributes)for(var Jr=0;Jr<Qr.attributes.length;Jr++){var Kr=Qr.attributes[Jr];Kr.value&&(Wr=He(Kr.name,Wr),Wr=He(Kr.value,Wr))}return Wr}function Ae(Qr){var Wr=ae(Qr);if(Wr.onHandlers){for(var Jr=0;Jr<Wr.onHandlers.length;Jr++){let Kr=Wr.onHandlers[Jr];Qr.removeEventListener(Kr.event,Kr.listener)}delete Wr.onHandlers}}function Ne(Qr){var Wr=ae(Qr);Wr.timeout&&clearTimeout(Wr.timeout),Wr.webSocket&&Wr.webSocket.close(),Wr.sseEventSource&&Wr.sseEventSource.close(),Wr.listenerInfos&&oe(Wr.listenerInfos,function(Jr){Jr.on&&Jr.on.removeEventListener(Jr.trigger,Jr.listener)}),Ae(Qr),oe(Object.keys(Wr),function(Jr){delete Wr[Jr]})}function m(Qr){ce(Qr,"htmx:beforeCleanupElement"),Ne(Qr),Qr.children&&oe(Qr.children,function(Wr){m(Wr)})}function Ie(Qr,Wr,Jr){if(Qr.tagName==="BODY")return Ue(Qr,Wr,Jr);var Kr,an=Qr.previousSibling;for(a(u(Qr),Qr,Wr,Jr),an==null?Kr=u(Qr).firstChild:Kr=an.nextSibling,Jr.elts=Jr.elts.filter(function(En){return En!=Qr});Kr&&Kr!==Qr;)Kr.nodeType===Node.ELEMENT_NODE&&Jr.elts.push(Kr),Kr=Kr.nextElementSibling;m(Qr),u(Qr).removeChild(Qr)}function ke(Qr,Wr,Jr){return a(Qr,Qr.firstChild,Wr,Jr)}function Pe(Qr,Wr,Jr){return a(u(Qr),Qr,Wr,Jr)}function Me(Qr,Wr,Jr){return a(Qr,null,Wr,Jr)}function Xe(Qr,Wr,Jr){return a(u(Qr),Qr.nextSibling,Wr,Jr)}function De(Qr,Wr,Jr){return m(Qr),u(Qr).removeChild(Qr)}function Ue(Qr,Wr,Jr){var Kr=Qr.firstChild;if(a(Qr,Kr,Wr,Jr),Kr){for(;Kr.nextSibling;)m(Kr.nextSibling),Qr.removeChild(Kr.nextSibling);m(Kr),Qr.removeChild(Kr)}}function Be(Qr,Wr,Jr){var Kr=Jr||ne(Qr,"hx-select");if(Kr){var an=re().createDocumentFragment();oe(Wr.querySelectorAll(Kr),function(En){an.appendChild(En)}),Wr=an}return Wr}function Fe(Qr,Wr,Jr,Kr,an){switch(Qr){case"none":return;case"outerHTML":Ie(Jr,Kr,an);return;case"afterbegin":ke(Jr,Kr,an);return;case"beforebegin":Pe(Jr,Kr,an);return;case"beforeend":Me(Jr,Kr,an);return;case"afterend":Xe(Jr,Kr,an);return;case"delete":De(Jr,Kr,an);return;default:for(var En=Fr(Wr),yn=0;yn<En.length;yn++){var Cn=En[yn];try{var Rn=Cn.handleSwap(Qr,Jr,Kr,an);if(Rn){if(typeof Rn.length<"u")for(var Un=0;Un<Rn.length;Un++){var Hn=Rn[Un];Hn.nodeType!==Node.TEXT_NODE&&Hn.nodeType!==Node.COMMENT_NODE&&an.tasks.push(Oe(Hn))}return}}catch(Qn){b(Qn)}}Qr==="innerHTML"?Ue(Jr,Kr,an):Fe(Q.config.defaultSwapStyle,Wr,Jr,Kr,an)}}function Ve(Qr){if(Qr.indexOf("<title")>-1){var Wr=Qr.replace(H,""),Jr=Wr.match(q);if(Jr)return Jr[2]}}function je(Qr,Wr,Jr,Kr,an,En){an.title=Ve(Kr);var yn=l(Kr);if(yn)return Ce(Jr,yn,an),yn=Be(Jr,yn,En),Re(yn),Fe(Qr,Jr,Wr,yn,an)}function _e(Qr,Wr,Jr){var Kr=Qr.getResponseHeader(Wr);if(Kr.indexOf("{")===0){var an=E(Kr);for(var En in an)if(an.hasOwnProperty(En)){var yn=an[En];P(yn)||(yn={value:yn}),ce(Jr,En,yn)}}else for(var Cn=Kr.split(","),Rn=0;Rn<Cn.length;Rn++)ce(Jr,Cn[Rn].trim(),[])}var ze=/\s/,x=/[\s,]/,$e=/[_$a-zA-Z]/,We=/[_$a-zA-Z0-9]/,Ge=['"',"'","/"],Je=/[^\s]/,Ze=/[{(]/,Ke=/[})]/;function Ye(Qr){for(var Wr=[],Jr=0;Jr<Qr.length;){if($e.exec(Qr.charAt(Jr))){for(var Kr=Jr;We.exec(Qr.charAt(Jr+1));)Jr++;Wr.push(Qr.substr(Kr,Jr-Kr+1))}else if(Ge.indexOf(Qr.charAt(Jr))!==-1){var an=Qr.charAt(Jr),Kr=Jr;for(Jr++;Jr<Qr.length&&Qr.charAt(Jr)!==an;)Qr.charAt(Jr)==="\\"&&Jr++,Jr++;Wr.push(Qr.substr(Kr,Jr-Kr+1))}else{var En=Qr.charAt(Jr);Wr.push(En)}Jr++}return Wr}function Qe(Qr,Wr,Jr){return $e.exec(Qr.charAt(0))&&Qr!=="true"&&Qr!=="false"&&Qr!=="this"&&Qr!==Jr&&Wr!=="."}function et(Qr,Wr,Jr){if(Wr[0]==="["){Wr.shift();for(var Kr=1,an=" return (function("+Jr+"){ return (",En=null;Wr.length>0;){var yn=Wr[0];if(yn==="]"){if(Kr--,Kr===0){En===null&&(an=an+"true"),Wr.shift(),an+=")})";try{var Cn=Tr(Qr,function(){return Function(an)()},function(){return!0});return Cn.source=an,Cn}catch(Rn){return fe(re().body,"htmx:syntax:error",{error:Rn,source:an}),null}}}else yn==="["&&Kr++;Qe(yn,En,Jr)?an+="(("+Jr+"."+yn+") ? ("+Jr+"."+yn+") : (window."+yn+"))":an=an+yn,En=Wr.shift()}}}function y(Qr,Wr){for(var Jr="";Qr.length>0&&!Wr.test(Qr[0]);)Jr+=Qr.shift();return Jr}function tt(Qr){var Wr;return Qr.length>0&&Ze.test(Qr[0])?(Qr.shift(),Wr=y(Qr,Ke).trim(),Qr.shift()):Wr=y(Qr,x),Wr}var rt="input, textarea, select";function nt(Qr,Wr,Jr){var Kr=[],an=Ye(Wr);do{y(an,Je);var En=an.length,yn=y(an,/[,\[\s]/);if(yn!=="")if(yn==="every"){var Cn={trigger:"every"};y(an,Je),Cn.pollInterval=d(y(an,/[,\[\s]/)),y(an,Je);var Rn=et(Qr,an,"event");Rn&&(Cn.eventFilter=Rn),Kr.push(Cn)}else if(yn.indexOf("sse:")===0)Kr.push({trigger:"sse",sseEvent:yn.substr(4)});else{var Un={trigger:yn},Rn=et(Qr,an,"event");for(Rn&&(Un.eventFilter=Rn);an.length>0&&an[0]!==",";){y(an,Je);var Hn=an.shift();if(Hn==="changed")Un.changed=!0;else if(Hn==="once")Un.once=!0;else if(Hn==="consume")Un.consume=!0;else if(Hn==="delay"&&an[0]===":")an.shift(),Un.delay=d(y(an,x));else if(Hn==="from"&&an[0]===":"){if(an.shift(),Ze.test(an[0]))var Qn=tt(an);else{var Qn=y(an,x);if(Qn==="closest"||Qn==="find"||Qn==="next"||Qn==="previous"){an.shift();var Bn=tt(an);Bn.length>0&&(Qn+=" "+Bn)}}Un.from=Qn}else Hn==="target"&&an[0]===":"?(an.shift(),Un.target=tt(an)):Hn==="throttle"&&an[0]===":"?(an.shift(),Un.throttle=d(y(an,x))):Hn==="queue"&&an[0]===":"?(an.shift(),Un.queue=y(an,x)):Hn==="root"&&an[0]===":"?(an.shift(),Un[Hn]=tt(an)):Hn==="threshold"&&an[0]===":"?(an.shift(),Un[Hn]=y(an,x)):fe(Qr,"htmx:syntax:error",{token:an.shift()})}Kr.push(Un)}an.length===En&&fe(Qr,"htmx:syntax:error",{token:an.shift()}),y(an,Je)}while(an[0]===","&&an.shift());return Jr&&(Jr[Wr]=Kr),Kr}function it(Qr){var Wr=te(Qr,"hx-trigger"),Jr=[];if(Wr){var Kr=Q.config.triggerSpecsCache;Jr=Kr&&Kr[Wr]||nt(Qr,Wr,Kr)}return Jr.length>0?Jr:h(Qr,"form")?[{trigger:"submit"}]:h(Qr,'input[type="button"], input[type="submit"]')?[{trigger:"click"}]:h(Qr,rt)?[{trigger:"change"}]:[{trigger:"click"}]}function at(Qr){ae(Qr).cancelled=!0}function ot(Qr,Wr,Jr){var Kr=ae(Qr);Kr.timeout=setTimeout(function(){se(Qr)&&Kr.cancelled!==!0&&(ct(Jr,Qr,Wt("hx:poll:trigger",{triggerSpec:Jr,target:Qr}))||Wr(Qr),ot(Qr,Wr,Jr))},Jr.pollInterval)}function st(Qr){return location.hostname===Qr.hostname&&ee(Qr,"href")&&ee(Qr,"href").indexOf("#")!==0}function lt(Qr,Wr,Jr){if(Qr.tagName==="A"&&st(Qr)&&(Qr.target===""||Qr.target==="_self")||Qr.tagName==="FORM"){Wr.boosted=!0;var Kr,an;if(Qr.tagName==="A")Kr="get",an=ee(Qr,"href");else{var En=ee(Qr,"method");Kr=En?En.toLowerCase():"get",an=ee(Qr,"action")}Jr.forEach(function(yn){ht(Qr,function(Cn,Rn){if(v(Cn,Q.config.disableSelector)){m(Cn);return}he(Kr,an,Cn,Rn)},Wr,yn,!0)})}}function ut(Qr,Wr){return!!((Qr.type==="submit"||Qr.type==="click")&&(Wr.tagName==="FORM"||h(Wr,'input[type="submit"], button')&&v(Wr,"form")!==null||Wr.tagName==="A"&&Wr.href&&(Wr.getAttribute("href")==="#"||Wr.getAttribute("href").indexOf("#")!==0)))}function ft(Qr,Wr){return ae(Qr).boosted&&Qr.tagName==="A"&&Wr.type==="click"&&(Wr.ctrlKey||Wr.metaKey)}function ct(Qr,Wr,Jr){var Kr=Qr.eventFilter;if(Kr)try{return Kr.call(Wr,Jr)!==!0}catch(an){return fe(re().body,"htmx:eventFilter:error",{error:an,source:Kr.source}),!0}return!1}function ht(Qr,Wr,Jr,Kr,an){var En=ae(Qr),yn;Kr.from?yn=Z(Qr,Kr.from):yn=[Qr],Kr.changed&&yn.forEach(function(Cn){var Rn=ae(Cn);Rn.lastValue=Cn.value}),oe(yn,function(Cn){var Rn=function(Un){if(!se(Qr)){Cn.removeEventListener(Kr.trigger,Rn);return}if(!ft(Qr,Un)&&((an||ut(Un,Qr))&&Un.preventDefault(),!ct(Kr,Qr,Un))){var Hn=ae(Un);if(Hn.triggerSpec=Kr,Hn.handledFor==null&&(Hn.handledFor=[]),Hn.handledFor.indexOf(Qr)<0){if(Hn.handledFor.push(Qr),Kr.consume&&Un.stopPropagation(),Kr.target&&Un.target&&!h(Un.target,Kr.target))return;if(Kr.once){if(En.triggeredOnce)return;En.triggeredOnce=!0}if(Kr.changed){var Qn=ae(Cn);if(Qn.lastValue===Cn.value)return;Qn.lastValue=Cn.value}if(En.delayed&&clearTimeout(En.delayed),En.throttle)return;Kr.throttle>0?En.throttle||(Wr(Qr,Un),En.throttle=setTimeout(function(){En.throttle=null},Kr.throttle)):Kr.delay>0?En.delayed=setTimeout(function(){Wr(Qr,Un)},Kr.delay):(ce(Qr,"htmx:trigger"),Wr(Qr,Un))}}};Jr.listenerInfos==null&&(Jr.listenerInfos=[]),Jr.listenerInfos.push({trigger:Kr.trigger,listener:Rn,on:Cn}),Cn.addEventListener(Kr.trigger,Rn)})}var vt=!1,dt=null;function gt(){dt||(dt=function(){vt=!0},window.addEventListener("scroll",dt),setInterval(function(){vt&&(vt=!1,oe(re().querySelectorAll("[hx-trigger='revealed'],[data-hx-trigger='revealed']"),function(Qr){pt(Qr)}))},200))}function pt(Qr){if(!o(Qr,"data-hx-revealed")&&X(Qr)){Qr.setAttribute("data-hx-revealed","true");var Wr=ae(Qr);Wr.initHash?ce(Qr,"revealed"):Qr.addEventListener("htmx:afterProcessNode",function(Jr){ce(Qr,"revealed")},{once:!0})}}function mt(Qr,Wr,Jr){for(var Kr=D(Jr),an=0;an<Kr.length;an++){var En=Kr[an].split(/:(.+)/);En[0]==="connect"&&xt(Qr,En[1],0),En[0]==="send"&&bt(Qr)}}function xt(Qr,Wr,Jr){if(se(Qr)){if(Wr.indexOf("/")==0){var Kr=location.hostname+(location.port?":"+location.port:"");location.protocol=="https:"?Wr="wss://"+Kr+Wr:location.protocol=="http:"&&(Wr="ws://"+Kr+Wr)}var an=Q.createWebSocket(Wr);an.onerror=function(En){fe(Qr,"htmx:wsError",{error:En,socket:an}),yt(Qr)},an.onclose=function(En){if([1006,1012,1013].indexOf(En.code)>=0){var yn=wt(Jr);setTimeout(function(){xt(Qr,Wr,Jr+1)},yn)}},an.onopen=function(En){Jr=0},ae(Qr).webSocket=an,an.addEventListener("message",function(En){if(!yt(Qr)){var yn=En.data;R(Qr,function(Bn){yn=Bn.transformResponse(yn,null,Qr)});for(var Cn=T(Qr),Rn=l(yn),Un=M(Rn.children),Hn=0;Hn<Un.length;Hn++){var Qn=Un[Hn];Ee(te(Qn,"hx-swap-oob")||"true",Qn,Cn)}nr(Cn.tasks)}})}}function yt(Qr){if(!se(Qr))return ae(Qr).webSocket.close(),!0}function bt(Qr){var Wr=c(Qr,function(Jr){return ae(Jr).webSocket!=null});Wr?Qr.addEventListener(it(Qr)[0].trigger,function(Jr){var Kr=ae(Wr).webSocket,an=xr(Qr,Wr),En=dr(Qr,"post"),yn=En.errors,Cn=En.values,Rn=Hr(Qr),Un=le(Cn,Rn),Hn=yr(Un,Qr);if(Hn.HEADERS=an,yn&&yn.length>0){ce(Qr,"htmx:validation:halted",yn);return}Kr.send(JSON.stringify(Hn)),ut(Jr,Qr)&&Jr.preventDefault()}):fe(Qr,"htmx:noWebSocketSourceError")}function wt(Qr){var Wr=Q.config.wsReconnectDelay;if(typeof Wr=="function")return Wr(Qr);if(Wr==="full-jitter"){var Jr=Math.min(Qr,6),Kr=1e3*Math.pow(2,Jr);return Kr*Math.random()}b('htmx.config.wsReconnectDelay must either be a function or the string "full-jitter"')}function St(Qr,Wr,Jr){for(var Kr=D(Jr),an=0;an<Kr.length;an++){var En=Kr[an].split(/:(.+)/);En[0]==="connect"&&Et(Qr,En[1]),En[0]==="swap"&&Ct(Qr,En[1])}}function Et(Qr,Wr){var Jr=Q.createEventSource(Wr);Jr.onerror=function(Kr){fe(Qr,"htmx:sseError",{error:Kr,source:Jr}),Tt(Qr)},ae(Qr).sseEventSource=Jr}function Ct(Qr,Wr){var Jr=c(Qr,Ot);if(Jr){var Kr=ae(Jr).sseEventSource,an=function(En){if(!Tt(Jr)){if(!se(Qr)){Kr.removeEventListener(Wr,an);return}var yn=En.data;R(Qr,function(Hn){yn=Hn.transformResponse(yn,null,Qr)});var Cn=wr(Qr),Rn=ye(Qr),Un=T(Qr);je(Cn.swapStyle,Rn,Qr,yn,Un),nr(Un.tasks),ce(Qr,"htmx:sseMessage",En)}};ae(Qr).sseListener=an,Kr.addEventListener(Wr,an)}else fe(Qr,"htmx:noSSESourceError")}function Rt(Qr,Wr,Jr){var Kr=c(Qr,Ot);if(Kr){var an=ae(Kr).sseEventSource,En=function(){Tt(Kr)||(se(Qr)?Wr(Qr):an.removeEventListener(Jr,En))};ae(Qr).sseListener=En,an.addEventListener(Jr,En)}else fe(Qr,"htmx:noSSESourceError")}function Tt(Qr){if(!se(Qr))return ae(Qr).sseEventSource.close(),!0}function Ot(Qr){return ae(Qr).sseEventSource!=null}function qt(Qr,Wr,Jr,Kr){var an=function(){Jr.loaded||(Jr.loaded=!0,Wr(Qr))};Kr>0?setTimeout(an,Kr):an()}function Ht(Qr,Wr,Jr){var Kr=!1;return oe(w,function(an){if(o(Qr,"hx-"+an)){var En=te(Qr,"hx-"+an);Kr=!0,Wr.path=En,Wr.verb=an,Jr.forEach(function(yn){Lt(Qr,yn,Wr,function(Cn,Rn){if(v(Cn,Q.config.disableSelector)){m(Cn);return}he(an,En,Cn,Rn)})})}}),Kr}function Lt(Qr,Wr,Jr,Kr){if(Wr.sseEvent)Rt(Qr,Kr,Wr.sseEvent);else if(Wr.trigger==="revealed")gt(),ht(Qr,Kr,Jr,Wr),pt(Qr);else if(Wr.trigger==="intersect"){var an={};Wr.root&&(an.root=ue(Qr,Wr.root)),Wr.threshold&&(an.threshold=parseFloat(Wr.threshold));var En=new IntersectionObserver(function(yn){for(var Cn=0;Cn<yn.length;Cn++){var Rn=yn[Cn];if(Rn.isIntersecting){ce(Qr,"intersect");break}}},an);En.observe(Qr),ht(Qr,Kr,Jr,Wr)}else Wr.trigger==="load"?ct(Wr,Qr,Wt("load",{elt:Qr}))||qt(Qr,Kr,Jr,Wr.delay):Wr.pollInterval>0?(Jr.polling=!0,ot(Qr,Kr,Wr)):ht(Qr,Kr,Jr,Wr)}function At(Qr){if(!Qr.htmxExecuted&&Q.config.allowScriptTags&&(Qr.type==="text/javascript"||Qr.type==="module"||Qr.type==="")){var Wr=re().createElement("script");oe(Qr.attributes,function(Kr){Wr.setAttribute(Kr.name,Kr.value)}),Wr.textContent=Qr.textContent,Wr.async=!1,Q.config.inlineScriptNonce&&(Wr.nonce=Q.config.inlineScriptNonce);var Jr=Qr.parentElement;try{Jr.insertBefore(Wr,Qr)}catch(Kr){b(Kr)}finally{Qr.parentElement&&Qr.parentElement.removeChild(Qr)}}}function Nt(Qr){h(Qr,"script")&&At(Qr),oe(f(Qr,"script"),function(Wr){At(Wr)})}function It(Qr){var Wr=Qr.attributes;if(!Wr)return!1;for(var Jr=0;Jr<Wr.length;Jr++){var Kr=Wr[Jr].name;if(g(Kr,"hx-on:")||g(Kr,"data-hx-on:")||g(Kr,"hx-on-")||g(Kr,"data-hx-on-"))return!0}return!1}function kt(Qr){var Wr=null,Jr=[];if(It(Qr)&&Jr.push(Qr),document.evaluate)for(var Kr=document.evaluate('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]',Qr);Wr=Kr.iterateNext();)Jr.push(Wr);else if(typeof Qr.getElementsByTagName=="function")for(var an=Qr.getElementsByTagName("*"),En=0;En<an.length;En++)It(an[En])&&Jr.push(an[En]);return Jr}function Pt(Qr){if(Qr.querySelectorAll){var Wr=", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost]",Jr=Qr.querySelectorAll(i+Wr+", form, [type='submit'], [hx-sse], [data-hx-sse], [hx-ws], [data-hx-ws], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger], [hx-on], [data-hx-on]");return Jr}else return[]}function Mt(Qr){var Wr=v(Qr.target,"button, input[type='submit']"),Jr=Dt(Qr);Jr&&(Jr.lastButtonClicked=Wr)}function Xt(Qr){var Wr=Dt(Qr);Wr&&(Wr.lastButtonClicked=null)}function Dt(Qr){var Wr=v(Qr.target,"button, input[type='submit']");if(Wr){var Jr=p("#"+ee(Wr,"form"))||v(Wr,"form");if(Jr)return ae(Jr)}}function Ut(Qr){Qr.addEventListener("click",Mt),Qr.addEventListener("focusin",Mt),Qr.addEventListener("focusout",Xt)}function Bt(Qr){for(var Wr=Ye(Qr),Jr=0,Kr=0;Kr<Wr.length;Kr++){let an=Wr[Kr];an==="{"?Jr++:an==="}"&&Jr--}return Jr}function Ft(Qr,Wr,Jr){var Kr=ae(Qr);Array.isArray(Kr.onHandlers)||(Kr.onHandlers=[]);var an,En=function(yn){return Tr(Qr,function(){an||(an=new Function("event",Jr)),an.call(Qr,yn)})};Qr.addEventListener(Wr,En),Kr.onHandlers.push({event:Wr,listener:En})}function Vt(Qr){var Wr=te(Qr,"hx-on");if(Wr){for(var Jr={},Kr=Wr.split(`
`),an=null,En=0;Kr.length>0;){var yn=Kr.shift(),Cn=yn.match(/^\s*([a-zA-Z:\-\.]+:)(.*)/);En===0&&Cn?(yn.split(":"),an=Cn[1].slice(0,-1),Jr[an]=Cn[2]):Jr[an]+=yn,En+=Bt(yn)}for(var Rn in Jr)Ft(Qr,Rn,Jr[Rn])}}function jt(Qr){Ae(Qr);for(var Wr=0;Wr<Qr.attributes.length;Wr++){var Jr=Qr.attributes[Wr].name,Kr=Qr.attributes[Wr].value;if(g(Jr,"hx-on")||g(Jr,"data-hx-on")){var an=Jr.indexOf("-on")+3,En=Jr.slice(an,an+1);if(En==="-"||En===":"){var yn=Jr.slice(an+1);g(yn,":")?yn="htmx"+yn:g(yn,"-")?yn="htmx:"+yn.slice(1):g(yn,"htmx-")&&(yn="htmx:"+yn.slice(5)),Ft(Qr,yn,Kr)}}}}function _t(Qr){if(v(Qr,Q.config.disableSelector)){m(Qr);return}var Wr=ae(Qr);if(Wr.initHash!==Le(Qr)){Ne(Qr),Wr.initHash=Le(Qr),Vt(Qr),ce(Qr,"htmx:beforeProcessNode"),Qr.value&&(Wr.lastValue=Qr.value);var Jr=it(Qr),Kr=Ht(Qr,Wr,Jr);Kr||(ne(Qr,"hx-boost")==="true"?lt(Qr,Wr,Jr):o(Qr,"hx-trigger")&&Jr.forEach(function(yn){Lt(Qr,yn,Wr,function(){})})),(Qr.tagName==="FORM"||ee(Qr,"type")==="submit"&&o(Qr,"form"))&&Ut(Qr);var an=te(Qr,"hx-sse");an&&St(Qr,Wr,an);var En=te(Qr,"hx-ws");En&&mt(Qr,Wr,En),ce(Qr,"htmx:afterProcessNode")}}function zt(Qr){if(Qr=p(Qr),v(Qr,Q.config.disableSelector)){m(Qr);return}_t(Qr),oe(Pt(Qr),function(Wr){_t(Wr)}),oe(kt(Qr),jt)}function $t(Qr){return Qr.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function Wt(Qr,Wr){var Jr;return window.CustomEvent&&typeof window.CustomEvent=="function"?Jr=new CustomEvent(Qr,{bubbles:!0,cancelable:!0,detail:Wr}):(Jr=re().createEvent("CustomEvent"),Jr.initCustomEvent(Qr,!0,!0,Wr)),Jr}function fe(Qr,Wr,Jr){ce(Qr,Wr,le({error:Wr},Jr))}function Gt(Qr){return Qr==="htmx:afterProcessNode"}function R(Qr,Wr){oe(Fr(Qr),function(Jr){try{Wr(Jr)}catch(Kr){b(Kr)}})}function b(Qr){console.error?console.error(Qr):console.log&&console.log("ERROR: ",Qr)}function ce(Qr,Wr,Jr){Qr=p(Qr),Jr==null&&(Jr={}),Jr.elt=Qr;var Kr=Wt(Wr,Jr);Q.logger&&!Gt(Wr)&&Q.logger(Qr,Wr,Jr),Jr.error&&(b(Jr.error),ce(Qr,"htmx:error",{errorInfo:Jr}));var an=Qr.dispatchEvent(Kr),En=$t(Wr);if(an&&En!==Wr){var yn=Wt(En,Kr.detail);an=an&&Qr.dispatchEvent(yn)}return R(Qr,function(Cn){an=an&&Cn.onEvent(Wr,Kr)!==!1&&!Kr.defaultPrevented}),an}var Jt=location.pathname+location.search;function Zt(){var Qr=re().querySelector("[hx-history-elt],[data-hx-history-elt]");return Qr||re().body}function Kt(Qr,Wr,Jr,Kr){if(U()){if(Q.config.historyCacheSize<=0){localStorage.removeItem("htmx-history-cache");return}Qr=B(Qr);for(var an=E(localStorage.getItem("htmx-history-cache"))||[],En=0;En<an.length;En++)if(an[En].url===Qr){an.splice(En,1);break}var yn={url:Qr,content:Wr,title:Jr,scroll:Kr};for(ce(re().body,"htmx:historyItemCreated",{item:yn,cache:an}),an.push(yn);an.length>Q.config.historyCacheSize;)an.shift();for(;an.length>0;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(an));break}catch(Cn){fe(re().body,"htmx:historyCacheError",{cause:Cn,cache:an}),an.shift()}}}function Yt(Qr){if(!U())return null;Qr=B(Qr);for(var Wr=E(localStorage.getItem("htmx-history-cache"))||[],Jr=0;Jr<Wr.length;Jr++)if(Wr[Jr].url===Qr)return Wr[Jr];return null}function Qt(Qr){var Wr=Q.config.requestClass,Jr=Qr.cloneNode(!0);return oe(f(Jr,"."+Wr),function(Kr){n(Kr,Wr)}),Jr.innerHTML}function er(){var Qr=Zt(),Wr=Jt||location.pathname+location.search,Jr;try{Jr=re().querySelector('[hx-history="false" i],[data-hx-history="false" i]')}catch{Jr=re().querySelector('[hx-history="false"],[data-hx-history="false"]')}Jr||(ce(re().body,"htmx:beforeHistorySave",{path:Wr,historyElt:Qr}),Kt(Wr,Qt(Qr),re().title,window.scrollY)),Q.config.historyEnabled&&history.replaceState({htmx:!0},re().title,window.location.href)}function tr(Qr){Q.config.getCacheBusterParam&&(Qr=Qr.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),(G(Qr,"&")||G(Qr,"?"))&&(Qr=Qr.slice(0,-1))),Q.config.historyEnabled&&history.pushState({htmx:!0},"",Qr),Jt=Qr}function rr(Qr){Q.config.historyEnabled&&history.replaceState({htmx:!0},"",Qr),Jt=Qr}function nr(Qr){oe(Qr,function(Wr){Wr.call()})}function ir(Qr){var Wr=new XMLHttpRequest,Jr={path:Qr,xhr:Wr};ce(re().body,"htmx:historyCacheMiss",Jr),Wr.open("GET",Qr,!0),Wr.setRequestHeader("HX-Request","true"),Wr.setRequestHeader("HX-History-Restore-Request","true"),Wr.setRequestHeader("HX-Current-URL",re().location.href),Wr.onload=function(){if(this.status>=200&&this.status<400){ce(re().body,"htmx:historyCacheMissLoad",Jr);var Kr=l(this.response);Kr=Kr.querySelector("[hx-history-elt],[data-hx-history-elt]")||Kr;var an=Zt(),En=T(an),yn=Ve(this.response);if(yn){var Cn=C("title");Cn?Cn.innerHTML=yn:window.document.title=yn}Ue(an,Kr,En),nr(En.tasks),Jt=Qr,ce(re().body,"htmx:historyRestore",{path:Qr,cacheMiss:!0,serverResponse:this.response})}else fe(re().body,"htmx:historyCacheMissLoadError",Jr)},Wr.send()}function ar(Qr){er(),Qr=Qr||location.pathname+location.search;var Wr=Yt(Qr);if(Wr){var Jr=l(Wr.content),Kr=Zt(),an=T(Kr);Ue(Kr,Jr,an),nr(an.tasks),document.title=Wr.title,setTimeout(function(){window.scrollTo(0,Wr.scroll)},0),Jt=Qr,ce(re().body,"htmx:historyRestore",{path:Qr,item:Wr})}else Q.config.refreshOnHistoryMiss?window.location.reload(!0):ir(Qr)}function or(Qr){var Wr=me(Qr,"hx-indicator");return Wr==null&&(Wr=[Qr]),oe(Wr,function(Jr){var Kr=ae(Jr);Kr.requestCount=(Kr.requestCount||0)+1,Jr.classList.add.call(Jr.classList,Q.config.requestClass)}),Wr}function sr(Qr){var Wr=me(Qr,"hx-disabled-elt");return Wr==null&&(Wr=[]),oe(Wr,function(Jr){var Kr=ae(Jr);Kr.requestCount=(Kr.requestCount||0)+1,Jr.setAttribute("disabled","")}),Wr}function lr(Qr,Wr){oe(Qr,function(Jr){var Kr=ae(Jr);Kr.requestCount=(Kr.requestCount||0)-1,Kr.requestCount===0&&Jr.classList.remove.call(Jr.classList,Q.config.requestClass)}),oe(Wr,function(Jr){var Kr=ae(Jr);Kr.requestCount=(Kr.requestCount||0)-1,Kr.requestCount===0&&Jr.removeAttribute("disabled")})}function ur(Qr,Wr){for(var Jr=0;Jr<Qr.length;Jr++){var Kr=Qr[Jr];if(Kr.isSameNode(Wr))return!0}return!1}function fr(Qr){return Qr.name===""||Qr.name==null||Qr.disabled||v(Qr,"fieldset[disabled]")||Qr.type==="button"||Qr.type==="submit"||Qr.tagName==="image"||Qr.tagName==="reset"||Qr.tagName==="file"?!1:Qr.type==="checkbox"||Qr.type==="radio"?Qr.checked:!0}function cr(Qr,Wr,Jr){if(Qr!=null&&Wr!=null){var Kr=Jr[Qr];Kr===void 0?Jr[Qr]=Wr:Array.isArray(Kr)?Array.isArray(Wr)?Jr[Qr]=Kr.concat(Wr):Kr.push(Wr):Array.isArray(Wr)?Jr[Qr]=[Kr].concat(Wr):Jr[Qr]=[Kr,Wr]}}function hr(Qr,Wr,Jr,Kr,an){if(!(Kr==null||ur(Qr,Kr))){if(Qr.push(Kr),fr(Kr)){var En=ee(Kr,"name"),yn=Kr.value;Kr.multiple&&Kr.tagName==="SELECT"&&(yn=M(Kr.querySelectorAll("option:checked")).map(function(Rn){return Rn.value})),Kr.files&&(yn=M(Kr.files)),cr(En,yn,Wr),an&&vr(Kr,Jr)}if(h(Kr,"form")){var Cn=Kr.elements;oe(Cn,function(Rn){hr(Qr,Wr,Jr,Rn,an)})}}}function vr(Qr,Wr){Qr.willValidate&&(ce(Qr,"htmx:validation:validate"),Qr.checkValidity()||(Wr.push({elt:Qr,message:Qr.validationMessage,validity:Qr.validity}),ce(Qr,"htmx:validation:failed",{message:Qr.validationMessage,validity:Qr.validity})))}function dr(Qr,Wr){var Jr=[],Kr={},an={},En=[],yn=ae(Qr);yn.lastButtonClicked&&!se(yn.lastButtonClicked)&&(yn.lastButtonClicked=null);var Cn=h(Qr,"form")&&Qr.noValidate!==!0||te(Qr,"hx-validate")==="true";if(yn.lastButtonClicked&&(Cn=Cn&&yn.lastButtonClicked.formNoValidate!==!0),Wr!=="get"&&hr(Jr,an,En,v(Qr,"form"),Cn),hr(Jr,Kr,En,Qr,Cn),yn.lastButtonClicked||Qr.tagName==="BUTTON"||Qr.tagName==="INPUT"&&ee(Qr,"type")==="submit"){var Rn=yn.lastButtonClicked||Qr,Un=ee(Rn,"name");cr(Un,Rn.value,an)}var Hn=me(Qr,"hx-include");return oe(Hn,function(Qn){hr(Jr,Kr,En,Qn,Cn),h(Qn,"form")||oe(Qn.querySelectorAll(rt),function(Bn){hr(Jr,Kr,En,Bn,Cn)})}),Kr=le(Kr,an),{errors:En,values:Kr}}function gr(Qr,Wr,Jr){Qr!==""&&(Qr+="&"),String(Jr)==="[object Object]"&&(Jr=JSON.stringify(Jr));var Kr=encodeURIComponent(Jr);return Qr+=encodeURIComponent(Wr)+"="+Kr,Qr}function pr(Qr){var Wr="";for(var Jr in Qr)if(Qr.hasOwnProperty(Jr)){var Kr=Qr[Jr];Array.isArray(Kr)?oe(Kr,function(an){Wr=gr(Wr,Jr,an)}):Wr=gr(Wr,Jr,Kr)}return Wr}function mr(Qr){var Wr=new FormData;for(var Jr in Qr)if(Qr.hasOwnProperty(Jr)){var Kr=Qr[Jr];Array.isArray(Kr)?oe(Kr,function(an){Wr.append(Jr,an)}):Wr.append(Jr,Kr)}return Wr}function xr(Qr,Wr,Jr){var Kr={"HX-Request":"true","HX-Trigger":ee(Qr,"id"),"HX-Trigger-Name":ee(Qr,"name"),"HX-Target":te(Wr,"id"),"HX-Current-URL":re().location.href};return Rr(Qr,"hx-headers",!1,Kr),Jr!==void 0&&(Kr["HX-Prompt"]=Jr),ae(Qr).boosted&&(Kr["HX-Boosted"]="true"),Kr}function yr(Qr,Wr){var Jr=ne(Wr,"hx-params");if(Jr){if(Jr==="none")return{};if(Jr==="*")return Qr;if(Jr.indexOf("not ")===0)return oe(Jr.substr(4).split(","),function(an){an=an.trim(),delete Qr[an]}),Qr;var Kr={};return oe(Jr.split(","),function(an){an=an.trim(),Kr[an]=Qr[an]}),Kr}else return Qr}function br(Qr){return ee(Qr,"href")&&ee(Qr,"href").indexOf("#")>=0}function wr(Qr,Wr){var Jr=Wr||ne(Qr,"hx-swap"),Kr={swapStyle:ae(Qr).boosted?"innerHTML":Q.config.defaultSwapStyle,swapDelay:Q.config.defaultSwapDelay,settleDelay:Q.config.defaultSettleDelay};if(Q.config.scrollIntoViewOnBoost&&ae(Qr).boosted&&!br(Qr)&&(Kr.show="top"),Jr){var an=D(Jr);if(an.length>0)for(var En=0;En<an.length;En++){var yn=an[En];if(yn.indexOf("swap:")===0)Kr.swapDelay=d(yn.substr(5));else if(yn.indexOf("settle:")===0)Kr.settleDelay=d(yn.substr(7));else if(yn.indexOf("transition:")===0)Kr.transition=yn.substr(11)==="true";else if(yn.indexOf("ignoreTitle:")===0)Kr.ignoreTitle=yn.substr(12)==="true";else if(yn.indexOf("scroll:")===0){var Cn=yn.substr(7),Rn=Cn.split(":"),Un=Rn.pop(),Hn=Rn.length>0?Rn.join(":"):null;Kr.scroll=Un,Kr.scrollTarget=Hn}else if(yn.indexOf("show:")===0){var Qn=yn.substr(5),Rn=Qn.split(":"),Bn=Rn.pop(),Hn=Rn.length>0?Rn.join(":"):null;Kr.show=Bn,Kr.showTarget=Hn}else if(yn.indexOf("focus-scroll:")===0){var Zn=yn.substr(13);Kr.focusScroll=Zn=="true"}else En==0?Kr.swapStyle=yn:b("Unknown modifier in hx-swap: "+yn)}}return Kr}function Sr(Qr){return ne(Qr,"hx-encoding")==="multipart/form-data"||h(Qr,"form")&&ee(Qr,"enctype")==="multipart/form-data"}function Er(Qr,Wr,Jr){var Kr=null;return R(Wr,function(an){Kr==null&&(Kr=an.encodeParameters(Qr,Jr,Wr))}),Kr??(Sr(Wr)?mr(Jr):pr(Jr))}function T(Qr){return{tasks:[],elts:[Qr]}}function Cr(Qr,Wr){var Jr=Qr[0],Kr=Qr[Qr.length-1];if(Wr.scroll){var an=null;Wr.scrollTarget&&(an=ue(Jr,Wr.scrollTarget)),Wr.scroll==="top"&&(Jr||an)&&(an=an||Jr,an.scrollTop=0),Wr.scroll==="bottom"&&(Kr||an)&&(an=an||Kr,an.scrollTop=an.scrollHeight)}if(Wr.show){var an=null;if(Wr.showTarget){var En=Wr.showTarget;Wr.showTarget==="window"&&(En="body"),an=ue(Jr,En)}Wr.show==="top"&&(Jr||an)&&(an=an||Jr,an.scrollIntoView({block:"start",behavior:Q.config.scrollBehavior})),Wr.show==="bottom"&&(Kr||an)&&(an=an||Kr,an.scrollIntoView({block:"end",behavior:Q.config.scrollBehavior}))}}function Rr(Qr,Wr,Jr,Kr){if(Kr==null&&(Kr={}),Qr==null)return Kr;var an=te(Qr,Wr);if(an){var En=an.trim(),yn=Jr;if(En==="unset")return null;En.indexOf("javascript:")===0?(En=En.substr(11),yn=!0):En.indexOf("js:")===0&&(En=En.substr(3),yn=!0),En.indexOf("{")!==0&&(En="{"+En+"}");var Cn;yn?Cn=Tr(Qr,function(){return Function("return ("+En+")")()},{}):Cn=E(En);for(var Rn in Cn)Cn.hasOwnProperty(Rn)&&Kr[Rn]==null&&(Kr[Rn]=Cn[Rn])}return Rr(u(Qr),Wr,Jr,Kr)}function Tr(Qr,Wr,Jr){return Q.config.allowEval?Wr():(fe(Qr,"htmx:evalDisallowedError"),Jr)}function Or(Qr,Wr){return Rr(Qr,"hx-vars",!0,Wr)}function qr(Qr,Wr){return Rr(Qr,"hx-vals",!1,Wr)}function Hr(Qr){return le(Or(Qr),qr(Qr))}function Lr(Qr,Wr,Jr){if(Jr!==null)try{Qr.setRequestHeader(Wr,Jr)}catch{Qr.setRequestHeader(Wr,encodeURIComponent(Jr)),Qr.setRequestHeader(Wr+"-URI-AutoEncoded","true")}}function Ar(Qr){if(Qr.responseURL&&typeof URL<"u")try{var Wr=new URL(Qr.responseURL);return Wr.pathname+Wr.search}catch{fe(re().body,"htmx:badResponseUrl",{url:Qr.responseURL})}}function O(Qr,Wr){return Wr.test(Qr.getAllResponseHeaders())}function Nr(Qr,Wr,Jr){return Qr=Qr.toLowerCase(),Jr?Jr instanceof Element||I(Jr,"String")?he(Qr,Wr,null,null,{targetOverride:p(Jr),returnPromise:!0}):he(Qr,Wr,p(Jr.source),Jr.event,{handler:Jr.handler,headers:Jr.headers,values:Jr.values,targetOverride:p(Jr.target),swapOverride:Jr.swap,select:Jr.select,returnPromise:!0}):he(Qr,Wr,null,null,{returnPromise:!0})}function Ir(Qr){for(var Wr=[];Qr;)Wr.push(Qr),Qr=Qr.parentElement;return Wr}function kr(Qr,Wr,Jr){var Kr,an;if(typeof URL=="function"){an=new URL(Wr,document.location.href);var En=document.location.origin;Kr=En===an.origin}else an=Wr,Kr=g(Wr,document.location.origin);return Q.config.selfRequestsOnly&&!Kr?!1:ce(Qr,"htmx:validateUrl",le({url:an,sameHost:Kr},Jr))}function he(Qr,Wr,Jr,Kr,an,En){var yn=null,Cn=null;if(an=an??{},an.returnPromise&&typeof Promise<"u")var Rn=new Promise(function(fn,pn){yn=fn,Cn=pn});Jr==null&&(Jr=re().body);var Un=an.handler||Mr,Hn=an.select||null;if(!se(Jr))return ie(yn),Rn;var Qn=an.targetOverride||ye(Jr);if(Qn==null||Qn==pe)return fe(Jr,"htmx:targetError",{target:te(Jr,"hx-target")}),ie(Cn),Rn;var Bn=ae(Jr),Zn=Bn.lastButtonClicked;if(Zn){var mi=ee(Zn,"formaction");mi!=null&&(Wr=mi);var ai=ee(Zn,"formmethod");ai!=null&&ai.toLowerCase()!=="dialog"&&(Qr=ai)}var hi=ne(Jr,"hx-confirm");if(En===void 0){var vi=function(fn){return he(Qr,Wr,Jr,Kr,an,!!fn)},gi={target:Qn,elt:Jr,path:Wr,verb:Qr,triggeringEvent:Kr,etc:an,issueRequest:vi,question:hi};if(ce(Jr,"htmx:confirm",gi)===!1)return ie(yn),Rn}var oi=Jr,Wn=ne(Jr,"hx-sync"),si=null,ei=!1;if(Wn){var bi=Wn.split(":"),ti=bi[0].trim();if(ti==="this"?oi=xe(Jr,"hx-sync"):oi=ue(Jr,ti),Wn=(bi[1]||"drop").trim(),Bn=ae(oi),Wn==="drop"&&Bn.xhr&&Bn.abortable!==!0)return ie(yn),Rn;if(Wn==="abort"){if(Bn.xhr)return ie(yn),Rn;ei=!0}else if(Wn==="replace")ce(oi,"htmx:abort");else if(Wn.indexOf("queue")===0){var $n=Wn.split(" ");si=($n[1]||"last").trim()}}if(Bn.xhr)if(Bn.abortable)ce(oi,"htmx:abort");else{if(si==null){if(Kr){var gn=ae(Kr);gn&&gn.triggerSpec&&gn.triggerSpec.queue&&(si=gn.triggerSpec.queue)}si==null&&(si="last")}return Bn.queuedRequests==null&&(Bn.queuedRequests=[]),si==="first"&&Bn.queuedRequests.length===0?Bn.queuedRequests.push(function(){he(Qr,Wr,Jr,Kr,an)}):si==="all"?Bn.queuedRequests.push(function(){he(Qr,Wr,Jr,Kr,an)}):si==="last"&&(Bn.queuedRequests=[],Bn.queuedRequests.push(function(){he(Qr,Wr,Jr,Kr,an)})),ie(yn),Rn}var Yr=new XMLHttpRequest;Bn.xhr=Yr,Bn.abortable=ei;var tn=function(){if(Bn.xhr=null,Bn.abortable=!1,Bn.queuedRequests!=null&&Bn.queuedRequests.length>0){var fn=Bn.queuedRequests.shift();fn()}},cn=ne(Jr,"hx-prompt");if(cn){var mn=prompt(cn);if(mn===null||!ce(Jr,"htmx:prompt",{prompt:mn,target:Qn}))return ie(yn),tn(),Rn}if(hi&&!En&&!confirm(hi))return ie(yn),tn(),Rn;var Tn=xr(Jr,Qn,mn);Qr!=="get"&&!Sr(Jr)&&(Tn["Content-Type"]="application/x-www-form-urlencoded"),an.headers&&(Tn=le(Tn,an.headers));var hn=dr(Jr,Qr),vn=hn.errors,ln=hn.values;an.values&&(ln=le(ln,an.values));var bn=Hr(Jr),wn=le(ln,bn),Nn=yr(wn,Jr);Q.config.getCacheBusterParam&&Qr==="get"&&(Nn["org.htmx.cache-buster"]=ee(Qn,"id")||"true"),(Wr==null||Wr==="")&&(Wr=re().location.href);var Sn=Rr(Jr,"hx-request"),On=ae(Jr).boosted,An=Q.config.methodsThatUseUrlParams.indexOf(Qr)>=0,In={boosted:On,useUrlParams:An,parameters:Nn,unfilteredParameters:wn,headers:Tn,target:Qn,verb:Qr,errors:vn,withCredentials:an.credentials||Sn.credentials||Q.config.withCredentials,timeout:an.timeout||Sn.timeout||Q.config.timeout,path:Wr,triggeringEvent:Kr};if(!ce(Jr,"htmx:configRequest",In))return ie(yn),tn(),Rn;if(Wr=In.path,Qr=In.verb,Tn=In.headers,Nn=In.parameters,vn=In.errors,An=In.useUrlParams,vn&&vn.length>0)return ce(Jr,"htmx:validation:halted",In),ie(yn),tn(),Rn;var Pn=Wr.split("#"),jn=Pn[0],Dn=Pn[1],en=Wr;if(An){en=jn;var rn=Object.keys(Nn).length!==0;rn&&(en.indexOf("?")<0?en+="?":en+="&",en+=pr(Nn),Dn&&(en+="#"+Dn))}if(!kr(Jr,en,In))return fe(Jr,"htmx:invalidPath",In),ie(Cn),Rn;if(Yr.open(Qr.toUpperCase(),en,!0),Yr.overrideMimeType("text/html"),Yr.withCredentials=In.withCredentials,Yr.timeout=In.timeout,!Sn.noHeaders){for(var Gr in Tn)if(Tn.hasOwnProperty(Gr)){var Zr=Tn[Gr];Lr(Yr,Gr,Zr)}}var sn={xhr:Yr,target:Qn,requestConfig:In,etc:an,boosted:On,select:Hn,pathInfo:{requestPath:Wr,finalRequestPath:en,anchor:Dn}};if(Yr.onload=function(){try{var fn=Ir(Jr);if(sn.pathInfo.responsePath=Ar(Yr),Un(Jr,sn),lr(nn,un),ce(Jr,"htmx:afterRequest",sn),ce(Jr,"htmx:afterOnLoad",sn),!se(Jr)){for(var pn=null;fn.length>0&&pn==null;){var dn=fn.shift();se(dn)&&(pn=dn)}pn&&(ce(pn,"htmx:afterRequest",sn),ce(pn,"htmx:afterOnLoad",sn))}ie(yn),tn()}catch(qn){throw fe(Jr,"htmx:onLoadError",le({error:qn},sn)),qn}},Yr.onerror=function(){lr(nn,un),fe(Jr,"htmx:afterRequest",sn),fe(Jr,"htmx:sendError",sn),ie(Cn),tn()},Yr.onabort=function(){lr(nn,un),fe(Jr,"htmx:afterRequest",sn),fe(Jr,"htmx:sendAbort",sn),ie(Cn),tn()},Yr.ontimeout=function(){lr(nn,un),fe(Jr,"htmx:afterRequest",sn),fe(Jr,"htmx:timeout",sn),ie(Cn),tn()},!ce(Jr,"htmx:beforeRequest",sn))return ie(yn),tn(),Rn;var nn=or(Jr),un=sr(Jr);oe(["loadstart","loadend","progress","abort"],function(fn){oe([Yr,Yr.upload],function(pn){pn.addEventListener(fn,function(dn){ce(Jr,"htmx:xhr:"+fn,{lengthComputable:dn.lengthComputable,loaded:dn.loaded,total:dn.total})})})}),ce(Jr,"htmx:beforeSend",sn);var on=An?null:Er(Yr,Jr,Nn);return Yr.send(on),Rn}function Pr(Qr,Wr){var Jr=Wr.xhr,Kr=null,an=null;if(O(Jr,/HX-Push:/i)?(Kr=Jr.getResponseHeader("HX-Push"),an="push"):O(Jr,/HX-Push-Url:/i)?(Kr=Jr.getResponseHeader("HX-Push-Url"),an="push"):O(Jr,/HX-Replace-Url:/i)&&(Kr=Jr.getResponseHeader("HX-Replace-Url"),an="replace"),Kr)return Kr==="false"?{}:{type:an,path:Kr};var En=Wr.pathInfo.finalRequestPath,yn=Wr.pathInfo.responsePath,Cn=ne(Qr,"hx-push-url"),Rn=ne(Qr,"hx-replace-url"),Un=ae(Qr).boosted,Hn=null,Qn=null;return Cn?(Hn="push",Qn=Cn):Rn?(Hn="replace",Qn=Rn):Un&&(Hn="push",Qn=yn||En),Qn?Qn==="false"?{}:(Qn==="true"&&(Qn=yn||En),Wr.pathInfo.anchor&&Qn.indexOf("#")===-1&&(Qn=Qn+"#"+Wr.pathInfo.anchor),{type:Hn,path:Qn}):{}}function Mr(Qr,Wr){var Jr=Wr.xhr,Kr=Wr.target,an=Wr.etc,En=Wr.requestConfig,yn=Wr.select;if(ce(Qr,"htmx:beforeOnLoad",Wr)){if(O(Jr,/HX-Trigger:/i)&&_e(Jr,"HX-Trigger",Qr),O(Jr,/HX-Location:/i)){er();var Cn=Jr.getResponseHeader("HX-Location"),Rn;Cn.indexOf("{")===0&&(Rn=E(Cn),Cn=Rn.path,delete Rn.path),Nr("GET",Cn,Rn).then(function(){tr(Cn)});return}var Un=O(Jr,/HX-Refresh:/i)&&Jr.getResponseHeader("HX-Refresh")==="true";if(O(Jr,/HX-Redirect:/i)){location.href=Jr.getResponseHeader("HX-Redirect"),Un&&location.reload();return}if(Un){location.reload();return}O(Jr,/HX-Retarget:/i)&&(Jr.getResponseHeader("HX-Retarget")==="this"?Wr.target=Qr:Wr.target=ue(Qr,Jr.getResponseHeader("HX-Retarget")));var Hn=Pr(Qr,Wr),Qn=Jr.status>=200&&Jr.status<400&&Jr.status!==204,Bn=Jr.response,Zn=Jr.status>=400,mi=Q.config.ignoreTitle,ai=le({shouldSwap:Qn,serverResponse:Bn,isError:Zn,ignoreTitle:mi},Wr);if(ce(Kr,"htmx:beforeSwap",ai)){if(Kr=ai.target,Bn=ai.serverResponse,Zn=ai.isError,mi=ai.ignoreTitle,Wr.target=Kr,Wr.failed=Zn,Wr.successful=!Zn,ai.shouldSwap){Jr.status===286&&at(Qr),R(Qr,function(ti){Bn=ti.transformResponse(Bn,Jr,Qr)}),Hn.type&&er();var hi=an.swapOverride;O(Jr,/HX-Reswap:/i)&&(hi=Jr.getResponseHeader("HX-Reswap"));var Rn=wr(Qr,hi);Rn.hasOwnProperty("ignoreTitle")&&(mi=Rn.ignoreTitle),Kr.classList.add(Q.config.swappingClass);var vi=null,gi=null,oi=function(){try{var ti=document.activeElement,$n={};try{$n={elt:ti,start:ti?ti.selectionStart:null,end:ti?ti.selectionEnd:null}}catch{}var gn;yn&&(gn=yn),O(Jr,/HX-Reselect:/i)&&(gn=Jr.getResponseHeader("HX-Reselect")),Hn.type&&(ce(re().body,"htmx:beforeHistoryUpdate",le({history:Hn},Wr)),Hn.type==="push"?(tr(Hn.path),ce(re().body,"htmx:pushedIntoHistory",{path:Hn.path})):(rr(Hn.path),ce(re().body,"htmx:replacedInHistory",{path:Hn.path})));var Yr=T(Kr);if(je(Rn.swapStyle,Kr,Qr,Bn,Yr,gn),$n.elt&&!se($n.elt)&&ee($n.elt,"id")){var tn=document.getElementById(ee($n.elt,"id")),cn={preventScroll:Rn.focusScroll!==void 0?!Rn.focusScroll:!Q.config.defaultFocusScroll};if(tn){if($n.start&&tn.setSelectionRange)try{tn.setSelectionRange($n.start,$n.end)}catch{}tn.focus(cn)}}if(Kr.classList.remove(Q.config.swappingClass),oe(Yr.elts,function(hn){hn.classList&&hn.classList.add(Q.config.settlingClass),ce(hn,"htmx:afterSwap",Wr)}),O(Jr,/HX-Trigger-After-Swap:/i)){var mn=Qr;se(Qr)||(mn=re().body),_e(Jr,"HX-Trigger-After-Swap",mn)}var Tn=function(){if(oe(Yr.tasks,function(bn){bn.call()}),oe(Yr.elts,function(bn){bn.classList&&bn.classList.remove(Q.config.settlingClass),ce(bn,"htmx:afterSettle",Wr)}),Wr.pathInfo.anchor){var hn=re().getElementById(Wr.pathInfo.anchor);hn&&hn.scrollIntoView({block:"start",behavior:"auto"})}if(Yr.title&&!mi){var vn=C("title");vn?vn.innerHTML=Yr.title:window.document.title=Yr.title}if(Cr(Yr.elts,Rn),O(Jr,/HX-Trigger-After-Settle:/i)){var ln=Qr;se(Qr)||(ln=re().body),_e(Jr,"HX-Trigger-After-Settle",ln)}ie(vi)};Rn.settleDelay>0?setTimeout(Tn,Rn.settleDelay):Tn()}catch(hn){throw fe(Qr,"htmx:swapError",Wr),ie(gi),hn}},Wn=Q.config.globalViewTransitions;if(Rn.hasOwnProperty("transition")&&(Wn=Rn.transition),Wn&&ce(Qr,"htmx:beforeTransition",Wr)&&typeof Promise<"u"&&document.startViewTransition){var si=new Promise(function(ti,$n){vi=ti,gi=$n}),ei=oi;oi=function(){document.startViewTransition(function(){return ei(),si})}}Rn.swapDelay>0?setTimeout(oi,Rn.swapDelay):oi()}Zn&&fe(Qr,"htmx:responseError",le({error:"Response Status Error Code "+Jr.status+" from "+Wr.pathInfo.requestPath},Wr))}}}var Xr={};function Dr(){return{init:function(Qr){return null},onEvent:function(Qr,Wr){return!0},transformResponse:function(Qr,Wr,Jr){return Qr},isInlineSwap:function(Qr){return!1},handleSwap:function(Qr,Wr,Jr,Kr){return!1},encodeParameters:function(Qr,Wr,Jr){return null}}}function Ur(Qr,Wr){Wr.init&&Wr.init(r),Xr[Qr]=le(Dr(),Wr)}function Br(Qr){delete Xr[Qr]}function Fr(Qr,Wr,Jr){if(Qr==null)return Wr;Wr==null&&(Wr=[]),Jr==null&&(Jr=[]);var Kr=te(Qr,"hx-ext");return Kr&&oe(Kr.split(","),function(an){if(an=an.replace(/ /g,""),an.slice(0,7)=="ignore:"){Jr.push(an.slice(7));return}if(Jr.indexOf(an)<0){var En=Xr[an];En&&Wr.indexOf(En)<0&&Wr.push(En)}}),Fr(u(Qr),Wr,Jr)}var Vr=!1;re().addEventListener("DOMContentLoaded",function(){Vr=!0});function jr(Qr){Vr||re().readyState==="complete"?Qr():re().addEventListener("DOMContentLoaded",Qr)}function _r(){Q.config.includeIndicatorStyles!==!1&&re().head.insertAdjacentHTML("beforeend","<style>                      ."+Q.config.indicatorClass+"{opacity:0}                      ."+Q.config.requestClass+" ."+Q.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}                      ."+Q.config.requestClass+"."+Q.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}                    </style>")}function zr(){var Qr=re().querySelector('meta[name="htmx-config"]');return Qr?E(Qr.content):null}function $r(){var Qr=zr();Qr&&(Q.config=le(Q.config,Qr))}return jr(function(){$r(),_r();var Qr=re().body;zt(Qr);var Wr=re().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']");Qr.addEventListener("htmx:abort",function(Kr){var an=Kr.target,En=ae(an);En&&En.xhr&&En.xhr.abort()});let Jr=window.onpopstate?window.onpopstate.bind(window):null;window.onpopstate=function(Kr){Kr.state&&Kr.state.htmx?(ar(),oe(Wr,function(an){ce(an,"htmx:restored",{document:re(),triggerEvent:ce})})):Jr&&Jr(Kr)},setTimeout(function(){ce(Qr,"htmx:load",{}),Qr=null},0)}),Q}()})});var Hi=Fi((Ri,Mi)=>{(function(Qr,Wr){let Jr=Wr(Qr);typeof Ri=="object"&&typeof Ri.nodeName!="string"?Mi.exports=Jr:(Qr._hyperscript=Jr,"document"in Qr&&Qr._hyperscript.browserInit())})(typeof self<"u"?self:Ri,Qr=>{"use strict";let Wr={dynamicResolvers:[function(gn,Yr){if(gn==="Fixed")return Number(Yr).toFixed();if(gn.indexOf("Fixed:")===0){let tn=gn.split(":")[1];return Number(Yr).toFixed(parseInt(tn))}}],String:function(gn){return gn.toString?gn.toString():""+gn},Int:function(gn){return parseInt(gn)},Float:function(gn){return parseFloat(gn)},Number:function(gn){return Number(gn)},Date:function(gn){return new Date(gn)},Array:function(gn){return Array.from(gn)},JSON:function(gn){return JSON.stringify(gn)},Object:function(gn){return gn instanceof String&&(gn=gn.toString()),typeof gn=="string"?JSON.parse(gn):Object.assign({},gn)}},Jr={attributes:"_, script, data-script",defaultTransition:"all 500ms ease-in",disableSelector:"[disable-scripting], [data-disable-scripting]",hideShowStrategies:{},conversions:Wr};class Kr{static OP_TABLE={"+":"PLUS","-":"MINUS","*":"MULTIPLY","/":"DIVIDE",".":"PERIOD","..":"ELLIPSIS","\\":"BACKSLASH",":":"COLON","%":"PERCENT","|":"PIPE","!":"EXCLAMATION","?":"QUESTION","#":"POUND","&":"AMPERSAND",$:"DOLLAR",";":"SEMI",",":"COMMA","(":"L_PAREN",")":"R_PAREN","<":"L_ANG",">":"R_ANG","<=":"LTE_ANG",">=":"GTE_ANG","==":"EQ","===":"EQQ","!=":"NEQ","!==":"NEQQ","{":"L_BRACE","}":"R_BRACE","[":"L_BRACKET","]":"R_BRACKET","=":"EQUALS","~":"TILDE"};static isValidCSSClassChar(Yr){return Kr.isAlpha(Yr)||Kr.isNumeric(Yr)||Yr==="-"||Yr==="_"||Yr===":"}static isValidCSSIDChar(Yr){return Kr.isAlpha(Yr)||Kr.isNumeric(Yr)||Yr==="-"||Yr==="_"||Yr===":"}static isWhitespace(Yr){return Yr===" "||Yr==="	"||Kr.isNewline(Yr)}static positionString(Yr){return"[Line: "+Yr.line+", Column: "+Yr.column+"]"}static isNewline(Yr){return Yr==="\r"||Yr===`
`}static isNumeric(Yr){return Yr>="0"&&Yr<="9"}static isAlpha(Yr){return Yr>="a"&&Yr<="z"||Yr>="A"&&Yr<="Z"}static isIdentifierChar(Yr,tn){return Yr==="_"||Yr==="$"}static isReservedChar(Yr){return Yr==="`"||Yr==="^"}static isValidSingleQuoteStringStart(Yr){if(Yr.length>0){var tn=Yr[Yr.length-1];if(tn.type==="IDENTIFIER"||tn.type==="CLASS_REF"||tn.type==="ID_REF"||tn.op&&(tn.value===">"||tn.value===")"))return!1}return!0}static tokenize(Yr,tn){var cn=[],mn=Yr,Tn=0,hn=0,vn=1,ln="<START>",bn=0;function wn(){return tn&&bn===0}for(;Tn<mn.length;)if(on()==="-"&&fn()==="-"&&(Kr.isWhitespace(pn(2))||pn(2)===""||pn(2)==="-")||on()==="/"&&fn()==="/"&&(Kr.isWhitespace(pn(2))||pn(2)===""||pn(2)==="/"))On();else if(on()==="/"&&fn()==="*"&&(Kr.isWhitespace(pn(2))||pn(2)===""||pn(2)==="*"))An();else if(Kr.isWhitespace(on()))cn.push(Fn());else if(!qn()&&on()==="."&&(Kr.isAlpha(fn())||fn()==="{"||fn()==="-"))cn.push(In());else if(!qn()&&on()==="#"&&(Kr.isAlpha(fn())||fn()==="{"))cn.push(en());else if(on()==="["&&fn()==="@")cn.push(Pn());else if(on()==="@")cn.push(jn());else if(on()==="*"&&Kr.isAlpha(fn()))cn.push(Dn());else if(wn()&&(Kr.isAlpha(on())||on()==="\\"))cn.push(rn());else if(!wn()&&(Kr.isAlpha(on())||Kr.isIdentifierChar(on())))cn.push(Gr());else if(Kr.isNumeric(on()))cn.push(Zr());else if(!wn()&&(on()==='"'||on()==="`"))cn.push(nn());else if(!wn()&&on()==="'")Kr.isValidSingleQuoteStringStart(cn)?cn.push(nn()):cn.push(sn());else if(Kr.OP_TABLE[on()])ln==="$"&&on()==="{"&&bn++,on()==="}"&&bn--,cn.push(sn());else if(wn()||Kr.isReservedChar(on()))cn.push(Sn("RESERVED",dn()));else if(Tn<mn.length)throw Error("Unknown token: "+on()+" ");return new an(cn,[],mn);function Nn(xn,kn){var Mn=Sn(xn,kn);return Mn.op=!0,Mn}function Sn(xn,kn){return{type:xn,value:kn||"",start:Tn,end:Tn+1,column:hn,line:vn}}function On(){for(;on()&&!Kr.isNewline(on());)dn();dn()}function An(){for(;on()&&!(on()==="*"&&fn()==="/");)dn();dn(),dn()}function In(){var xn=Sn("CLASS_REF"),kn=dn();if(on()==="{"){for(xn.template=!0,kn+=dn();on()&&on()!=="}";)kn+=dn();if(on()!=="}")throw Error("Unterminated class reference");kn+=dn()}else for(;Kr.isValidCSSClassChar(on())||on()==="\\";)on()==="\\"&&dn(),kn+=dn();return xn.value=kn,xn.end=Tn,xn}function Pn(){for(var xn=Sn("ATTRIBUTE_REF"),kn=dn();Tn<mn.length&&on()!=="]";)kn+=dn();return on()==="]"&&(kn+=dn()),xn.value=kn,xn.end=Tn,xn}function jn(){for(var xn=Sn("ATTRIBUTE_REF"),kn=dn();Kr.isValidCSSIDChar(on());)kn+=dn();if(on()==="="){if(kn+=dn(),on()==='"'||on()==="'"){let Mn=nn();kn+=Mn.value}else if(Kr.isAlpha(on())||Kr.isNumeric(on())||Kr.isIdentifierChar(on())){let Mn=Gr();kn+=Mn.value}}return xn.value=kn,xn.end=Tn,xn}function Dn(){for(var xn=Sn("STYLE_REF"),kn=dn();Kr.isAlpha(on())||on()==="-";)kn+=dn();return xn.value=kn,xn.end=Tn,xn}function en(){var xn=Sn("ID_REF"),kn=dn();if(on()==="{"){for(xn.template=!0,kn+=dn();on()&&on()!=="}";)kn+=dn();if(on()!=="}")throw Error("Unterminated id reference");dn()}else for(;Kr.isValidCSSIDChar(on());)kn+=dn();return xn.value=kn,xn.end=Tn,xn}function rn(){var xn=Sn("IDENTIFIER"),kn=dn(),Mn=kn==="\\";for(Mn&&(kn="");(Kr.isAlpha(on())||Kr.isNumeric(on())||Kr.isIdentifierChar(on())||on()==="\\"||on()==="{"||on()==="}")&&!(on()==="$"&&Mn===!1);)on()==="\\"?(Mn=!0,dn()):(Mn=!1,kn+=dn());return on()==="!"&&kn==="beep"&&(kn+=dn()),xn.value=kn,xn.end=Tn,xn}function Gr(){for(var xn=Sn("IDENTIFIER"),kn=dn();Kr.isAlpha(on())||Kr.isNumeric(on())||Kr.isIdentifierChar(on());)kn+=dn();return on()==="!"&&kn==="beep"&&(kn+=dn()),xn.value=kn,xn.end=Tn,xn}function Zr(){for(var xn=Sn("NUMBER"),kn=dn();Kr.isNumeric(on());)kn+=dn();for(on()==="."&&Kr.isNumeric(fn())&&(kn+=dn());Kr.isNumeric(on());)kn+=dn();for((on()==="e"||on()==="E")&&(Kr.isNumeric(fn())?kn+=dn():fn()==="-"&&(kn+=dn(),kn+=dn()));Kr.isNumeric(on());)kn+=dn();return xn.value=kn,xn.end=Tn,xn}function sn(){for(var xn=Nn(),kn=dn();on()&&Kr.OP_TABLE[kn+on()];)kn+=dn();return xn.type=Kr.OP_TABLE[kn],xn.value=kn,xn.end=Tn,xn}function nn(){var xn=Sn("STRING"),kn=dn();xn.template=kn==="`";for(var Mn="";on()&&on()!==kn;)if(on()==="\\"){dn();let Ln=dn();if(Ln==="b")Mn+="\b";else if(Ln==="f")Mn+="\f";else if(Ln==="n")Mn+=`
`;else if(Ln==="r")Mn+="\r";else if(Ln==="t")Mn+="	";else if(Ln==="v")Mn+="\v";else if(xn.template&&Ln==="$")Mn+="\\$";else if(Ln==="x"){let Vn=un();if(Number.isNaN(Vn))throw Error("Invalid hexadecimal escape at "+Kr.positionString(xn));Mn+=String.fromCharCode(Vn)}else Mn+=Ln}else Mn+=dn();if(on()!==kn)throw Error("Unterminated string at "+Kr.positionString(xn));return dn(),xn.value=Mn,xn.end=Tn,xn}function un(){if(!on())return NaN;let kn=16*Number.parseInt(dn(),16);return on()?(kn+=Number.parseInt(dn(),16),kn):NaN}function on(){return mn.charAt(Tn)}function fn(){return mn.charAt(Tn+1)}function pn(xn=1){return mn.charAt(Tn+xn)}function dn(){return ln=on(),Tn++,hn++,ln}function qn(){return Kr.isAlpha(ln)||Kr.isNumeric(ln)||ln===")"||ln==='"'||ln==="'"||ln==="`"||ln==="}"||ln==="]"}function Fn(){for(var xn=Sn("WHITESPACE"),kn="";on()&&Kr.isWhitespace(on());)Kr.isNewline(on())&&(hn=0,vn++),kn+=dn();return xn.value=kn,xn.end=Tn,xn}}tokenize(Yr,tn){return Kr.tokenize(Yr,tn)}}class an{constructor(Yr,tn,cn){this.tokens=Yr,this.consumed=tn,this.source=cn,this.consumeWhitespace()}get list(){return this.tokens}_lastConsumed=null;consumeWhitespace(){for(;this.token(0,!0).type==="WHITESPACE";)this.consumed.push(this.tokens.shift())}raiseError(Yr,tn){En.raiseParseError(Yr,tn)}requireOpToken(Yr){var tn=this.matchOpToken(Yr);if(tn)return tn;this.raiseError(this,"Expected '"+Yr+"' but found '"+this.currentToken().value+"'")}matchAnyOpToken(Yr,tn,cn){for(var mn=0;mn<arguments.length;mn++){var Tn=arguments[mn],hn=this.matchOpToken(Tn);if(hn)return hn}}matchAnyToken(Yr,tn,cn){for(var mn=0;mn<arguments.length;mn++){var Tn=arguments[mn],hn=this.matchToken(Tn);if(hn)return hn}}matchOpToken(Yr){if(this.currentToken()&&this.currentToken().op&&this.currentToken().value===Yr)return this.consumeToken()}requireTokenType(Yr,tn,cn,mn){var Tn=this.matchTokenType(Yr,tn,cn,mn);if(Tn)return Tn;this.raiseError(this,"Expected one of "+JSON.stringify([Yr,tn,cn]))}matchTokenType(Yr,tn,cn,mn){if(this.currentToken()&&this.currentToken().type&&[Yr,tn,cn,mn].indexOf(this.currentToken().type)>=0)return this.consumeToken()}requireToken(Yr,tn){var cn=this.matchToken(Yr,tn);if(cn)return cn;this.raiseError(this,"Expected '"+Yr+"' but found '"+this.currentToken().value+"'")}peekToken(Yr,tn,cn){if(tn=tn||0,cn=cn||"IDENTIFIER",this.tokens[tn]&&this.tokens[tn].value===Yr&&this.tokens[tn].type===cn)return this.tokens[tn]}matchToken(Yr,tn){if(this.follows.indexOf(Yr)===-1&&(tn=tn||"IDENTIFIER",this.currentToken()&&this.currentToken().value===Yr&&this.currentToken().type===tn))return this.consumeToken()}consumeToken(){var Yr=this.tokens.shift();return this.consumed.push(Yr),this._lastConsumed=Yr,this.consumeWhitespace(),Yr}consumeUntil(Yr,tn){for(var cn=[],mn=this.token(0,!0);(tn==null||mn.type!==tn)&&(Yr==null||mn.value!==Yr)&&mn.type!=="EOF";){var Tn=this.tokens.shift();this.consumed.push(Tn),cn.push(mn),mn=this.token(0,!0)}return this.consumeWhitespace(),cn}lastWhitespace(){return this.consumed[this.consumed.length-1]&&this.consumed[this.consumed.length-1].type==="WHITESPACE"?this.consumed[this.consumed.length-1].value:""}consumeUntilWhitespace(){return this.consumeUntil(null,"WHITESPACE")}hasMore(){return this.tokens.length>0}token(Yr,tn){var cn,mn=0;do{if(!tn)for(;this.tokens[mn]&&this.tokens[mn].type==="WHITESPACE";)mn++;cn=this.tokens[mn],Yr--,mn++}while(Yr>-1);return cn||{type:"EOF",value:"<<<EOF>>>"}}currentToken(){return this.token(0)}lastMatch(){return this._lastConsumed}static sourceFor=function(){return this.programSource.substring(this.startToken.start,this.endToken.end)};static lineFor=function(){return this.programSource.split(`
`)[this.startToken.line-1]};follows=[];pushFollow(Yr){this.follows.push(Yr)}popFollow(){this.follows.pop()}clearFollows(){var Yr=this.follows;return this.follows=[],Yr}restoreFollows(Yr){this.follows=Yr}}class En{constructor(Yr){this.runtime=Yr,this.possessivesDisabled=!1,this.addGrammarElement("feature",function(tn,cn,mn){if(mn.matchOpToken("(")){var Tn=tn.requireElement("feature",mn);return mn.requireOpToken(")"),Tn}var hn=tn.FEATURES[mn.currentToken().value||""];if(hn)return hn(tn,cn,mn)}),this.addGrammarElement("command",function(tn,cn,mn){if(mn.matchOpToken("(")){let vn=tn.requireElement("command",mn);return mn.requireOpToken(")"),vn}var Tn=tn.COMMANDS[mn.currentToken().value||""];let hn;return Tn?hn=Tn(tn,cn,mn):mn.currentToken().type==="IDENTIFIER"&&(hn=tn.parseElement("pseudoCommand",mn)),hn&&tn.parseElement("indirectStatement",mn,hn)}),this.addGrammarElement("commandList",function(tn,cn,mn){if(mn.hasMore()){var Tn=tn.parseElement("command",mn);if(Tn){mn.matchToken("then");let hn=tn.parseElement("commandList",mn);return hn&&(Tn.next=hn),Tn}}return{type:"emptyCommandListCommand",op:function(hn){return cn.findNext(this,hn)},execute:function(hn){return cn.unifiedExec(this,hn)}}}),this.addGrammarElement("leaf",function(tn,cn,mn){var Tn=tn.parseAnyOf(tn.LEAF_EXPRESSIONS,mn);return Tn??tn.parseElement("symbol",mn)}),this.addGrammarElement("indirectExpression",function(tn,cn,mn,Tn){for(var hn=0;hn<tn.INDIRECT_EXPRESSIONS.length;hn++){var vn=tn.INDIRECT_EXPRESSIONS[hn];Tn.endToken=mn.lastMatch();var ln=tn.parseElement(vn,mn,Tn);if(ln)return ln}return Tn}),this.addGrammarElement("indirectStatement",function(tn,cn,mn,Tn){if(mn.matchToken("unless")){Tn.endToken=mn.lastMatch();var hn=tn.requireElement("expression",mn),vn={type:"unlessStatementModifier",args:[hn],op:function(ln,bn){return bn?this.next:Tn},execute:function(ln){return cn.unifiedExec(this,ln)}};return Tn.parent=vn,vn}return Tn}),this.addGrammarElement("primaryExpression",function(tn,cn,mn){var Tn=tn.parseElement("leaf",mn);if(Tn)return tn.parseElement("indirectExpression",mn,Tn);tn.raiseParseError(mn,"Unexpected value: "+mn.currentToken().value)})}use(Yr){return Yr(this),this}GRAMMAR={};COMMANDS={};FEATURES={};LEAF_EXPRESSIONS=[];INDIRECT_EXPRESSIONS=[];initElt(Yr,tn,cn){Yr.startToken=tn,Yr.sourceFor=an.sourceFor,Yr.lineFor=an.lineFor,Yr.programSource=cn.source}parseElement(Yr,tn,cn=void 0){var mn=this.GRAMMAR[Yr];if(mn){var Tn=tn.currentToken(),hn=mn(this,this.runtime,tn,cn);if(hn){this.initElt(hn,Tn,tn),hn.endToken=hn.endToken||tn.lastMatch();for(var cn=hn.root;cn!=null;)this.initElt(cn,Tn,tn),cn=cn.root}return hn}}requireElement(Yr,tn,cn,mn){var Tn=this.parseElement(Yr,tn,mn);return Tn||En.raiseParseError(tn,cn||"Expected "+Yr),Tn}parseAnyOf(Yr,tn){for(var cn=0;cn<Yr.length;cn++){var mn=Yr[cn],Tn=this.parseElement(mn,tn);if(Tn)return Tn}}addGrammarElement(Yr,tn){this.GRAMMAR[Yr]=tn}addCommand(Yr,tn){var cn=Yr+"Command",mn=function(Tn,hn,vn){let ln=tn(Tn,hn,vn);if(ln)return ln.type=cn,ln.execute=function(bn){return bn.meta.command=ln,hn.unifiedExec(this,bn)},ln};this.GRAMMAR[cn]=mn,this.COMMANDS[Yr]=mn}addFeature(Yr,tn){var cn=Yr+"Feature",mn=function(Tn,hn,vn){var ln=tn(Tn,hn,vn);if(ln)return ln.isFeature=!0,ln.keyword=Yr,ln.type=cn,ln};this.GRAMMAR[cn]=mn,this.FEATURES[Yr]=mn}addLeafExpression(Yr,tn){this.LEAF_EXPRESSIONS.push(Yr),this.addGrammarElement(Yr,tn)}addIndirectExpression(Yr,tn){this.INDIRECT_EXPRESSIONS.push(Yr),this.addGrammarElement(Yr,tn)}static createParserContext(Yr){var tn=Yr.currentToken(),cn=Yr.source,mn=cn.split(`
`),Tn=tn&&tn.line?tn.line-1:mn.length-1,hn=mn[Tn],vn=tn&&tn.line?tn.column:hn.length-1;return hn+`
`+" ".repeat(vn)+`^^

`}static raiseParseError(Yr,tn){tn=(tn||"Unexpected Token : "+Yr.currentToken().value)+`

`+En.createParserContext(Yr);var cn=new Error(tn);throw cn.tokens=Yr,cn}raiseParseError(Yr,tn){En.raiseParseError(Yr,tn)}parseHyperScript(Yr){var tn=this.parseElement("hyperscript",Yr);if(Yr.hasMore()&&this.raiseParseError(Yr),tn)return tn}setParent(Yr,tn){typeof Yr=="object"&&(Yr.parent=tn,typeof tn=="object"&&(tn.children=tn.children||new Set,tn.children.add(Yr)),this.setParent(Yr.next,tn))}commandStart(Yr){return this.COMMANDS[Yr.value||""]}featureStart(Yr){return this.FEATURES[Yr.value||""]}commandBoundary(Yr){return!!(Yr.value=="end"||Yr.value=="then"||Yr.value=="else"||Yr.value=="otherwise"||Yr.value==")"||this.commandStart(Yr)||this.featureStart(Yr)||Yr.type=="EOF")}parseStringTemplate(Yr){var tn=[""];do if(tn.push(Yr.lastWhitespace()),Yr.currentToken().value==="$"){Yr.consumeToken();var cn=Yr.matchOpToken("{");tn.push(this.requireElement("expression",Yr)),cn&&Yr.requireOpToken("}"),tn.push("")}else if(Yr.currentToken().value==="\\")Yr.consumeToken(),Yr.consumeToken();else{var mn=Yr.consumeToken();tn[tn.length-1]+=mn?mn.value:""}while(Yr.hasMore());return tn.push(Yr.lastWhitespace()),tn}ensureTerminated(Yr){let tn=this.runtime;for(var cn={type:"implicitReturn",op:function(Tn){return Tn.meta.returned=!0,Tn.meta.resolve&&Tn.meta.resolve(),tn.HALT},execute:function(Tn){}},mn=Yr;mn.next;)mn=mn.next;mn.next=cn}}class yn{constructor(Yr,tn){this.lexer=Yr??new Kr,this.parser=tn??new En(this).use(gi).use(oi),this.parser.runtime=this}matchesSelector(Yr,tn){var cn=Yr.matches||Yr.matchesSelector||Yr.msMatchesSelector||Yr.mozMatchesSelector||Yr.webkitMatchesSelector||Yr.oMatchesSelector;return cn&&cn.call(Yr,tn)}makeEvent(Yr,tn){var cn;return Qr.Event&&typeof Qr.Event=="function"?(cn=new Event(Yr,{bubbles:!0,cancelable:!0,composed:!0}),cn.detail=tn):(cn=document.createEvent("CustomEvent"),cn.initCustomEvent(Yr,!0,!0,tn)),cn}triggerEvent(Yr,tn,cn,mn){cn=cn||{},cn.sender=mn;var Tn=this.makeEvent(tn,cn),hn=Yr.dispatchEvent(Tn);return hn}isArrayLike(Yr){return Array.isArray(Yr)||typeof NodeList<"u"&&(Yr instanceof NodeList||Yr instanceof HTMLCollection||Yr instanceof FileList)}isIterable(Yr){return typeof Yr=="object"&&Symbol.iterator in Yr&&typeof Yr[Symbol.iterator]=="function"}shouldAutoIterate(Yr){return Yr!=null&&Yr[Zn]||this.isArrayLike(Yr)}forEach(Yr,tn){if(Yr!=null)if(this.isIterable(Yr))for(let mn of Yr)tn(mn);else if(this.isArrayLike(Yr))for(var cn=0;cn<Yr.length;cn++)tn(Yr[cn]);else tn(Yr)}implicitLoop(Yr,tn){if(this.shouldAutoIterate(Yr))for(let cn of Yr)tn(cn);else tn(Yr)}wrapArrays(Yr){for(var tn=[],cn=0;cn<Yr.length;cn++){var mn=Yr[cn];Array.isArray(mn)?tn.push(Promise.all(mn)):tn.push(mn)}return tn}unwrapAsyncs(Yr){for(var tn=0;tn<Yr.length;tn++){var cn=Yr[tn];if(cn.asyncWrapper&&(Yr[tn]=cn.value),Array.isArray(cn))for(var mn=0;mn<cn.length;mn++){var Tn=cn[mn];Tn.asyncWrapper&&(cn[mn]=Tn.value)}}}static HALT={};HALT=yn.HALT;unifiedExec(Yr,tn){for(;;){try{var cn=this.unifiedEval(Yr,tn)}catch(mn){if(tn.meta.handlingFinally)console.error(" Exception in finally block: ",mn),cn=yn.HALT;else if(this.registerHyperTrace(tn,mn),tn.meta.errorHandler&&!tn.meta.handlingError){tn.meta.handlingError=!0,tn.locals[tn.meta.errorSymbol]=mn,Yr=tn.meta.errorHandler;continue}else tn.meta.currentException=mn,cn=yn.HALT}if(cn==null){console.error(Yr," did not return a next element to execute! context: ",tn);return}else if(cn.then){cn.then(mn=>{this.unifiedExec(mn,tn)}).catch(mn=>{this.unifiedExec({op:function(){throw mn}},tn)});return}else if(cn===yn.HALT)if(tn.meta.finallyHandler&&!tn.meta.handlingFinally)tn.meta.handlingFinally=!0,Yr=tn.meta.finallyHandler;else if(tn.meta.onHalt&&tn.meta.onHalt(),tn.meta.currentException)if(tn.meta.reject){tn.meta.reject(tn.meta.currentException);return}else throw tn.meta.currentException;else return;else Yr=cn}}unifiedEval(Yr,tn,cn){var mn=[tn],Tn=!1,hn=!1;if(Yr.args)for(var vn=0;vn<Yr.args.length;vn++){var ln=Yr.args[vn];if(ln==null)mn.push(null);else if(Array.isArray(ln)){for(var bn=[],wn=0;wn<ln.length;wn++){var Nn=ln[wn],Sn=Nn?Nn.evaluate(tn):null;Sn&&(Sn.then?Tn=!0:Sn.asyncWrapper&&(hn=!0)),bn.push(Sn)}mn.push(bn)}else if(ln.evaluate){var Sn=ln.evaluate(tn);if(Sn&&(Sn.then?Tn=!0:Sn.asyncWrapper&&(hn=!0)),mn.push(Sn),Sn){if(cn===!0)break}else if(cn===!1)break}else mn.push(ln)}return Tn?new Promise((On,An)=>{mn=this.wrapArrays(mn),Promise.all(mn).then(function(In){hn&&this.unwrapAsyncs(In);try{var Pn=Yr.op.apply(Yr,In);On(Pn)}catch(jn){An(jn)}}).catch(function(In){An(In)})}):(hn&&this.unwrapAsyncs(mn),Yr.op.apply(Yr,mn))}_scriptAttrs=null;getScriptAttributes(){return this._scriptAttrs==null&&(this._scriptAttrs=Jr.attributes.replace(/ /g,"").split(",")),this._scriptAttrs}getScript(Yr){for(var tn=0;tn<this.getScriptAttributes().length;tn++){var cn=this.getScriptAttributes()[tn];if(Yr.hasAttribute&&Yr.hasAttribute(cn))return Yr.getAttribute(cn)}return Yr instanceof HTMLScriptElement&&Yr.type==="text/hyperscript"?Yr.innerText:null}hyperscriptFeaturesMap=new WeakMap;getHyperscriptFeatures(Yr){var tn=this.hyperscriptFeaturesMap.get(Yr);return typeof tn>"u"&&Yr&&this.hyperscriptFeaturesMap.set(Yr,tn={}),tn}addFeatures(Yr,tn){Yr&&(Object.assign(tn.locals,this.getHyperscriptFeatures(Yr)),this.addFeatures(Yr.parentElement,tn))}makeContext(Yr,tn,cn,mn){return new Qn(Yr,tn,cn,mn,this)}getScriptSelector(){return this.getScriptAttributes().map(function(Yr){return"["+Yr+"]"}).join(", ")}convertValue(Yr,tn){for(var cn=Wr.dynamicResolvers,mn=0;mn<cn.length;mn++){var Tn=cn[mn],hn=Tn(tn,Yr);if(hn!==void 0)return hn}if(Yr==null)return null;var vn=Wr[tn];if(vn)return vn(Yr);throw"Unknown conversion : "+tn}parse(Yr){let tn=this.lexer,cn=this.parser;var mn=tn.tokenize(Yr);if(this.parser.commandStart(mn.currentToken())){var Tn=cn.requireElement("commandList",mn);return mn.hasMore()&&cn.raiseParseError(mn),cn.ensureTerminated(Tn),Tn}else if(cn.featureStart(mn.currentToken())){var hn=cn.requireElement("hyperscript",mn);return mn.hasMore()&&cn.raiseParseError(mn),hn}else{var vn=cn.requireElement("expression",mn);return mn.hasMore()&&cn.raiseParseError(mn),vn}}evaluateNoPromise(Yr,tn){let cn=Yr.evaluate(tn);if(cn.next)throw new Error(an.sourceFor.call(Yr)+" returned a Promise in a context that they are not allowed.");return cn}evaluate(Yr,tn,cn){class mn extends EventTarget{constructor(bn){super(),this.module=bn}toString(){return this.module.id}}var Tn="document"in Qr?Qr.document.body:new mn(cn&&cn.module);tn=Object.assign(this.makeContext(Tn,null,Tn,null),tn||{});var hn=this.parse(Yr);if(hn.execute)return hn.execute(tn),typeof tn.meta.returnValue<"u"?tn.meta.returnValue:tn.result;return hn.apply?(hn.apply(Tn,Tn,cn),this.getHyperscriptFeatures(Tn)):hn.evaluate(tn);function vn(){return{}}}processNode(Yr){var tn=this.getScriptSelector();this.matchesSelector(Yr,tn)&&this.initElement(Yr,Yr),Yr instanceof HTMLScriptElement&&Yr.type==="text/hyperscript"&&this.initElement(Yr,document.body),Yr.querySelectorAll&&this.forEach(Yr.querySelectorAll(tn+", [type='text/hyperscript']"),cn=>{this.initElement(cn,cn instanceof HTMLScriptElement&&cn.type==="text/hyperscript"?document.body:cn)})}initElement(Yr,tn){if(!(Yr.closest&&Yr.closest(Jr.disableSelector))){var cn=this.getInternalData(Yr);if(!cn.initialized){var mn=this.getScript(Yr);if(mn)try{cn.initialized=!0,cn.script=mn;let vn=this.lexer,ln=this.parser;var Tn=vn.tokenize(mn),hn=ln.parseHyperScript(Tn);if(!hn)return;hn.apply(tn||Yr,Yr),setTimeout(()=>{this.triggerEvent(tn||Yr,"load",{hyperscript:!0})},1)}catch(vn){this.triggerEvent(Yr,"exception",{error:vn}),console.error("hyperscript errors were found on the following element:",Yr,`

`,vn.message,vn.stack)}}}}internalDataMap=new WeakMap;getInternalData(Yr){var tn=this.internalDataMap.get(Yr);return typeof tn>"u"&&this.internalDataMap.set(Yr,tn={}),tn}typeCheck(Yr,tn,cn){if(Yr==null&&cn)return!0;var mn=Object.prototype.toString.call(Yr).slice(8,-1);return mn===tn}getElementScope(Yr){var tn=Yr.meta&&Yr.meta.owner;if(tn){var cn=this.getInternalData(tn),mn="elementScope";Yr.meta.feature&&Yr.meta.feature.behavior&&(mn=Yr.meta.feature.behavior+"Scope");var Tn=mi(cn,mn);return Tn}else return{}}isReservedWord(Yr){return["meta","it","result","locals","event","target","detail","sender","body"].includes(Yr)}isHyperscriptContext(Yr){return Yr instanceof Qn}resolveSymbol(Yr,tn,cn){if(Yr==="me"||Yr==="my"||Yr==="I")return tn.me;if(Yr==="it"||Yr==="its"||Yr==="result")return tn.result;if(Yr==="you"||Yr==="your"||Yr==="yourself")return tn.you;if(cn==="global")return Qr[Yr];if(cn==="element"){var mn=this.getElementScope(tn);return mn[Yr]}else{if(cn==="local")return tn.locals[Yr];if(tn.meta&&tn.meta.context){var Tn=tn.meta.context[Yr];if(typeof Tn<"u"||tn.meta.context.detail&&(Tn=tn.meta.context.detail[Yr],typeof Tn<"u"))return Tn}if(this.isHyperscriptContext(tn)&&!this.isReservedWord(Yr))var hn=tn.locals[Yr];else var hn=tn[Yr];if(typeof hn<"u")return hn;var mn=this.getElementScope(tn);return hn=mn[Yr],typeof hn<"u"?hn:Qr[Yr]}}setSymbol(Yr,tn,cn,mn){if(cn==="global")Qr[Yr]=mn;else if(cn==="element"){var Tn=this.getElementScope(tn);Tn[Yr]=mn}else if(cn==="local")tn.locals[Yr]=mn;else if(this.isHyperscriptContext(tn)&&!this.isReservedWord(Yr)&&typeof tn.locals[Yr]<"u")tn.locals[Yr]=mn;else{var Tn=this.getElementScope(tn),hn=Tn[Yr];typeof hn<"u"?Tn[Yr]=mn:this.isHyperscriptContext(tn)&&!this.isReservedWord(Yr)?tn.locals[Yr]=mn:tn[Yr]=mn}}findNext(Yr,tn){if(Yr)return Yr.resolveNext?Yr.resolveNext(tn):Yr.next?Yr.next:this.findNext(Yr.parent,tn)}flatGet(Yr,tn,cn){if(Yr!=null){var mn=cn(Yr,tn);if(typeof mn<"u")return mn;if(this.shouldAutoIterate(Yr)){var Tn=[];for(var hn of Yr){var vn=cn(hn,tn);Tn.push(vn)}return Tn}}}resolveProperty(Yr,tn){return this.flatGet(Yr,tn,(cn,mn)=>cn[mn])}resolveAttribute(Yr,tn){return this.flatGet(Yr,tn,(cn,mn)=>cn.getAttribute&&cn.getAttribute(mn))}resolveStyle(Yr,tn){return this.flatGet(Yr,tn,(cn,mn)=>cn.style&&cn.style[mn])}resolveComputedStyle(Yr,tn){return this.flatGet(Yr,tn,(cn,mn)=>getComputedStyle(cn).getPropertyValue(mn))}assignToNamespace(Yr,tn,cn,mn){let Tn;typeof document<"u"&&Yr===document.body?Tn=Qr:Tn=this.getHyperscriptFeatures(Yr);for(var hn;(hn=tn.shift())!==void 0;){var vn=Tn[hn];vn==null&&(vn={},Tn[hn]=vn),Tn=vn}Tn[cn]=mn}getHyperTrace(Yr,tn){for(var cn=[],mn=Yr;mn.meta.caller;)mn=mn.meta.caller;if(mn.meta.traceMap)return mn.meta.traceMap.get(tn,cn)}registerHyperTrace(Yr,tn){for(var cn=[],mn=null;Yr!=null;)cn.push(Yr),mn=Yr,Yr=Yr.meta.caller;if(mn.meta.traceMap==null&&(mn.meta.traceMap=new Map),!mn.meta.traceMap.get(tn)){var Tn={trace:cn,print:function(hn){hn=hn||console.error,hn("hypertrace /// ");for(var vn=0,ln=0;ln<cn.length;ln++)vn=Math.max(vn,cn[ln].meta.feature.displayName.length);for(var ln=0;ln<cn.length;ln++){var bn=cn[ln];hn("  ->",bn.meta.feature.displayName.padEnd(vn+2),"-",bn.meta.owner)}}};mn.meta.traceMap.set(tn,Tn)}}escapeSelector(Yr){return Yr.replace(/[:&()\[\]\/]/g,function(tn){return"\\"+tn})}nullCheck(Yr,tn){if(Yr==null)throw new Error("'"+tn.sourceFor()+"' is null")}isEmpty(Yr){return Yr==null||Yr.length===0}doesExist(Yr){if(Yr==null)return!1;if(this.shouldAutoIterate(Yr)){for(let tn of Yr)return!0;return!1}return!0}getRootNode(Yr){if(Yr&&Yr instanceof Node){var tn=Yr.getRootNode();if(tn instanceof Document||tn instanceof ShadowRoot)return tn}return document}getEventQueueFor(Yr,tn){let cn=this.getInternalData(Yr);var mn=cn.eventQueues;mn==null&&(mn=new Map,cn.eventQueues=mn);var Tn=mn.get(tn);return Tn==null&&(Tn={queue:[],executing:!1},mn.set(tn,Tn)),Tn}beepValueToConsole(Yr,tn,cn){if(this.triggerEvent(Yr,"hyperscript:beep",{element:Yr,expression:tn,value:cn})){var mn;cn?cn instanceof Bn?mn="ElementCollection":cn.constructor?mn=cn.constructor.name:mn="unknown":mn="object (null)";var Tn=cn;mn==="String"?Tn='"'+Tn+'"':cn instanceof Bn&&(Tn=Array.from(cn)),console.log("///_ BEEP! The expression ("+an.sourceFor.call(tn).replace("beep! ","")+") evaluates to:",Tn,"of type "+mn)}}hyperscriptUrl="document"in Qr&&document.currentScript?document.currentScript.src:null}function Cn(){return document.cookie.split("; ").map(Yr=>{let tn=Yr.split("=");return{name:tn[0],value:decodeURIComponent(tn[1])}})}function Rn(gn){document.cookie=gn+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}function Un(){for(let gn of Cn())Rn(gn.name)}let Hn=new Proxy({},{get(gn,Yr){if(Yr==="then"||Yr==="asyncWrapper")return null;if(Yr==="length")return Cn().length;if(Yr==="clear")return Rn;if(Yr==="clearAll")return Un;if(typeof Yr=="string")if(isNaN(Yr)){let tn=document.cookie.split("; ").find(cn=>cn.startsWith(Yr+"="))?.split("=")[1];if(tn)return decodeURIComponent(tn)}else return Cn()[parseInt(Yr)];else if(Yr===Symbol.iterator)return Cn()[Yr]},set(gn,Yr,tn){var cn=null;return typeof tn=="string"?(cn=encodeURIComponent(tn),cn+=";samesite=lax"):(cn=encodeURIComponent(tn.value),tn.expires&&(cn+=";expires="+tn.maxAge),tn.maxAge&&(cn+=";max-age="+tn.maxAge),tn.partitioned&&(cn+=";partitioned="+tn.partitioned),tn.path&&(cn+=";path="+tn.path),tn.samesite&&(cn+=";samesite="+tn.path),tn.secure&&(cn+=";secure="+tn.path)),document.cookie=Yr+"="+cn,!0}});class Qn{constructor(Yr,tn,cn,mn,Tn){this.meta={parser:Tn.parser,lexer:Tn.lexer,runtime:Tn,owner:Yr,feature:tn,iterators:{},ctx:this},this.locals={cookies:Hn},this.me=cn,this.you=void 0,this.result=void 0,this.event=mn,this.target=mn?mn.target:null,this.detail=mn?mn.detail:null,this.sender=mn&&mn.detail?mn.detail.sender:null,this.body="document"in Qr?document.body:null,Tn.addFeatures(Yr,this)}}class Bn{constructor(Yr,tn,cn){this._css=Yr,this.relativeToElement=tn,this.escape=cn,this[Zn]=!0}get css(){return this.escape?yn.prototype.escapeSelector(this._css):this._css}get className(){return this._css.substr(1)}get id(){return this.className()}contains(Yr){for(let tn of this)if(tn.contains(Yr))return!0;return!1}get length(){return this.selectMatches().length}[Symbol.iterator](){return this.selectMatches()[Symbol.iterator]()}selectMatches(){return yn.prototype.getRootNode(this.relativeToElement).querySelectorAll(this.css)}}let Zn=Symbol();function mi(gn,Yr){var tn=gn[Yr];if(tn)return tn;var cn={};return gn[Yr]=cn,cn}function ai(gn){try{return JSON.parse(gn)}catch(Yr){return hi(Yr),null}}function hi(gn){console.error?console.error(gn):console.log&&console.log("ERROR: ",gn)}function vi(gn,Yr){return new(gn.bind.apply(gn,[gn].concat(Yr)))}function gi(gn){gn.addLeafExpression("parenthesized",function(en,rn,Gr){if(Gr.matchOpToken("(")){var Zr=Gr.clearFollows();try{var sn=en.requireElement("expression",Gr)}finally{Gr.restoreFollows(Zr)}return Gr.requireOpToken(")"),sn}}),gn.addLeafExpression("string",function(en,rn,Gr){var Zr=Gr.matchTokenType("STRING");if(Zr){var sn=Zr.value,nn;if(Zr.template){var un=Kr.tokenize(sn,!0);nn=en.parseStringTemplate(un)}else nn=[];return{type:"string",token:Zr,args:nn,op:function(on){for(var fn="",pn=1;pn<arguments.length;pn++){var dn=arguments[pn];dn!==void 0&&(fn+=dn)}return fn},evaluate:function(on){return nn.length===0?sn:rn.unifiedEval(this,on)}}}}),gn.addGrammarElement("nakedString",function(en,rn,Gr){if(Gr.hasMore()){var Zr=Gr.consumeUntilWhitespace();return Gr.matchTokenType("WHITESPACE"),{type:"nakedString",tokens:Zr,evaluate:function(sn){return Zr.map(function(nn){return nn.value}).join("")}}}}),gn.addLeafExpression("number",function(en,rn,Gr){var Zr=Gr.matchTokenType("NUMBER");if(Zr){var sn=Zr,nn=parseFloat(Zr.value);return{type:"number",value:nn,numberToken:sn,evaluate:function(){return nn}}}}),gn.addLeafExpression("idRef",function(en,rn,Gr){var Zr=Gr.matchTokenType("ID_REF");if(Zr&&Zr.value)if(Zr.template){var sn=Zr.value.substring(2),nn=Kr.tokenize(sn),un=en.requireElement("expression",nn);return{type:"idRefTemplate",args:[un],op:function(on,fn){return rn.getRootNode(on.me).getElementById(fn)},evaluate:function(on){return rn.unifiedEval(this,on)}}}else{let on=Zr.value.substring(1);return{type:"idRef",css:Zr.value,value:on,evaluate:function(fn){return rn.getRootNode(fn.me).getElementById(on)}}}}),gn.addLeafExpression("classRef",function(en,rn,Gr){var Zr=Gr.matchTokenType("CLASS_REF");if(Zr&&Zr.value)if(Zr.template){var sn=Zr.value.substring(2),nn=Kr.tokenize(sn),un=en.requireElement("expression",nn);return{type:"classRefTemplate",args:[un],op:function(on,fn){return new Bn("."+fn,on.me,!0)},evaluate:function(on){return rn.unifiedEval(this,on)}}}else{let on=Zr.value;return{type:"classRef",css:on,evaluate:function(fn){return new Bn(on,fn.me,!0)}}}});class Yr extends Bn{constructor(rn,Gr,Zr){super(rn,Gr),this.templateParts=Zr,this.elements=Zr.filter(sn=>sn instanceof Element)}get css(){let rn="",Gr=0;for(let Zr of this.templateParts)Zr instanceof Element?rn+="[data-hs-query-id='"+Gr+++"']":rn+=Zr;return rn}[Symbol.iterator](){this.elements.forEach((Gr,Zr)=>Gr.dataset.hsQueryId=Zr);let rn=super[Symbol.iterator]();return this.elements.forEach(Gr=>Gr.removeAttribute("data-hs-query-id")),rn}}gn.addLeafExpression("queryRef",function(en,rn,Gr){var Zr=Gr.matchOpToken("<");if(Zr){var sn=Gr.consumeUntil("/");Gr.requireOpToken("/"),Gr.requireOpToken(">");var nn=sn.map(function(pn){return pn.type==="STRING"?'"'+pn.value+'"':pn.value}).join(""),un,on,fn;return/\$[^=]/.test(nn)&&(un=!0,on=Kr.tokenize(nn,!0),fn=en.parseStringTemplate(on)),{type:"queryRef",css:nn,args:fn,op:function(pn,...dn){return un?new Yr(nn,pn.me,dn):new Bn(nn,pn.me)},evaluate:function(pn){return rn.unifiedEval(this,pn)}}}}),gn.addLeafExpression("attributeRef",function(en,rn,Gr){var Zr=Gr.matchTokenType("ATTRIBUTE_REF");if(Zr&&Zr.value){var sn=Zr.value;if(sn.indexOf("[")===0)var nn=sn.substring(2,sn.length-1);else var nn=sn.substring(1);var un="["+nn+"]",on=nn.split("="),fn=on[0],pn=on[1];return pn&&pn.indexOf('"')===0&&(pn=pn.substring(1,pn.length-1)),{type:"attributeRef",name:fn,css:un,value:pn,op:function(dn){var qn=dn.you||dn.me;if(qn)return qn.getAttribute(fn)},evaluate:function(dn){return rn.unifiedEval(this,dn)}}}}),gn.addLeafExpression("styleRef",function(en,rn,Gr){var Zr=Gr.matchTokenType("STYLE_REF");if(Zr&&Zr.value){var sn=Zr.value.substr(1);return sn.startsWith("computed-")?(sn=sn.substr(9),{type:"computedStyleRef",name:sn,op:function(nn){var un=nn.you||nn.me;if(un)return rn.resolveComputedStyle(un,sn)},evaluate:function(nn){return rn.unifiedEval(this,nn)}}):{type:"styleRef",name:sn,op:function(nn){var un=nn.you||nn.me;if(un)return rn.resolveStyle(un,sn)},evaluate:function(nn){return rn.unifiedEval(this,nn)}}}}),gn.addGrammarElement("objectKey",function(en,rn,Gr){var Zr;if(Zr=Gr.matchTokenType("STRING"))return{type:"objectKey",key:Zr.value,evaluate:function(){return Zr.value}};if(Gr.matchOpToken("[")){var sn=en.parseElement("expression",Gr);return Gr.requireOpToken("]"),{type:"objectKey",expr:sn,args:[sn],op:function(un,on){return on},evaluate:function(un){return rn.unifiedEval(this,un)}}}else{var nn="";do Zr=Gr.matchTokenType("IDENTIFIER")||Gr.matchOpToken("-"),Zr&&(nn+=Zr.value);while(Zr);return{type:"objectKey",key:nn,evaluate:function(){return nn}}}}),gn.addLeafExpression("objectLiteral",function(en,rn,Gr){if(Gr.matchOpToken("{")){var Zr=[],sn=[];if(!Gr.matchOpToken("}")){do{var nn=en.requireElement("objectKey",Gr);Gr.requireOpToken(":");var un=en.requireElement("expression",Gr);sn.push(un),Zr.push(nn)}while(Gr.matchOpToken(",")&&!Gr.peekToken("}",0,"R_BRACE"));Gr.requireOpToken("}")}return{type:"objectLiteral",args:[Zr,sn],op:function(on,fn,pn){for(var dn={},qn=0;qn<fn.length;qn++)dn[fn[qn]]=pn[qn];return dn},evaluate:function(on){return rn.unifiedEval(this,on)}}}}),gn.addGrammarElement("nakedNamedArgumentList",function(en,rn,Gr){var Zr=[],sn=[];if(Gr.currentToken().type==="IDENTIFIER")do{var nn=Gr.requireTokenType("IDENTIFIER");Gr.requireOpToken(":");var un=en.requireElement("expression",Gr);sn.push(un),Zr.push({name:nn,value:un})}while(Gr.matchOpToken(","));return{type:"namedArgumentList",fields:Zr,args:[sn],op:function(on,fn){for(var pn={_namedArgList_:!0},dn=0;dn<fn.length;dn++){var qn=Zr[dn];pn[qn.name.value]=fn[dn]}return pn},evaluate:function(on){return rn.unifiedEval(this,on)}}}),gn.addGrammarElement("namedArgumentList",function(en,rn,Gr){if(Gr.matchOpToken("(")){var Zr=en.requireElement("nakedNamedArgumentList",Gr);return Gr.requireOpToken(")"),Zr}}),gn.addGrammarElement("symbol",function(en,rn,Gr){var Zr="default";Gr.matchToken("global")?Zr="global":Gr.matchToken("element")||Gr.matchToken("module")?(Zr="element",Gr.matchOpToken("'")&&Gr.requireToken("s")):Gr.matchToken("local")&&(Zr="local");let sn=Gr.matchOpToken(":"),nn=Gr.matchTokenType("IDENTIFIER");if(nn&&nn.value){var un=nn.value;return sn&&(un=":"+un),Zr==="default"&&(un.indexOf("$")===0&&(Zr="global"),un.indexOf(":")===0&&(Zr="element")),{type:"symbol",token:nn,scope:Zr,name:un,evaluate:function(on){return rn.resolveSymbol(un,on,Zr)}}}}),gn.addGrammarElement("implicitMeTarget",function(en,rn,Gr){return{type:"implicitMeTarget",evaluate:function(Zr){return Zr.you||Zr.me}}}),gn.addLeafExpression("boolean",function(en,rn,Gr){var Zr=Gr.matchToken("true")||Gr.matchToken("false");if(!Zr)return;let sn=Zr.value==="true";return{type:"boolean",evaluate:function(nn){return sn}}}),gn.addLeafExpression("null",function(en,rn,Gr){if(Gr.matchToken("null"))return{type:"null",evaluate:function(Zr){return null}}}),gn.addLeafExpression("arrayLiteral",function(en,rn,Gr){if(Gr.matchOpToken("[")){var Zr=[];if(!Gr.matchOpToken("]")){do{var sn=en.requireElement("expression",Gr);Zr.push(sn)}while(Gr.matchOpToken(","));Gr.requireOpToken("]")}return{type:"arrayLiteral",values:Zr,args:[Zr],op:function(nn,un){return un},evaluate:function(nn){return rn.unifiedEval(this,nn)}}}}),gn.addLeafExpression("blockLiteral",function(en,rn,Gr){if(Gr.matchOpToken("\\")){var Zr=[],sn=Gr.matchTokenType("IDENTIFIER");if(sn)for(Zr.push(sn);Gr.matchOpToken(",");)Zr.push(Gr.requireTokenType("IDENTIFIER"));Gr.requireOpToken("-"),Gr.requireOpToken(">");var nn=en.requireElement("expression",Gr);return{type:"blockLiteral",args:Zr,expr:nn,evaluate:function(un){var on=function(){for(var fn=0;fn<Zr.length;fn++)un.locals[Zr[fn].value]=arguments[fn];return nn.evaluate(un)};return on}}}}),gn.addIndirectExpression("propertyAccess",function(en,rn,Gr,Zr){if(Gr.matchOpToken(".")){var sn=Gr.requireTokenType("IDENTIFIER"),nn={type:"propertyAccess",root:Zr,prop:sn,args:[Zr],op:function(un,on){var fn=rn.resolveProperty(on,sn.value);return fn},evaluate:function(un){return rn.unifiedEval(this,un)}};return en.parseElement("indirectExpression",Gr,nn)}}),gn.addIndirectExpression("of",function(en,rn,Gr,Zr){if(Gr.matchToken("of")){for(var sn=en.requireElement("unaryExpression",Gr),nn=null,un=Zr;un.root;)nn=un,un=un.root;un.type!=="symbol"&&un.type!=="attributeRef"&&un.type!=="styleRef"&&un.type!=="computedStyleRef"&&en.raiseParseError(Gr,"Cannot take a property of a non-symbol: "+un.type);var on=un.type==="attributeRef",fn=un.type==="styleRef"||un.type==="computedStyleRef";if(on||fn)var pn=un;var dn=un.name,qn={type:"ofExpression",prop:un.token,root:sn,attribute:pn,expression:Zr,args:[sn],op:function(Fn,xn){return on?rn.resolveAttribute(xn,dn):fn?un.type==="computedStyleRef"?rn.resolveComputedStyle(xn,dn):rn.resolveStyle(xn,dn):rn.resolveProperty(xn,dn)},evaluate:function(Fn){return rn.unifiedEval(this,Fn)}};return un.type==="attributeRef"&&(qn.attribute=un),nn?(nn.root=qn,nn.args=[qn]):Zr=qn,en.parseElement("indirectExpression",Gr,Zr)}}),gn.addIndirectExpression("possessive",function(en,rn,Gr,Zr){if(!en.possessivesDisabled){var sn=Gr.matchOpToken("'");if(sn||Zr.type==="symbol"&&(Zr.name==="my"||Zr.name==="its"||Zr.name==="your")&&(Gr.currentToken().type==="IDENTIFIER"||Gr.currentToken().type==="ATTRIBUTE_REF"||Gr.currentToken().type==="STYLE_REF")){sn&&Gr.requireToken("s");var nn,un,on;nn=en.parseElement("attributeRef",Gr),nn==null&&(un=en.parseElement("styleRef",Gr),un==null&&(on=Gr.requireTokenType("IDENTIFIER")));var fn={type:"possessive",root:Zr,attribute:nn||un,prop:on,args:[Zr],op:function(pn,dn){if(nn)var qn=rn.resolveAttribute(dn,nn.name);else if(un){var qn;un.type==="computedStyleRef"?qn=rn.resolveComputedStyle(dn,un.name):qn=rn.resolveStyle(dn,un.name)}else var qn=rn.resolveProperty(dn,on.value);return qn},evaluate:function(pn){return rn.unifiedEval(this,pn)}};return en.parseElement("indirectExpression",Gr,fn)}}}),gn.addIndirectExpression("inExpression",function(en,rn,Gr,Zr){if(Gr.matchToken("in")){var sn=en.requireElement("unaryExpression",Gr),nn={type:"inExpression",root:Zr,args:[Zr,sn],op:function(un,on,fn){var pn=[];if(on.css)rn.implicitLoop(fn,function(qn){for(var Fn=qn.querySelectorAll(on.css),xn=0;xn<Fn.length;xn++)pn.push(Fn[xn])});else if(on instanceof Element){var dn=!1;if(rn.implicitLoop(fn,function(qn){qn.contains(on)&&(dn=!0)}),dn)return on}else rn.implicitLoop(on,function(qn){rn.implicitLoop(fn,function(Fn){qn===Fn&&pn.push(qn)})});return pn},evaluate:function(un){return rn.unifiedEval(this,un)}};return en.parseElement("indirectExpression",Gr,nn)}}),gn.addIndirectExpression("asExpression",function(en,rn,Gr,Zr){if(Gr.matchToken("as")){Gr.matchToken("a")||Gr.matchToken("an");var sn=en.requireElement("dotOrColonPath",Gr).evaluate(),nn={type:"asExpression",root:Zr,args:[Zr],op:function(un,on){return rn.convertValue(on,sn)},evaluate:function(un){return rn.unifiedEval(this,un)}};return en.parseElement("indirectExpression",Gr,nn)}}),gn.addIndirectExpression("functionCall",function(en,rn,Gr,Zr){if(Gr.matchOpToken("(")){var sn=[];if(!Gr.matchOpToken(")")){do sn.push(en.requireElement("expression",Gr));while(Gr.matchOpToken(","));Gr.requireOpToken(")")}if(Zr.root)var nn={type:"functionCall",root:Zr,argExressions:sn,args:[Zr.root,sn],op:function(un,on,fn){rn.nullCheck(on,Zr.root);var pn=on[Zr.prop.value];return rn.nullCheck(pn,Zr),pn.hyperfunc&&fn.push(un),pn.apply(on,fn)},evaluate:function(un){return rn.unifiedEval(this,un)}};else var nn={type:"functionCall",root:Zr,argExressions:sn,args:[Zr,sn],op:function(on,fn,pn){rn.nullCheck(fn,Zr),fn.hyperfunc&&pn.push(on);var dn=fn.apply(null,pn);return dn},evaluate:function(on){return rn.unifiedEval(this,on)}};return en.parseElement("indirectExpression",Gr,nn)}}),gn.addIndirectExpression("attributeRefAccess",function(en,rn,Gr,Zr){var sn=en.parseElement("attributeRef",Gr);if(sn){var nn={type:"attributeRefAccess",root:Zr,attribute:sn,args:[Zr],op:function(un,on){var fn=rn.resolveAttribute(on,sn.name);return fn},evaluate:function(un){return rn.unifiedEval(this,un)}};return nn}}),gn.addIndirectExpression("arrayIndex",function(en,rn,Gr,Zr){if(Gr.matchOpToken("[")){var sn=!1,nn=!1,un=null,on=null;if(Gr.matchOpToken(".."))sn=!0,un=en.requireElement("expression",Gr);else if(un=en.requireElement("expression",Gr),Gr.matchOpToken("..")){nn=!0;var fn=Gr.currentToken();fn.type!=="R_BRACKET"&&(on=en.parseElement("expression",Gr))}Gr.requireOpToken("]");var pn={type:"arrayIndex",root:Zr,prop:un,firstIndex:un,secondIndex:on,args:[Zr,un,on],op:function(dn,qn,Fn,xn){return qn==null?null:sn?(Fn<0&&(Fn=qn.length+Fn),qn.slice(0,Fn+1)):nn?xn!=null?(xn<0&&(xn=qn.length+xn),qn.slice(Fn,xn+1)):qn.slice(Fn):qn[Fn]},evaluate:function(dn){return rn.unifiedEval(this,dn)}};return en.parseElement("indirectExpression",Gr,pn)}});var tn=["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","pc","pt","px"];gn.addGrammarElement("postfixExpression",function(en,rn,Gr){var Zr=en.parseElement("negativeNumber",Gr);let sn=Gr.matchAnyToken.apply(Gr,tn)||Gr.matchOpToken("%");if(sn)return{type:"stringPostfix",postfix:sn.value,args:[Zr],op:function(fn,pn){return""+pn+sn.value},evaluate:function(fn){return rn.unifiedEval(this,fn)}};var nn=null;if(Gr.matchToken("s")||Gr.matchToken("seconds")?nn=1e3:(Gr.matchToken("ms")||Gr.matchToken("milliseconds"))&&(nn=1),nn)return{type:"timeExpression",time:Zr,factor:nn,args:[Zr],op:function(fn,pn){return pn*nn},evaluate:function(fn){return rn.unifiedEval(this,fn)}};if(Gr.matchOpToken(":")){var un=Gr.requireTokenType("IDENTIFIER");if(!un.value)return;var on=!Gr.matchOpToken("!");return{type:"typeCheck",typeName:un,nullOk:on,args:[Zr],op:function(fn,pn){var dn=rn.typeCheck(pn,this.typeName.value,on);if(dn)return pn;throw new Error("Typecheck failed!  Expected: "+un.value)},evaluate:function(fn){return rn.unifiedEval(this,fn)}}}else return Zr}),gn.addGrammarElement("logicalNot",function(en,rn,Gr){if(Gr.matchToken("not")){var Zr=en.requireElement("unaryExpression",Gr);return{type:"logicalNot",root:Zr,args:[Zr],op:function(sn,nn){return!nn},evaluate:function(sn){return rn.unifiedEval(this,sn)}}}}),gn.addGrammarElement("noExpression",function(en,rn,Gr){if(Gr.matchToken("no")){var Zr=en.requireElement("unaryExpression",Gr);return{type:"noExpression",root:Zr,args:[Zr],op:function(sn,nn){return rn.isEmpty(nn)},evaluate:function(sn){return rn.unifiedEval(this,sn)}}}}),gn.addLeafExpression("some",function(en,rn,Gr){if(Gr.matchToken("some")){var Zr=en.requireElement("expression",Gr);return{type:"noExpression",root:Zr,args:[Zr],op:function(sn,nn){return!rn.isEmpty(nn)},evaluate(sn){return rn.unifiedEval(this,sn)}}}}),gn.addGrammarElement("negativeNumber",function(en,rn,Gr){if(Gr.matchOpToken("-")){var Zr=en.requireElement("negativeNumber",Gr);return{type:"negativeNumber",root:Zr,args:[Zr],op:function(sn,nn){return-1*nn},evaluate:function(sn){return rn.unifiedEval(this,sn)}}}else return en.requireElement("primaryExpression",Gr)}),gn.addGrammarElement("unaryExpression",function(en,rn,Gr){return Gr.matchToken("the"),en.parseAnyOf(["beepExpression","logicalNot","relativePositionalExpression","positionalExpression","noExpression","postfixExpression"],Gr)}),gn.addGrammarElement("beepExpression",function(en,rn,Gr){if(Gr.matchToken("beep!")){var Zr=en.parseElement("unaryExpression",Gr);if(Zr){Zr.booped=!0;var sn=Zr.evaluate;return Zr.evaluate=function(nn){let un=sn.apply(Zr,arguments),on=nn.me;return rn.beepValueToConsole(on,Zr,un),un},Zr}}});var cn=function(en,rn,Gr,Zr){for(var sn=rn.querySelectorAll(Gr),nn=0;nn<sn.length;nn++){var un=sn[nn];if(un.compareDocumentPosition(en)===Node.DOCUMENT_POSITION_PRECEDING)return un}if(Zr)return sn[0]},mn=function(en,rn,Gr,Zr){for(var sn=rn.querySelectorAll(Gr),nn=sn.length-1;nn>=0;nn--){var un=sn[nn];if(un.compareDocumentPosition(en)===Node.DOCUMENT_POSITION_FOLLOWING)return un}if(Zr)return sn[sn.length-1]},Tn=function(en,rn,Gr,Zr){var sn=[];yn.prototype.forEach(rn,function(fn){(fn.matches(Gr)||fn===en)&&sn.push(fn)});for(var nn=0;nn<sn.length-1;nn++){var un=sn[nn];if(un===en)return sn[nn+1]}if(Zr){var on=sn[0];if(on&&on.matches(Gr))return on}},hn=function(en,rn,Gr,Zr){return Tn(en,Array.from(rn).reverse(),Gr,Zr)};gn.addGrammarElement("relativePositionalExpression",function(en,rn,Gr){var Zr=Gr.matchAnyToken("next","previous");if(Zr){var sn=Zr.value==="next",nn=en.parseElement("expression",Gr);if(Gr.matchToken("from")){Gr.pushFollow("in");try{var un=en.requireElement("unaryExpression",Gr)}finally{Gr.popFollow()}}else var un=en.requireElement("implicitMeTarget",Gr);var on=!1,fn;if(Gr.matchToken("in")){on=!0;var pn=en.requireElement("unaryExpression",Gr)}else Gr.matchToken("within")?fn=en.requireElement("unaryExpression",Gr):fn=document.body;var dn=!1;return Gr.matchToken("with")&&(Gr.requireToken("wrapping"),dn=!0),{type:"relativePositionalExpression",from:un,forwardSearch:sn,inSearch:on,wrapping:dn,inElt:pn,withinElt:fn,operator:Zr.value,args:[nn,un,pn,fn],op:function(qn,Fn,xn,kn,Mn){var Ln=Fn.css;if(Ln==null)throw"Expected a CSS value to be returned by "+an.sourceFor.apply(nn);if(on){if(kn)return sn?Tn(xn,kn,Ln,dn):hn(xn,kn,Ln,dn)}else if(Mn)return sn?cn(xn,Mn,Ln,dn):mn(xn,Mn,Ln,dn)},evaluate:function(qn){return rn.unifiedEval(this,qn)}}}}),gn.addGrammarElement("positionalExpression",function(en,rn,Gr){var Zr=Gr.matchAnyToken("first","last","random");if(!Zr)return;Gr.matchAnyToken("in","from","of");var sn=en.requireElement("unaryExpression",Gr);let nn=Zr.value;return{type:"positionalExpression",rhs:sn,operator:Zr.value,args:[sn],op:function(un,on){if(on&&!Array.isArray(on)&&(on.children?on=on.children:on=Array.from(on)),on){if(nn==="first")return on[0];if(nn==="last")return on[on.length-1];if(nn==="random")return on[Math.floor(Math.random()*on.length)]}},evaluate:function(un){return rn.unifiedEval(this,un)}}}),gn.addGrammarElement("mathOperator",function(en,rn,Gr){var Zr=en.parseElement("unaryExpression",Gr),sn,nn=null;for(sn=Gr.matchAnyOpToken("+","-","*","/")||Gr.matchToken("mod");sn;){nn=nn||sn;var un=sn.value;nn.value!==un&&en.raiseParseError(Gr,"You must parenthesize math operations with different operators");var on=en.parseElement("unaryExpression",Gr);Zr={type:"mathOperator",lhs:Zr,rhs:on,operator:un,args:[Zr,on],op:function(fn,pn,dn){if(un==="+")return pn+dn;if(un==="-")return pn-dn;if(un==="*")return pn*dn;if(un==="/")return pn/dn;if(un==="mod")return pn%dn},evaluate:function(fn){return rn.unifiedEval(this,fn)}},sn=Gr.matchAnyOpToken("+","-","*","/")||Gr.matchToken("mod")}return Zr}),gn.addGrammarElement("mathExpression",function(en,rn,Gr){return en.parseAnyOf(["mathOperator","unaryExpression"],Gr)});function vn(en,rn,Gr){if(rn.contains)return rn.contains(Gr);if(rn.includes)return rn.includes(Gr);throw Error("The value of "+en.sourceFor()+" does not have a contains or includes method on it")}function ln(en,rn,Gr){if(rn.match)return!!rn.match(Gr);if(rn.matches)return rn.matches(Gr);throw Error("The value of "+en.sourceFor()+" does not have a match or matches method on it")}gn.addGrammarElement("comparisonOperator",function(en,rn,Gr){var Zr=en.parseElement("mathExpression",Gr),sn=Gr.matchAnyOpToken("<",">","<=",">=","==","===","!=","!=="),nn=sn?sn.value:null,un=!0,on=!1;if(nn==null&&(Gr.matchToken("is")||Gr.matchToken("am")?Gr.matchToken("not")?Gr.matchToken("in")?nn="not in":Gr.matchToken("a")||Gr.matchToken("an")?(nn="not a",on=!0):Gr.matchToken("empty")?(nn="not empty",un=!1):(Gr.matchToken("really")?nn="!==":nn="!=",Gr.matchToken("equal")&&Gr.matchToken("to")):Gr.matchToken("in")?nn="in":Gr.matchToken("a")||Gr.matchToken("an")?(nn="a",on=!0):Gr.matchToken("empty")?(nn="empty",un=!1):Gr.matchToken("less")?(Gr.requireToken("than"),Gr.matchToken("or")?(Gr.requireToken("equal"),Gr.requireToken("to"),nn="<="):nn="<"):Gr.matchToken("greater")?(Gr.requireToken("than"),Gr.matchToken("or")?(Gr.requireToken("equal"),Gr.requireToken("to"),nn=">="):nn=">"):(Gr.matchToken("really")?nn="===":nn="==",Gr.matchToken("equal")&&Gr.matchToken("to")):Gr.matchToken("equals")?nn="==":Gr.matchToken("really")?(Gr.requireToken("equals"),nn="==="):Gr.matchToken("exist")||Gr.matchToken("exists")?(nn="exist",un=!1):Gr.matchToken("matches")||Gr.matchToken("match")?nn="match":Gr.matchToken("contains")||Gr.matchToken("contain")?nn="contain":Gr.matchToken("includes")||Gr.matchToken("include")?nn="include":(Gr.matchToken("do")||Gr.matchToken("does"))&&(Gr.requireToken("not"),Gr.matchToken("matches")||Gr.matchToken("match")?nn="not match":Gr.matchToken("contains")||Gr.matchToken("contain")?nn="not contain":Gr.matchToken("exist")||Gr.matchToken("exist")?(nn="not exist",un=!1):Gr.matchToken("include")?nn="not include":en.raiseParseError(Gr,"Expected matches or contains"))),nn){var fn,pn,dn;on?(fn=Gr.requireTokenType("IDENTIFIER"),pn=!Gr.matchOpToken("!")):un&&(dn=en.requireElement("mathExpression",Gr),(nn==="match"||nn==="not match")&&(dn=dn.css?dn.css:dn));var qn=Zr;Zr={type:"comparisonOperator",operator:nn,typeName:fn,nullOk:pn,lhs:Zr,rhs:dn,args:[Zr,dn],op:function(Fn,xn,kn){if(nn==="==")return xn==kn;if(nn==="!=")return xn!=kn;if(nn==="===")return xn===kn;if(nn==="!==")return xn!==kn;if(nn==="match")return xn!=null&&ln(qn,xn,kn);if(nn==="not match")return xn==null||!ln(qn,xn,kn);if(nn==="in")return kn!=null&&vn(dn,kn,xn);if(nn==="not in")return kn==null||!vn(dn,kn,xn);if(nn==="contain")return xn!=null&&vn(qn,xn,kn);if(nn==="not contain")return xn==null||!vn(qn,xn,kn);if(nn==="include")return xn!=null&&vn(qn,xn,kn);if(nn==="not include")return xn==null||!vn(qn,xn,kn);if(nn==="===")return xn===kn;if(nn==="!==")return xn!==kn;if(nn==="<")return xn<kn;if(nn===">")return xn>kn;if(nn==="<=")return xn<=kn;if(nn===">=")return xn>=kn;if(nn==="empty")return rn.isEmpty(xn);if(nn==="not empty")return!rn.isEmpty(xn);if(nn==="exist")return rn.doesExist(xn);if(nn==="not exist")return!rn.doesExist(xn);if(nn==="a")return rn.typeCheck(xn,fn.value,pn);if(nn==="not a")return!rn.typeCheck(xn,fn.value,pn);throw"Unknown comparison : "+nn},evaluate:function(Fn){return rn.unifiedEval(this,Fn)}}}return Zr}),gn.addGrammarElement("comparisonExpression",function(en,rn,Gr){return en.parseAnyOf(["comparisonOperator","mathExpression"],Gr)}),gn.addGrammarElement("logicalOperator",function(en,rn,Gr){var Zr=en.parseElement("comparisonExpression",Gr),sn,nn=null;for(sn=Gr.matchToken("and")||Gr.matchToken("or");sn;){nn=nn||sn,nn.value!==sn.value&&en.raiseParseError(Gr,"You must parenthesize logical operations with different operators");var un=en.requireElement("comparisonExpression",Gr);let on=sn.value;Zr={type:"logicalOperator",operator:on,lhs:Zr,rhs:un,args:[Zr,un],op:function(fn,pn,dn){return on==="and"?pn&&dn:pn||dn},evaluate:function(fn){return rn.unifiedEval(this,fn,on==="or")}},sn=Gr.matchToken("and")||Gr.matchToken("or")}return Zr}),gn.addGrammarElement("logicalExpression",function(en,rn,Gr){return en.parseAnyOf(["logicalOperator","mathExpression"],Gr)}),gn.addGrammarElement("asyncExpression",function(en,rn,Gr){if(Gr.matchToken("async")){var Zr=en.requireElement("logicalExpression",Gr),sn={type:"asyncExpression",value:Zr,evaluate:function(nn){return{asyncWrapper:!0,value:this.value.evaluate(nn)}}};return sn}else return en.parseElement("logicalExpression",Gr)}),gn.addGrammarElement("expression",function(en,rn,Gr){return Gr.matchToken("the"),en.parseElement("asyncExpression",Gr)}),gn.addGrammarElement("assignableExpression",function(en,rn,Gr){Gr.matchToken("the");var Zr=en.parseElement("primaryExpression",Gr);return Zr&&(Zr.type==="symbol"||Zr.type==="ofExpression"||Zr.type==="propertyAccess"||Zr.type==="attributeRefAccess"||Zr.type==="attributeRef"||Zr.type==="styleRef"||Zr.type==="arrayIndex"||Zr.type==="possessive")||en.raiseParseError(Gr,"A target expression must be writable.  The expression type '"+(Zr&&Zr.type)+"' is not."),Zr}),gn.addGrammarElement("hyperscript",function(en,rn,Gr){var Zr=[];if(Gr.hasMore())for(;en.featureStart(Gr.currentToken())||Gr.currentToken().value==="(";){var sn=en.requireElement("feature",Gr);Zr.push(sn),Gr.matchToken("end")}return{type:"hyperscript",features:Zr,apply:function(nn,un,on){for(let fn of Zr)fn.install(nn,un,on)}}});var bn=function(en){var rn=[];if(en.token(0).value==="("&&(en.token(1).value===")"||en.token(2).value===","||en.token(2).value===")")){en.matchOpToken("(");do rn.push(en.requireTokenType("IDENTIFIER"));while(en.matchOpToken(","));en.requireOpToken(")")}return rn};gn.addFeature("on",function(en,rn,Gr){if(Gr.matchToken("on")){var Zr=!1;Gr.matchToken("every")&&(Zr=!0);var sn=[],nn=null;do{var un=en.requireElement("eventName",Gr,"Expected event name"),on=un.evaluate();nn?nn=nn+" or "+on:nn="on "+on;var fn=bn(Gr),pn=null;Gr.matchOpToken("[")&&(pn=en.requireElement("expression",Gr),Gr.requireOpToken("]"));var dn,qn,Fn;if(Gr.currentToken().type==="NUMBER"){var xn=Gr.consumeToken();if(!xn.value)return;if(dn=parseInt(xn.value),Gr.matchToken("to")){var kn=Gr.consumeToken();if(!kn.value)return;qn=parseInt(kn.value)}else Gr.matchToken("and")&&(Fn=!0,Gr.requireToken("on"))}var Mn,Ln;if(on==="intersection"){if(Mn={},Gr.matchToken("with")&&(Mn.with=en.requireElement("expression",Gr).evaluate()),Gr.matchToken("having"))do Gr.matchToken("margin")?Mn.rootMargin=en.requireElement("stringLike",Gr).evaluate():Gr.matchToken("threshold")?Mn.threshold=en.requireElement("expression",Gr).evaluate():en.raiseParseError(Gr,"Unknown intersection config specification");while(Gr.matchToken("and"))}else if(on==="mutation")if(Ln={},Gr.matchToken("of"))do if(Gr.matchToken("anything"))Ln.attributes=!0,Ln.subtree=!0,Ln.characterData=!0,Ln.childList=!0;else if(Gr.matchToken("childList"))Ln.childList=!0;else if(Gr.matchToken("attributes"))Ln.attributes=!0,Ln.attributeOldValue=!0;else if(Gr.matchToken("subtree"))Ln.subtree=!0;else if(Gr.matchToken("characterData"))Ln.characterData=!0,Ln.characterDataOldValue=!0;else if(Gr.currentToken().type==="ATTRIBUTE_REF"){var Vn=Gr.consumeToken();Ln.attributeFilter==null&&(Ln.attributeFilter=[]),Vn.value.indexOf("@")==0?Ln.attributeFilter.push(Vn.value.substring(1)):en.raiseParseError(Gr,"Only shorthand attribute references are allowed here")}else en.raiseParseError(Gr,"Unknown mutation config specification");while(Gr.matchToken("or"));else Ln.attributes=!0,Ln.characterData=!0,Ln.childList=!0;var Xn=null,ri=!1;if(Gr.matchToken("from"))if(Gr.matchToken("elsewhere"))ri=!0;else{Gr.pushFollow("or");try{Xn=en.requireElement("expression",Gr)}finally{Gr.popFollow()}Xn||en.raiseParseError(Gr,'Expected either target value or "elsewhere".')}if(Xn===null&&ri===!1&&Gr.matchToken("elsewhere")&&(ri=!0),Gr.matchToken("in"))var ui=en.parseElement("unaryExpression",Gr);if(Gr.matchToken("debounced")){Gr.requireToken("at");var _n=en.requireElement("unaryExpression",Gr),Yn=_n.evaluate({})}else if(Gr.matchToken("throttled")){Gr.requireToken("at");var _n=en.requireElement("unaryExpression",Gr),li=_n.evaluate({})}sn.push({execCount:0,every:Zr,on,args:fn,filter:pn,from:Xn,inExpr:ui,elsewhere:ri,startCount:dn,endCount:qn,unbounded:Fn,debounceTime:Yn,throttleTime:li,mutationSpec:Ln,intersectionSpec:Mn,debounced:void 0,lastExec:void 0})}while(Gr.matchToken("or"));var Kn=!0;if(!Zr&&Gr.matchToken("queue"))if(Gr.matchToken("all"))var ni=!0,Kn=!1;else if(Gr.matchToken("first"))var yi=!0;else if(Gr.matchToken("none"))var xi=!0;else Gr.requireToken("last");var wi=en.requireElement("commandList",Gr);en.ensureTerminated(wi);var Ni,Si;if(Gr.matchToken("catch")&&(Ni=Gr.requireTokenType("IDENTIFIER").value,Si=en.requireElement("commandList",Gr),en.ensureTerminated(Si)),Gr.matchToken("finally")){var Ii=en.requireElement("commandList",Gr);en.ensureTerminated(Ii)}var fi={displayName:nn,events:sn,start:wi,every:Zr,execCount:0,errorHandler:Si,errorSymbol:Ni,execute:function(Jn){let pi=rn.getEventQueueFor(Jn.me,fi);if(pi.executing&&Zr===!1){if(xi||yi&&pi.queue.length>0)return;Kn&&(pi.queue.length=0),pi.queue.push(Jn);return}fi.execCount++,pi.executing=!0,Jn.meta.onHalt=function(){pi.executing=!1;var ii=pi.queue.shift();ii&&setTimeout(function(){fi.execute(ii)},1)},Jn.meta.reject=function(ii){console.error(ii.message?ii.message:ii);var Gn=rn.getHyperTrace(Jn,ii);Gn&&Gn.print(),rn.triggerEvent(Jn.me,"exception",{error:ii})},wi.execute(Jn)},install:function(Jn,pi){for(let Gn of fi.events){var ii;Gn.elsewhere?ii=[document]:Gn.from?ii=Gn.from.evaluate(rn.makeContext(Jn,fi,Jn,null)):ii=[Jn],rn.implicitLoop(ii,function(ci){var Ei=Gn.on;if(ci==null){console.warn("'%s' feature ignored because target does not exists:",nn,Jn);return}if(Gn.mutationSpec&&(Ei="hyperscript:mutation",new MutationObserver(function(di,zn){fi.executing||rn.triggerEvent(ci,Ei,{mutationList:di,observer:zn})}).observe(ci,Gn.mutationSpec)),Gn.intersectionSpec){Ei="hyperscript:intersection";let ki=new IntersectionObserver(function(di){for(let qi of di){var zn={observer:ki};zn=Object.assign(zn,qi),zn.intersecting=qi.isIntersecting,rn.triggerEvent(ci,Ei,zn)}},Gn.intersectionSpec);ki.observe(ci)}var Ui=ci.addEventListener||ci.on;Ui.call(ci,Ei,function ki(di){if(typeof Node<"u"&&Jn instanceof Node&&ci!==Jn&&!Jn.isConnected){ci.removeEventListener(Ei,ki);return}var zn=rn.makeContext(Jn,fi,Jn,di);if(!(Gn.elsewhere&&Jn.contains(di.target))){Gn.from&&(zn.result=ci);for(let Ci of Gn.args){let Ai=zn.event[Ci.value];Ai!==void 0?zn.locals[Ci.value]=Ai:"detail"in zn.event&&(zn.locals[Ci.value]=zn.event.detail[Ci.value])}if(zn.meta.errorHandler=Si,zn.meta.errorSymbol=Ni,zn.meta.finallyHandler=Ii,Gn.filter){var qi=zn.meta.context;zn.meta.context=zn.event;try{var ji=Gn.filter.evaluate(zn);if(!ji)return}finally{zn.meta.context=qi}}if(Gn.inExpr){for(var Ti=di.target;;)if(Ti.matches&&Ti.matches(Gn.inExpr.css)){zn.result=Ti;break}else if(Ti=Ti.parentElement,Ti==null)return}if(Gn.execCount++,Gn.startCount){if(Gn.endCount){if(Gn.execCount<Gn.startCount||Gn.execCount>Gn.endCount)return}else if(Gn.unbounded){if(Gn.execCount<Gn.startCount)return}else if(Gn.execCount!==Gn.startCount)return}if(Gn.debounceTime){Gn.debounced&&clearTimeout(Gn.debounced),Gn.debounced=setTimeout(function(){fi.execute(zn)},Gn.debounceTime);return}if(Gn.throttleTime){if(Gn.lastExec&&Date.now()<Gn.lastExec+Gn.throttleTime)return;Gn.lastExec=Date.now()}fi.execute(zn)}})})}}};return en.setParent(wi,fi),fi}}),gn.addFeature("def",function(en,rn,Gr){if(Gr.matchToken("def")){var Zr=en.requireElement("dotOrColonPath",Gr),sn=Zr.evaluate(),nn=sn.split("."),un=nn.pop(),on=[];if(Gr.matchOpToken("(")&&!Gr.matchOpToken(")")){do on.push(Gr.requireTokenType("IDENTIFIER"));while(Gr.matchOpToken(","));Gr.requireOpToken(")")}var fn=en.requireElement("commandList",Gr),pn,dn;if(Gr.matchToken("catch")&&(pn=Gr.requireTokenType("IDENTIFIER").value,dn=en.parseElement("commandList",Gr)),Gr.matchToken("finally")){var qn=en.requireElement("commandList",Gr);en.ensureTerminated(qn)}var Fn={displayName:un+"("+on.map(function(xn){return xn.value}).join(", ")+")",name:un,args:on,start:fn,errorHandler:dn,errorSymbol:pn,finallyHandler:qn,install:function(xn,kn){var Mn=function(){var Ln=rn.makeContext(kn,Fn,xn,null);Ln.meta.errorHandler=dn,Ln.meta.errorSymbol=pn,Ln.meta.finallyHandler=qn;for(var Vn=0;Vn<on.length;Vn++){var Xn=on[Vn],ri=arguments[Vn];Xn&&(Ln.locals[Xn.value]=ri)}Ln.meta.caller=arguments[on.length],Ln.meta.caller&&(Ln.meta.callingCommand=Ln.meta.caller.meta.command);var ui,_n=null,Yn=new Promise(function(li,Kn){ui=li,_n=Kn});return fn.execute(Ln),Ln.meta.returned?Ln.meta.returnValue:(Ln.meta.resolve=ui,Ln.meta.reject=_n,Yn)};Mn.hyperfunc=!0,Mn.hypername=sn,rn.assignToNamespace(xn,nn,un,Mn)}};return en.ensureTerminated(fn),dn&&en.ensureTerminated(dn),en.setParent(fn,Fn),Fn}}),gn.addFeature("set",function(en,rn,Gr){let Zr=en.parseElement("setCommand",Gr);if(Zr){Zr.target.scope!=="element"&&en.raiseParseError(Gr,"variables declared at the feature level must be element scoped.");let sn={start:Zr,install:function(nn,un){Zr&&Zr.execute(rn.makeContext(nn,sn,nn,null))}};return en.ensureTerminated(Zr),sn}}),gn.addFeature("init",function(en,rn,Gr){if(Gr.matchToken("init")){var Zr=Gr.matchToken("immediately"),sn=en.requireElement("commandList",Gr),nn={start:sn,install:function(un,on){let fn=function(){sn&&sn.execute(rn.makeContext(un,nn,un,null))};Zr?fn():setTimeout(fn,0)}};return en.ensureTerminated(sn),en.setParent(sn,nn),nn}}),gn.addFeature("worker",function(en,rn,Gr){if(Gr.matchToken("worker")){en.raiseParseError(Gr,"In order to use the 'worker' feature, include the _hyperscript worker plugin. See https://hyperscript.org/features/worker/ for more info.");return}}),gn.addFeature("behavior",function(en,rn,Gr){if(Gr.matchToken("behavior")){var Zr=en.requireElement("dotOrColonPath",Gr).evaluate(),sn=Zr.split("."),nn=sn.pop(),un=[];if(Gr.matchOpToken("(")&&!Gr.matchOpToken(")")){do un.push(Gr.requireTokenType("IDENTIFIER").value);while(Gr.matchOpToken(","));Gr.requireOpToken(")")}for(var on=en.requireElement("hyperscript",Gr),fn=0;fn<on.features.length;fn++){var pn=on.features[fn];pn.behavior=Zr}return{install:function(dn,qn){rn.assignToNamespace(Qr.document&&Qr.document.body,sn,nn,function(Fn,xn,kn){for(var Mn=rn.getInternalData(Fn),Ln=mi(Mn,Zr+"Scope"),Vn=0;Vn<un.length;Vn++)Ln[un[Vn]]=kn[un[Vn]];on.apply(Fn,xn)})}}}}),gn.addFeature("install",function(en,rn,Gr){if(Gr.matchToken("install")){var Zr=en.requireElement("dotOrColonPath",Gr).evaluate(),sn=Zr.split("."),nn=en.parseElement("namedArgumentList",Gr),un;return un={install:function(on,fn){rn.unifiedEval({args:[nn],op:function(pn,dn){for(var qn=Qr,Fn=0;Fn<sn.length;Fn++)if(qn=qn[sn[Fn]],typeof qn!="object"&&typeof qn!="function")throw new Error("No such behavior defined as "+Zr);if(!(qn instanceof Function))throw new Error(Zr+" is not a behavior");qn(on,fn,dn)}},rn.makeContext(on,un,on,null))}}}}),gn.addGrammarElement("jsBody",function(en,rn,Gr){for(var Zr=Gr.currentToken().start,sn=Gr.currentToken(),nn=[],un="",on=!1;Gr.hasMore();){sn=Gr.consumeToken();var fn=Gr.token(0,!0);if(fn.type==="IDENTIFIER"&&fn.value==="end")break;on?sn.type==="IDENTIFIER"||sn.type==="NUMBER"?un+=sn.value:(un!==""&&nn.push(un),un="",on=!1):sn.type==="IDENTIFIER"&&sn.value==="function"&&(on=!0)}var pn=sn.end+1;return{type:"jsBody",exposedFunctionNames:nn,jsSource:Gr.source.substring(Zr,pn)}}),gn.addFeature("js",function(en,rn,Gr){if(Gr.matchToken("js")){var Zr=en.requireElement("jsBody",Gr),sn=Zr.jsSource+`
return { `+Zr.exposedFunctionNames.map(function(un){return un+":"+un}).join(",")+" } ",nn=new Function(sn);return{jsSource:sn,function:nn,exposedFunctionNames:Zr.exposedFunctionNames,install:function(){Object.assign(Qr,nn())}}}}),gn.addCommand("js",function(en,rn,Gr){if(Gr.matchToken("js")){var Zr=[];if(Gr.matchOpToken("(")&&!Gr.matchOpToken(")")){do{var sn=Gr.requireTokenType("IDENTIFIER");Zr.push(sn.value)}while(Gr.matchOpToken(","));Gr.requireOpToken(")")}var nn=en.requireElement("jsBody",Gr);Gr.matchToken("end");var un=vi(Function,Zr.concat([nn.jsSource])),on={jsSource:nn.jsSource,function:un,inputs:Zr,op:function(fn){var pn=[];Zr.forEach(function(qn){pn.push(rn.resolveSymbol(qn,fn,"default"))});var dn=un.apply(Qr,pn);return dn&&typeof dn.then=="function"?new Promise(function(qn){dn.then(function(Fn){fn.result=Fn,qn(rn.findNext(this,fn))})}):(fn.result=dn,rn.findNext(this,fn))}};return on}}),gn.addCommand("async",function(en,rn,Gr){if(Gr.matchToken("async")){if(Gr.matchToken("do")){for(var Zr=en.requireElement("commandList",Gr),sn=Zr;sn.next;)sn=sn.next;sn.next=rn.HALT,Gr.requireToken("end")}else var Zr=en.requireElement("command",Gr);var nn={body:Zr,op:function(un){return setTimeout(function(){Zr.execute(un)}),rn.findNext(this,un)}};return en.setParent(Zr,nn),nn}}),gn.addCommand("tell",function(en,rn,Gr){var Zr=Gr.currentToken();if(Gr.matchToken("tell")){var sn=en.requireElement("expression",Gr),nn=en.requireElement("commandList",Gr);Gr.hasMore()&&!en.featureStart(Gr.currentToken())&&Gr.requireToken("end");var un="tell_"+Zr.start,on={value:sn,body:nn,args:[sn],resolveNext:function(fn){var pn=fn.meta.iterators[un];return pn.index<pn.value.length?(fn.you=pn.value[pn.index++],nn):(fn.you=pn.originalYou,this.next?this.next:rn.findNext(this.parent,fn))},op:function(fn,pn){return pn==null?pn=[]:Array.isArray(pn)||pn instanceof NodeList||(pn=[pn]),fn.meta.iterators[un]={originalYou:fn.you,index:0,value:pn},this.resolveNext(fn)}};return en.setParent(nn,on),on}}),gn.addCommand("wait",function(en,rn,Gr){if(Gr.matchToken("wait")){var Zr;if(Gr.matchToken("for")){Gr.matchToken("a");var sn=[];do{var nn=Gr.token(0);nn.type==="NUMBER"||nn.type==="L_PAREN"?sn.push({time:en.requireElement("expression",Gr).evaluate()}):sn.push({name:en.requireElement("dotOrColonPath",Gr,"Expected event name").evaluate(),args:bn(Gr)})}while(Gr.matchToken("or"));if(Gr.matchToken("from"))var un=en.requireElement("expression",Gr);return Zr={event:sn,on:un,args:[un],op:function(fn,pn){var dn=pn||fn.me;if(!(dn instanceof EventTarget))throw new Error("Not a valid event target: "+this.on.sourceFor());return new Promise(qn=>{var Fn=!1;for(let kn of sn){var xn=Mn=>{if(fn.result=Mn,kn.args)for(let Ln of kn.args)fn.locals[Ln.value]=Mn[Ln.value]||(Mn.detail?Mn.detail[Ln.value]:null);Fn||(Fn=!0,qn(rn.findNext(this,fn)))};kn.name?dn.addEventListener(kn.name,xn,{once:!0}):kn.time!=null&&setTimeout(xn,kn.time,kn.time)}})}},Zr}else{var on;return Gr.matchToken("a")?(Gr.requireToken("tick"),on=0):on=en.requireElement("expression",Gr),Zr={type:"waitCmd",time:on,args:[on],op:function(fn,pn){return new Promise(dn=>{setTimeout(()=>{dn(rn.findNext(this,fn))},pn)})},execute:function(fn){return rn.unifiedExec(this,fn)}},Zr}}}),gn.addGrammarElement("dotOrColonPath",function(en,rn,Gr){var Zr=Gr.matchTokenType("IDENTIFIER");if(Zr){var sn=[Zr.value],nn=Gr.matchOpToken(".")||Gr.matchOpToken(":");if(nn)do sn.push(Gr.requireTokenType("IDENTIFIER","NUMBER").value);while(Gr.matchOpToken(nn.value));return{type:"dotOrColonPath",path:sn,evaluate:function(){return sn.join(nn?nn.value:"")}}}}),gn.addGrammarElement("eventName",function(en,rn,Gr){var Zr;return(Zr=Gr.matchTokenType("STRING"))?{evaluate:function(){return Zr.value}}:en.parseElement("dotOrColonPath",Gr)});function wn(en,rn,Gr,Zr){var sn=rn.requireElement("eventName",Zr),nn=rn.parseElement("namedArgumentList",Zr);if(en==="send"&&Zr.matchToken("to")||en==="trigger"&&Zr.matchToken("on"))var un=rn.requireElement("expression",Zr);else var un=rn.requireElement("implicitMeTarget",Zr);var on={eventName:sn,details:nn,to:un,args:[un,sn,nn],op:function(fn,pn,dn,qn){return Gr.nullCheck(pn,un),Gr.implicitLoop(pn,function(Fn){Gr.triggerEvent(Fn,dn,qn,fn.me)}),Gr.findNext(on,fn)}};return on}gn.addCommand("trigger",function(en,rn,Gr){if(Gr.matchToken("trigger"))return wn("trigger",en,rn,Gr)}),gn.addCommand("send",function(en,rn,Gr){if(Gr.matchToken("send"))return wn("send",en,rn,Gr)});var Nn=function(en,rn,Gr,Zr){if(Zr)if(en.commandBoundary(Gr.currentToken()))en.raiseParseError(Gr,"'return' commands must return a value.  If you do not wish to return a value, use 'exit' instead.");else var sn=en.requireElement("expression",Gr);var nn={value:sn,args:[sn],op:function(un,on){var fn=un.meta.resolve;return un.meta.returned=!0,un.meta.returnValue=on,fn&&(on?fn(on):fn()),rn.HALT}};return nn};gn.addCommand("return",function(en,rn,Gr){if(Gr.matchToken("return"))return Nn(en,rn,Gr,!0)}),gn.addCommand("exit",function(en,rn,Gr){if(Gr.matchToken("exit"))return Nn(en,rn,Gr,!1)}),gn.addCommand("halt",function(en,rn,Gr){if(Gr.matchToken("halt")){if(Gr.matchToken("the")){Gr.requireToken("event"),Gr.matchOpToken("'")&&Gr.requireToken("s");var Zr=!0}if(Gr.matchToken("bubbling"))var sn=!0;else if(Gr.matchToken("default"))var nn=!0;var un=Nn(en,rn,Gr,!1),on={keepExecuting:!0,bubbling:sn,haltDefault:nn,exit:un,op:function(fn){if(fn.event)return sn?fn.event.stopPropagation():(nn||fn.event.stopPropagation(),fn.event.preventDefault()),Zr?rn.findNext(this,fn):un}};return on}}),gn.addCommand("log",function(en,rn,Gr){if(Gr.matchToken("log")){for(var Zr=[en.parseElement("expression",Gr)];Gr.matchOpToken(",");)Zr.push(en.requireElement("expression",Gr));if(Gr.matchToken("with"))var sn=en.requireElement("expression",Gr);var nn={exprs:Zr,withExpr:sn,args:[sn,Zr],op:function(un,on,fn){return on?on.apply(null,fn):console.log.apply(null,fn),rn.findNext(this,un)}};return nn}}),gn.addCommand("beep!",function(en,rn,Gr){if(Gr.matchToken("beep!")){for(var Zr=[en.parseElement("expression",Gr)];Gr.matchOpToken(",");)Zr.push(en.requireElement("expression",Gr));var sn={exprs:Zr,args:[Zr],op:function(nn,un){for(let on=0;on<Zr.length;on++){let fn=Zr[on],pn=un[on];rn.beepValueToConsole(nn.me,fn,pn)}return rn.findNext(this,nn)}};return sn}}),gn.addCommand("throw",function(en,rn,Gr){if(Gr.matchToken("throw")){var Zr=en.requireElement("expression",Gr),sn={expr:Zr,args:[Zr],op:function(nn,un){throw rn.registerHyperTrace(nn,un),un}};return sn}});var Sn=function(en,rn,Gr){var Zr=en.requireElement("expression",Gr),sn={expr:Zr,args:[Zr],op:function(nn,un){return nn.result=un,rn.findNext(sn,nn)}};return sn};gn.addCommand("call",function(en,rn,Gr){if(Gr.matchToken("call")){var Zr=Sn(en,rn,Gr);return Zr.expr&&Zr.expr.type!=="functionCall"&&en.raiseParseError(Gr,"Must be a function invocation"),Zr}}),gn.addCommand("get",function(en,rn,Gr){if(Gr.matchToken("get"))return Sn(en,rn,Gr)}),gn.addCommand("make",function(en,rn,Gr){if(Gr.matchToken("make")){Gr.matchToken("a")||Gr.matchToken("an");var Zr=en.requireElement("expression",Gr),sn=[];if(Zr.type!=="queryRef"&&Gr.matchToken("from"))do sn.push(en.requireElement("expression",Gr));while(Gr.matchOpToken(","));if(Gr.matchToken("called"))var nn=en.requireElement("symbol",Gr);var un;return Zr.type==="queryRef"?(un={op:function(on){for(var fn,pn="div",dn,qn=[],Fn=/(?:(^|#|\.)([^#\. ]+))/g;fn=Fn.exec(Zr.css);)fn[1]===""?pn=fn[2].trim():fn[1]==="#"?dn=fn[2].trim():qn.push(fn[2].trim());var xn=document.createElement(pn);dn!==void 0&&(xn.id=dn);for(var kn=0;kn<qn.length;kn++){var Mn=qn[kn];xn.classList.add(Mn)}return on.result=xn,nn&&rn.setSymbol(nn.name,on,nn.scope,xn),rn.findNext(this,on)}},un):(un={args:[Zr,sn],op:function(on,fn,pn){return on.result=vi(fn,pn),nn&&rn.setSymbol(nn.name,on,nn.scope,on.result),rn.findNext(this,on)}},un)}}),gn.addGrammarElement("pseudoCommand",function(en,rn,Gr){let Zr=Gr.token(1);if(!(Zr&&Zr.op&&(Zr.value==="."||Zr.value==="(")))return null;for(var sn=en.requireElement("primaryExpression",Gr),nn=sn.root,un=sn;nn.root!=null;)un=un.root,nn=nn.root;if(sn.type!=="functionCall"&&en.raiseParseError(Gr,"Pseudo-commands must be function calls"),un.type==="functionCall"&&un.root.root==null){if(Gr.matchAnyToken("the","to","on","with","into","from","at"))var on=en.requireElement("expression",Gr);else if(Gr.matchToken("me"))var on=en.requireElement("implicitMeTarget",Gr)}var fn;return on?fn={type:"pseudoCommand",root:on,argExressions:un.argExressions,args:[on,un.argExressions],op:function(pn,dn,qn){rn.nullCheck(dn,on);var Fn=dn[un.root.name];return rn.nullCheck(Fn,un),Fn.hyperfunc&&qn.push(pn),pn.result=Fn.apply(dn,qn),rn.findNext(fn,pn)},execute:function(pn){return rn.unifiedExec(this,pn)}}:fn={type:"pseudoCommand",expr:sn,args:[sn],op:function(pn,dn){return pn.result=dn,rn.findNext(fn,pn)},execute:function(pn){return rn.unifiedExec(this,pn)}},fn});var On=function(en,rn,Gr,Zr,sn){var nn=Zr.type==="symbol",un=Zr.type==="attributeRef",on=Zr.type==="styleRef",fn=Zr.type==="arrayIndex";!(un||on||nn)&&Zr.root==null&&en.raiseParseError(Gr,"Can only put directly into symbols, not references");var pn=null,dn=null;if(!nn)if(un||on){pn=en.requireElement("implicitMeTarget",Gr);var qn=Zr}else if(fn)dn=Zr.firstIndex,pn=Zr.root;else{dn=Zr.prop?Zr.prop.value:null;var qn=Zr.attribute;pn=Zr.root}var Fn={target:Zr,symbolWrite:nn,value:sn,args:[pn,dn,sn],op:function(xn,kn,Mn,Ln){return nn?rn.setSymbol(Zr.name,xn,Zr.scope,Ln):(rn.nullCheck(kn,pn),fn?kn[Mn]=Ln:rn.implicitLoop(kn,function(Vn){qn?qn.type==="attributeRef"?Ln==null?Vn.removeAttribute(qn.name):Vn.setAttribute(qn.name,Ln):Vn.style[qn.name]=Ln:Vn[Mn]=Ln})),rn.findNext(this,xn)}};return Fn};gn.addCommand("default",function(en,rn,Gr){if(Gr.matchToken("default")){var Zr=en.requireElement("assignableExpression",Gr);Gr.requireToken("to");var sn=en.requireElement("expression",Gr),nn=On(en,rn,Gr,Zr,sn),un={target:Zr,value:sn,setter:nn,args:[Zr],op:function(on,fn){return fn?rn.findNext(this,on):nn}};return nn.parent=un,un}}),gn.addCommand("set",function(en,rn,Gr){if(Gr.matchToken("set")){if(Gr.currentToken().type==="L_BRACE"){var Zr=en.requireElement("objectLiteral",Gr);Gr.requireToken("on");var sn=en.requireElement("expression",Gr),nn={objectLiteral:Zr,target:sn,args:[Zr,sn],op:function(on,fn,pn){return Object.assign(pn,fn),rn.findNext(this,on)}};return nn}try{Gr.pushFollow("to");var sn=en.requireElement("assignableExpression",Gr)}finally{Gr.popFollow()}Gr.requireToken("to");var un=en.requireElement("expression",Gr);return On(en,rn,Gr,sn,un)}}),gn.addCommand("if",function(en,rn,Gr){if(!Gr.matchToken("if"))return;var Zr=en.requireElement("expression",Gr);Gr.matchToken("then");var sn=en.parseElement("commandList",Gr),nn=!1;let un=Gr.matchToken("else")||Gr.matchToken("otherwise");if(un){let pn=Gr.peekToken("if");if(nn=pn!=null&&pn.line===un.line,nn)var on=en.parseElement("command",Gr);else var on=en.parseElement("commandList",Gr)}Gr.hasMore()&&!nn&&Gr.requireToken("end");var fn={expr:Zr,trueBranch:sn,falseBranch:on,args:[Zr],op:function(pn,dn){return dn?sn:on||rn.findNext(this,pn)}};return en.setParent(sn,fn),en.setParent(on,fn),fn});var An=function(en,rn,Gr,Zr){var sn=rn.currentToken(),nn;if(rn.matchToken("for")||Zr){var un=rn.requireTokenType("IDENTIFIER");nn=un.value,rn.requireToken("in");var on=en.requireElement("expression",rn)}else if(rn.matchToken("in")){nn="it";var on=en.requireElement("expression",rn)}else if(rn.matchToken("while"))var fn=en.requireElement("expression",rn);else if(rn.matchToken("until")){var pn=!0;if(rn.matchToken("event")){var dn=en.requireElement("dotOrColonPath",rn,"Expected event name");if(rn.matchToken("from"))var qn=en.requireElement("expression",rn)}else var fn=en.requireElement("expression",rn)}else if(!en.commandBoundary(rn.currentToken())&&rn.currentToken().value!=="forever"){var Fn=en.requireElement("expression",rn);rn.requireToken("times")}else{rn.matchToken("forever");var xn=!0}if(rn.matchToken("index"))var un=rn.requireTokenType("IDENTIFIER"),kn=un.value;else if(rn.matchToken("indexed")){rn.requireToken("by");var un=rn.requireTokenType("IDENTIFIER"),kn=un.value}var Mn=en.parseElement("commandList",rn);if(Mn&&dn){for(var Ln=Mn;Ln.next;)Ln=Ln.next;var Vn={type:"waitATick",op:function(){return new Promise(function(_n){setTimeout(function(){_n(Gr.findNext(Vn))},0)})}};Ln.next=Vn}if(rn.hasMore()&&rn.requireToken("end"),nn==null){nn="_implicit_repeat_"+sn.start;var Xn=nn}else var Xn=nn+"_"+sn.start;var ri={identifier:nn,indexIdentifier:kn,slot:Xn,expression:on,forever:xn,times:Fn,until:pn,event:dn,on:qn,whileExpr:fn,resolveNext:function(){return this},loop:Mn,args:[fn,Fn],op:function(_n,Yn,li){var Kn=_n.meta.iterators[Xn],ni=!1,yi=null;if(this.forever)ni=!0;else if(this.until)dn?ni=_n.meta.iterators[Xn].eventFired===!1:ni=Yn!==!0;else if(fn)ni=Yn;else if(li)ni=Kn.index<li;else{var xi=Kn.iterator.next();ni=!xi.done,yi=xi.value}return ni?(Kn.value?_n.result=_n.locals[nn]=yi:_n.result=Kn.index,kn&&(_n.locals[kn]=Kn.index),Kn.index++,Mn):(_n.meta.iterators[Xn]=null,Gr.findNext(this.parent,_n))}};en.setParent(Mn,ri);var ui={name:"repeatInit",args:[on,dn,qn],op:function(_n,Yn,li,Kn){var ni={index:0,value:Yn,eventFired:!1};if(_n.meta.iterators[Xn]=ni,Yn&&Yn[Symbol.iterator]&&(ni.iterator=Yn[Symbol.iterator]()),dn){var yi=Kn||_n.me;yi.addEventListener(li,function(xi){_n.meta.iterators[Xn].eventFired=!0},{once:!0})}return ri},execute:function(_n){return Gr.unifiedExec(this,_n)}};return en.setParent(ri,ui),ui};gn.addCommand("repeat",function(en,rn,Gr){if(Gr.matchToken("repeat"))return An(en,Gr,rn,!1)}),gn.addCommand("for",function(en,rn,Gr){if(Gr.matchToken("for"))return An(en,Gr,rn,!0)}),gn.addCommand("continue",function(en,rn,Gr){if(Gr.matchToken("continue")){var Zr={op:function(sn){for(var nn=this.parent;;nn=nn.parent)if(nn==null&&en.raiseParseError(Gr,"Command `continue` cannot be used outside of a `repeat` loop."),nn.loop!=null)return nn.resolveNext(sn)}};return Zr}}),gn.addCommand("break",function(en,rn,Gr){if(Gr.matchToken("break")){var Zr={op:function(sn){for(var nn=this.parent;;nn=nn.parent)if(nn==null&&en.raiseParseError(Gr,"Command `continue` cannot be used outside of a `repeat` loop."),nn.loop!=null)return rn.findNext(nn.parent,sn)}};return Zr}}),gn.addGrammarElement("stringLike",function(en,rn,Gr){return en.parseAnyOf(["string","nakedString"],Gr)}),gn.addCommand("append",function(en,rn,Gr){if(Gr.matchToken("append")){var Zr=null,sn=en.requireElement("expression",Gr),nn={type:"symbol",evaluate:function(fn){return rn.resolveSymbol("result",fn)}};Gr.matchToken("to")?Zr=en.requireElement("expression",Gr):Zr=nn;var un=null;(Zr.type==="symbol"||Zr.type==="attributeRef"||Zr.root!=null)&&(un=On(en,rn,Gr,Zr,nn));var on={value:sn,target:Zr,args:[Zr,sn],op:function(fn,pn,dn){if(Array.isArray(pn))return pn.push(dn),rn.findNext(this,fn);if(pn instanceof Element)return dn instanceof Element?pn.insertAdjacentElement("beforeend",dn):pn.insertAdjacentHTML("beforeend",dn),rn.processNode(pn),rn.findNext(this,fn);if(un)return fn.result=(pn||"")+dn,un;throw Error("Unable to append a value!")},execute:function(fn){return rn.unifiedExec(this,fn)}};return un!=null&&(un.parent=on),on}});function In(en,rn,Gr){Gr.matchToken("at")||Gr.matchToken("from");let Zr={includeStart:!0,includeEnd:!1};return Zr.from=Gr.matchToken("start")?0:en.requireElement("expression",Gr),(Gr.matchToken("to")||Gr.matchOpToken(".."))&&(Gr.matchToken("end")?Zr.toEnd=!0:Zr.to=en.requireElement("expression",Gr)),Gr.matchToken("inclusive")?Zr.includeEnd=!0:Gr.matchToken("exclusive")&&(Zr.includeStart=!1),Zr}class Pn{constructor(rn,Gr){this.re=rn,this.str=Gr}next(){let rn=this.re.exec(this.str);return rn===null?{done:!0}:{value:rn}}}class jn{constructor(rn,Gr,Zr){this.re=rn,this.flags=Gr,this.str=Zr}[Symbol.iterator](){return new Pn(new RegExp(this.re,this.flags),this.str)}}gn.addCommand("pick",(en,rn,Gr)=>{if(Gr.matchToken("pick")){if(Gr.matchToken("the"),Gr.matchToken("item")||Gr.matchToken("items")||Gr.matchToken("character")||Gr.matchToken("characters")){let Zr=In(en,rn,Gr);return Gr.requireToken("from"),{args:[en.requireElement("expression",Gr),Zr.from,Zr.to],op(nn,un,on,fn){return Zr.toEnd&&(fn=un.length),Zr.includeStart||on++,Zr.includeEnd&&fn++,(fn==null||fn==null)&&(fn=on+1),nn.result=un.slice(on,fn),rn.findNext(this,nn)}}}if(Gr.matchToken("match")){Gr.matchToken("of");let Zr=en.parseElement("expression",Gr),sn="";return Gr.matchOpToken("|")&&(sn=Gr.requireTokenType("IDENTIFIER").value),Gr.requireToken("from"),{args:[en.parseElement("expression",Gr),Zr],op(un,on,fn){return un.result=new RegExp(fn,sn).exec(on),rn.findNext(this,un)}}}if(Gr.matchToken("matches")){Gr.matchToken("of");let Zr=en.parseElement("expression",Gr),sn="gu";return Gr.matchOpToken("|")&&(sn="g"+Gr.requireTokenType("IDENTIFIER").value.replace("g","")),Gr.requireToken("from"),{args:[en.parseElement("expression",Gr),Zr],op(un,on,fn){return un.result=new jn(fn,sn,on),rn.findNext(this,un)}}}}}),gn.addCommand("increment",function(en,rn,Gr){if(Gr.matchToken("increment")){var Zr,sn=en.parseElement("assignableExpression",Gr);Gr.matchToken("by")&&(Zr=en.requireElement("expression",Gr));var nn={type:"implicitIncrementOp",target:sn,args:[sn,Zr],op:function(un,on,fn){on=on?parseFloat(on):0,fn=Zr?parseFloat(fn):1;var pn=on+fn;return un.result=pn,pn},evaluate:function(un){return rn.unifiedEval(this,un)}};return On(en,rn,Gr,sn,nn)}}),gn.addCommand("decrement",function(en,rn,Gr){if(Gr.matchToken("decrement")){var Zr,sn=en.parseElement("assignableExpression",Gr);Gr.matchToken("by")&&(Zr=en.requireElement("expression",Gr));var nn={type:"implicitDecrementOp",target:sn,args:[sn,Zr],op:function(un,on,fn){on=on?parseFloat(on):0,fn=Zr?parseFloat(fn):1;var pn=on-fn;return un.result=pn,pn},evaluate:function(un){return rn.unifiedEval(this,un)}};return On(en,rn,Gr,sn,nn)}});function Dn(en,rn){var Gr="text",Zr;return en.matchToken("a")||en.matchToken("an"),en.matchToken("json")||en.matchToken("Object")?Gr="json":en.matchToken("response")?Gr="response":en.matchToken("html")?Gr="html":en.matchToken("text")||(Zr=rn.requireElement("dotOrColonPath",en).evaluate()),{type:Gr,conversion:Zr}}gn.addCommand("fetch",function(en,rn,Gr){if(Gr.matchToken("fetch")){var Zr=en.requireElement("stringLike",Gr);if(Gr.matchToken("as"))var sn=Dn(Gr,en);if(Gr.matchToken("with")&&Gr.currentToken().value!=="{")var nn=en.parseElement("nakedNamedArgumentList",Gr);else var nn=en.parseElement("objectLiteral",Gr);sn==null&&Gr.matchToken("as")&&(sn=Dn(Gr,en));var un=sn?sn.type:"text",on=sn?sn.conversion:null,fn={url:Zr,argExpressions:nn,args:[Zr,nn],op:function(pn,dn,qn){var Fn=qn||{};Fn.sender=pn.me,Fn.headers=Fn.headers||{};var xn=new AbortController;let kn=pn.me.addEventListener("fetch:abort",function(){xn.abort()},{once:!0});Fn.signal=xn.signal,rn.triggerEvent(pn.me,"hyperscript:beforeFetch",Fn),rn.triggerEvent(pn.me,"fetch:beforeRequest",Fn),qn=Fn;var Mn=!1;return qn.timeout&&setTimeout(function(){Mn||xn.abort()},qn.timeout),fetch(dn,qn).then(function(Ln){let Vn={response:Ln};return rn.triggerEvent(pn.me,"fetch:afterResponse",Vn),Ln=Vn.response,un==="response"?(pn.result=Ln,rn.triggerEvent(pn.me,"fetch:afterRequest",{result:Ln}),Mn=!0,rn.findNext(fn,pn)):un==="json"?Ln.json().then(function(Xn){return pn.result=Xn,rn.triggerEvent(pn.me,"fetch:afterRequest",{result:Xn}),Mn=!0,rn.findNext(fn,pn)}):Ln.text().then(function(Xn){return on&&(Xn=rn.convertValue(Xn,on)),un==="html"&&(Xn=rn.convertValue(Xn,"Fragment")),pn.result=Xn,rn.triggerEvent(pn.me,"fetch:afterRequest",{result:Xn}),Mn=!0,rn.findNext(fn,pn)})}).catch(function(Ln){throw rn.triggerEvent(pn.me,"fetch:error",{reason:Ln}),Ln}).finally(function(){pn.me.removeEventListener("fetch:abort",kn)})}};return fn}})}function oi(gn){gn.addCommand("settle",function(hn,vn,ln){if(ln.matchToken("settle")){if(hn.commandBoundary(ln.currentToken()))var bn=hn.requireElement("implicitMeTarget",ln);else var bn=hn.requireElement("expression",ln);var wn={type:"settleCmd",args:[bn],op:function(Nn,Sn){vn.nullCheck(Sn,bn);var On=null,An=!1,In=!1,Pn=new Promise(function(jn){On=jn});return Sn.addEventListener("transitionstart",function(){In=!0},{once:!0}),setTimeout(function(){!In&&!An&&On(vn.findNext(wn,Nn))},500),Sn.addEventListener("transitionend",function(){An||On(vn.findNext(wn,Nn))},{once:!0}),Pn},execute:function(Nn){return vn.unifiedExec(this,Nn)}};return wn}}),gn.addCommand("add",function(hn,vn,ln){if(ln.matchToken("add")){var bn=hn.parseElement("classRef",ln),wn=null,Nn=null;if(bn==null)wn=hn.parseElement("attributeRef",ln),wn==null&&(Nn=hn.parseElement("styleLiteral",ln),Nn==null&&hn.raiseParseError(ln,"Expected either a class reference or attribute expression"));else for(var Sn=[bn];bn=hn.parseElement("classRef",ln);)Sn.push(bn);if(ln.matchToken("to"))var On=hn.requireElement("expression",ln);else var On=hn.requireElement("implicitMeTarget",ln);if(ln.matchToken("when")){Nn&&hn.raiseParseError(ln,"Only class and properties are supported with a when clause");var An=hn.requireElement("expression",ln)}return Sn?{classRefs:Sn,to:On,args:[On,Sn],op:function(In,Pn,jn){return vn.nullCheck(Pn,On),vn.forEach(jn,function(Dn){vn.implicitLoop(Pn,function(en){An?(In.result=en,vn.evaluateNoPromise(An,In)?en instanceof Element&&en.classList.add(Dn.className):en instanceof Element&&en.classList.remove(Dn.className),In.result=null):en instanceof Element&&en.classList.add(Dn.className)})}),vn.findNext(this,In)}}:wn?{type:"addCmd",attributeRef:wn,to:On,args:[On],op:function(In,Pn,jn){return vn.nullCheck(Pn,On),vn.implicitLoop(Pn,function(Dn){An?(In.result=Dn,vn.evaluateNoPromise(An,In)?Dn.setAttribute(wn.name,wn.value):Dn.removeAttribute(wn.name),In.result=null):Dn.setAttribute(wn.name,wn.value)}),vn.findNext(this,In)},execute:function(In){return vn.unifiedExec(this,In)}}:{type:"addCmd",cssDeclaration:Nn,to:On,args:[On,Nn],op:function(In,Pn,jn){return vn.nullCheck(Pn,On),vn.implicitLoop(Pn,function(Dn){Dn.style.cssText+=jn}),vn.findNext(this,In)},execute:function(In){return vn.unifiedExec(this,In)}}}}),gn.addGrammarElement("styleLiteral",function(hn,vn,ln){if(ln.matchOpToken("{")){for(var bn=[""],wn=[];ln.hasMore();){if(ln.matchOpToken("\\"))ln.consumeToken();else{if(ln.matchOpToken("}"))break;if(ln.matchToken("$")){var Nn=ln.matchOpToken("{"),Sn=hn.parseElement("expression",ln);Nn&&ln.requireOpToken("}"),wn.push(Sn),bn.push("")}else{var On=ln.consumeToken();bn[bn.length-1]+=ln.source.substring(On.start,On.end)}}bn[bn.length-1]+=ln.lastWhitespace()}return{type:"styleLiteral",args:[wn],op:function(An,In){var Pn="";return bn.forEach(function(jn,Dn){Pn+=jn,Dn in In&&(Pn+=In[Dn])}),Pn},evaluate:function(An){return vn.unifiedEval(this,An)}}}}),gn.addCommand("remove",function(hn,vn,ln){if(ln.matchToken("remove")){var bn=hn.parseElement("classRef",ln),wn=null,Nn=null;if(bn==null)wn=hn.parseElement("attributeRef",ln),wn==null&&(Nn=hn.parseElement("expression",ln),Nn==null&&hn.raiseParseError(ln,"Expected either a class reference, attribute expression or value expression"));else for(var Sn=[bn];bn=hn.parseElement("classRef",ln);)Sn.push(bn);if(ln.matchToken("from"))var On=hn.requireElement("expression",ln);else if(Nn==null)var On=hn.requireElement("implicitMeTarget",ln);return Nn?{elementExpr:Nn,from:On,args:[Nn,On],op:function(An,In,Pn){return vn.nullCheck(In,Nn),vn.implicitLoop(In,function(jn){jn.parentElement&&(Pn==null||Pn.contains(jn))&&jn.parentElement.removeChild(jn)}),vn.findNext(this,An)}}:{classRefs:Sn,attributeRef:wn,elementExpr:Nn,from:On,args:[Sn,On],op:function(An,In,Pn){return vn.nullCheck(Pn,On),In?vn.forEach(In,function(jn){vn.implicitLoop(Pn,function(Dn){Dn.classList.remove(jn.className)})}):vn.implicitLoop(Pn,function(jn){jn.removeAttribute(wn.name)}),vn.findNext(this,An)}}}}),gn.addCommand("toggle",function(hn,vn,ln){if(ln.matchToken("toggle")){if(ln.matchAnyToken("the","my"),ln.currentToken().type==="STYLE_REF"){var bn=ln.consumeToken().value.substr(1),wn=!0,Nn=cn(hn,ln,bn);if(ln.matchToken("of")){ln.pushFollow("with");try{var Sn=hn.requireElement("expression",ln)}finally{ln.popFollow()}}else var Sn=hn.requireElement("implicitMeTarget",ln)}else if(ln.matchToken("between")){var On=!0,An=hn.parseElement("classRef",ln);ln.requireToken("and");var In=hn.requireElement("classRef",ln)}else{var An=hn.parseElement("classRef",ln),Pn=null;if(An==null)Pn=hn.parseElement("attributeRef",ln),Pn==null&&hn.raiseParseError(ln,"Expected either a class reference or attribute expression");else for(var jn=[An];An=hn.parseElement("classRef",ln);)jn.push(An)}if(wn!==!0)if(ln.matchToken("on"))var Sn=hn.requireElement("expression",ln);else var Sn=hn.requireElement("implicitMeTarget",ln);if(ln.matchToken("for"))var Dn=hn.requireElement("expression",ln);else if(ln.matchToken("until")){var en=hn.requireElement("dotOrColonPath",ln,"Expected event name");if(ln.matchToken("from"))var rn=hn.requireElement("expression",ln)}var Gr={classRef:An,classRef2:In,classRefs:jn,attributeRef:Pn,on:Sn,time:Dn,evt:en,from:rn,toggle:function(Zr,sn,nn,un){vn.nullCheck(Zr,Sn),wn?vn.implicitLoop(Zr,function(on){Nn("toggle",on)}):On?vn.implicitLoop(Zr,function(on){on.classList.contains(sn.className)?(on.classList.remove(sn.className),on.classList.add(nn.className)):(on.classList.add(sn.className),on.classList.remove(nn.className))}):un?vn.forEach(un,function(on){vn.implicitLoop(Zr,function(fn){fn.classList.toggle(on.className)})}):vn.implicitLoop(Zr,function(on){on.hasAttribute(Pn.name)?on.removeAttribute(Pn.name):on.setAttribute(Pn.name,Pn.value)})},args:[Sn,Dn,en,rn,An,In,jn],op:function(Zr,sn,nn,un,on,fn,pn,dn){return nn?new Promise(function(qn){Gr.toggle(sn,fn,pn,dn),setTimeout(function(){Gr.toggle(sn,fn,pn,dn),qn(vn.findNext(Gr,Zr))},nn)}):un?new Promise(function(qn){var Fn=on||Zr.me;Fn.addEventListener(un,function(){Gr.toggle(sn,fn,pn,dn),qn(vn.findNext(Gr,Zr))},{once:!0}),Gr.toggle(sn,fn,pn,dn)}):(this.toggle(sn,fn,pn,dn),vn.findNext(Gr,Zr))}};return Gr}});var Yr={display:function(hn,vn,ln){if(ln)vn.style.display=ln;else if(hn==="toggle")getComputedStyle(vn).display==="none"?Yr.display("show",vn,ln):Yr.display("hide",vn,ln);else if(hn==="hide"){let bn=gn.runtime.getInternalData(vn);bn.originalDisplay==null&&(bn.originalDisplay=vn.style.display),vn.style.display="none"}else{let bn=gn.runtime.getInternalData(vn);bn.originalDisplay&&bn.originalDisplay!=="none"?vn.style.display=bn.originalDisplay:vn.style.removeProperty("display")}},visibility:function(hn,vn,ln){ln?vn.style.visibility=ln:hn==="toggle"?getComputedStyle(vn).visibility==="hidden"?Yr.visibility("show",vn,ln):Yr.visibility("hide",vn,ln):hn==="hide"?vn.style.visibility="hidden":vn.style.visibility="visible"},opacity:function(hn,vn,ln){ln?vn.style.opacity=ln:hn==="toggle"?getComputedStyle(vn).opacity==="0"?Yr.opacity("show",vn,ln):Yr.opacity("hide",vn,ln):hn==="hide"?vn.style.opacity="0":vn.style.opacity="1"}},tn=function(hn,vn,ln){var bn,wn=ln.currentToken();return wn.value==="when"||wn.value==="with"||hn.commandBoundary(wn)?bn=hn.parseElement("implicitMeTarget",ln):bn=hn.parseElement("expression",ln),bn},cn=function(hn,vn,ln){var bn=Jr.defaultHideShowStrategy,wn=Yr;Jr.hideShowStrategies&&(wn=Object.assign(wn,Jr.hideShowStrategies)),ln=ln||bn||"display";var Nn=wn[ln];return Nn==null&&hn.raiseParseError(vn,"Unknown show/hide strategy : "+ln),Nn};gn.addCommand("hide",function(hn,vn,ln){if(ln.matchToken("hide")){var bn=tn(hn,vn,ln),wn=null;ln.matchToken("with")&&(wn=ln.requireTokenType("IDENTIFIER","STYLE_REF").value,wn.indexOf("*")===0&&(wn=wn.substr(1)));var Nn=cn(hn,ln,wn);return{target:bn,args:[bn],op:function(Sn,On){return vn.nullCheck(On,bn),vn.implicitLoop(On,function(An){Nn("hide",An)}),vn.findNext(this,Sn)}}}}),gn.addCommand("show",function(hn,vn,ln){if(ln.matchToken("show")){var bn=tn(hn,vn,ln),wn=null;ln.matchToken("with")&&(wn=ln.requireTokenType("IDENTIFIER","STYLE_REF").value,wn.indexOf("*")===0&&(wn=wn.substr(1)));var Nn=null;if(ln.matchOpToken(":")){var Sn=ln.consumeUntilWhitespace();ln.matchTokenType("WHITESPACE"),Nn=Sn.map(function(In){return In.value}).join("")}if(ln.matchToken("when"))var On=hn.requireElement("expression",ln);var An=cn(hn,ln,wn);return{target:bn,when:On,args:[bn],op:function(In,Pn){return vn.nullCheck(Pn,bn),vn.implicitLoop(Pn,function(jn){On?(In.result=jn,vn.evaluateNoPromise(On,In)?An("show",jn,Nn):An("hide",jn),In.result=null):An("show",jn,Nn)}),vn.findNext(this,In)}}}}),gn.addCommand("take",function(hn,vn,ln){if(ln.matchToken("take")){let An=null,In=[];for(;An=hn.parseElement("classRef",ln);)In.push(An);var bn=null,wn=null;let Pn=In.length>0;if(Pn||(bn=hn.parseElement("attributeRef",ln),bn==null&&hn.raiseParseError(ln,"Expected either a class reference or attribute expression"),ln.matchToken("with")&&(wn=hn.requireElement("expression",ln))),ln.matchToken("from"))var Nn=hn.requireElement("expression",ln);if(ln.matchToken("for"))var Sn=hn.requireElement("expression",ln);else var Sn=hn.requireElement("implicitMeTarget",ln);if(Pn){var On={classRefs:In,from:Nn,forElt:Sn,args:[In,Nn,Sn],op:function(jn,Dn,en,rn){return vn.nullCheck(rn,Sn),vn.implicitLoop(Dn,function(Gr){var Zr=Gr.className;en?vn.implicitLoop(en,function(sn){sn.classList.remove(Zr)}):vn.implicitLoop(Gr,function(sn){sn.classList.remove(Zr)}),vn.implicitLoop(rn,function(sn){sn.classList.add(Zr)})}),vn.findNext(this,jn)}};return On}else{var On={attributeRef:bn,from:Nn,forElt:Sn,args:[Nn,Sn,wn],op:function(Dn,en,rn,Gr){return vn.nullCheck(en,Nn),vn.nullCheck(rn,Sn),vn.implicitLoop(en,function(Zr){Gr?Zr.setAttribute(bn.name,Gr):Zr.removeAttribute(bn.name)}),vn.implicitLoop(rn,function(Zr){Zr.setAttribute(bn.name,bn.value||"")}),vn.findNext(this,Dn)}};return On}}});function mn(hn,vn,ln,bn){if(ln!=null)var wn=hn.resolveSymbol(ln,vn);else var wn=vn;if(wn instanceof Element||wn instanceof HTMLDocument){for(;wn.firstChild;)wn.removeChild(wn.firstChild);wn.append(gn.runtime.convertValue(bn,"Fragment")),hn.processNode(wn)}else if(ln!=null)hn.setSymbol(ln,vn,null,bn);else throw"Don't know how to put a value into "+typeof vn}gn.addCommand("put",function(hn,vn,ln){if(ln.matchToken("put")){var bn=hn.requireElement("expression",ln),wn=ln.matchAnyToken("into","before","after");wn==null&&ln.matchToken("at")&&(ln.matchToken("the"),wn=ln.matchAnyToken("start","end"),ln.requireToken("of")),wn==null&&hn.raiseParseError(ln,"Expected one of 'into', 'before', 'at start of', 'at end of', 'after'");var Nn=hn.requireElement("expression",ln),Sn=wn.value,On=!1,An=!1,In=null,Pn=null;if(Nn.type==="arrayIndex"&&Sn==="into")On=!0,Pn=Nn.prop,In=Nn.root;else if(Nn.prop&&Nn.root&&Sn==="into")Pn=Nn.prop.value,In=Nn.root;else if(Nn.type==="symbol"&&Sn==="into")An=!0,Pn=Nn.name;else if(Nn.type==="attributeRef"&&Sn==="into"){var jn=!0;Pn=Nn.name,In=hn.requireElement("implicitMeTarget",ln)}else if(Nn.type==="styleRef"&&Sn==="into"){var Dn=!0;Pn=Nn.name,In=hn.requireElement("implicitMeTarget",ln)}else if(Nn.attribute&&Sn==="into"){var jn=Nn.attribute.type==="attributeRef",Dn=Nn.attribute.type==="styleRef";Pn=Nn.attribute.name,In=Nn.root}else In=Nn;var en={target:Nn,operation:Sn,symbolWrite:An,value:bn,args:[In,Pn,bn],op:function(rn,Gr,Zr,sn){if(An)mn(vn,rn,Zr,sn);else if(vn.nullCheck(Gr,In),Sn==="into")jn?vn.implicitLoop(Gr,function(un){un.setAttribute(Zr,sn)}):Dn?vn.implicitLoop(Gr,function(un){un.style[Zr]=sn}):On?Gr[Zr]=sn:vn.implicitLoop(Gr,function(un){mn(vn,un,Zr,sn)});else{var nn=Sn==="before"?Element.prototype.before:Sn==="after"?Element.prototype.after:Sn==="start"?Element.prototype.prepend:Element.prototype.append;vn.implicitLoop(Gr,function(un){nn.call(un,sn instanceof Node?sn:vn.convertValue(sn,"Fragment")),un.parentElement?vn.processNode(un.parentElement):vn.processNode(un)})}return vn.findNext(this,rn)}};return en}});function Tn(hn,vn,ln){var bn;if(ln.matchToken("the")||ln.matchToken("element")||ln.matchToken("elements")||ln.currentToken().type==="CLASS_REF"||ln.currentToken().type==="ID_REF"||ln.currentToken().op&&ln.currentToken().value==="<"){hn.possessivesDisabled=!0;try{bn=hn.parseElement("expression",ln)}finally{delete hn.possessivesDisabled}ln.matchOpToken("'")&&ln.requireToken("s")}else if(ln.currentToken().type==="IDENTIFIER"&&ln.currentToken().value==="its"){var wn=ln.matchToken("its");bn={type:"pseudopossessiveIts",token:wn,name:wn.value,evaluate:function(Nn){return vn.resolveSymbol("it",Nn)}}}else ln.matchToken("my")||ln.matchToken("me"),bn=hn.parseElement("implicitMeTarget",ln);return bn}gn.addCommand("transition",function(hn,vn,ln){if(ln.matchToken("transition")){for(var bn=Tn(hn,vn,ln),wn=[],Nn=[],Sn=[],On=ln.currentToken();!hn.commandBoundary(On)&&On.value!=="over"&&On.value!=="using";){if(ln.currentToken().type==="STYLE_REF"){let Dn=ln.consumeToken().value.substr(1);wn.push({type:"styleRefValue",evaluate:function(){return Dn}})}else wn.push(hn.requireElement("stringLike",ln));ln.matchToken("from")?Nn.push(hn.requireElement("expression",ln)):Nn.push(null),ln.requireToken("to"),ln.matchToken("initial")?Sn.push({type:"initial_literal",evaluate:function(){return"initial"}}):Sn.push(hn.requireElement("expression",ln)),On=ln.currentToken()}if(ln.matchToken("over"))var An=hn.requireElement("expression",ln);else if(ln.matchToken("using"))var In=hn.requireElement("expression",ln);var Pn={to:Sn,args:[bn,wn,Nn,Sn,In,An],op:function(jn,Dn,en,rn,Gr,Zr,sn){vn.nullCheck(Dn,bn);var nn=[];return vn.implicitLoop(Dn,function(un){var on=new Promise(function(fn,pn){var dn=un.style.transition;sn?un.style.transition="all "+sn+"ms ease-in":Zr?un.style.transition=Zr:un.style.transition=Jr.defaultTransition;for(var qn=vn.getInternalData(un),Fn=getComputedStyle(un),xn={},kn=0;kn<Fn.length;kn++){var Mn=Fn[kn],Ln=Fn[Mn];xn[Mn]=Ln}qn.initialStyles||(qn.initialStyles=xn);for(var kn=0;kn<en.length;kn++){var Vn=en[kn],Xn=rn[kn];Xn==="computed"||Xn==null?un.style[Vn]=xn[Vn]:un.style[Vn]=Xn}var ri=!1,ui=!1;un.addEventListener("transitionend",function(){ui||(un.style.transition=dn,ui=!0,fn())},{once:!0}),un.addEventListener("transitionstart",function(){ri=!0},{once:!0}),setTimeout(function(){!ui&&!ri&&(un.style.transition=dn,ui=!0,fn())},100),setTimeout(function(){for(var _n=[],Yn=0;Yn<en.length;Yn++){var li=en[Yn],Kn=Gr[Yn];if(Kn==="initial"){var ni=qn.initialStyles[li];un.style[li]=ni}else un.style[li]=Kn}},0)});nn.push(on)}),Promise.all(nn).then(function(){return vn.findNext(Pn,jn)})}};return Pn}}),gn.addCommand("measure",function(hn,vn,ln){if(ln.matchToken("measure")){var bn=Tn(hn,vn,ln),wn=[];if(!hn.commandBoundary(ln.currentToken()))do wn.push(ln.matchTokenType("IDENTIFIER").value);while(ln.matchOpToken(","));return{properties:wn,args:[bn],op:function(Nn,Sn){vn.nullCheck(Sn,bn),0 in Sn&&(Sn=Sn[0]);var On=Sn.getBoundingClientRect(),An={top:Sn.scrollTop,left:Sn.scrollLeft,topMax:Sn.scrollTopMax,leftMax:Sn.scrollLeftMax,height:Sn.scrollHeight,width:Sn.scrollWidth};return Nn.result={x:On.x,y:On.y,left:On.left,top:On.top,right:On.right,bottom:On.bottom,width:On.width,height:On.height,bounds:On,scrollLeft:An.left,scrollTop:An.top,scrollLeftMax:An.leftMax,scrollTopMax:An.topMax,scrollWidth:An.width,scrollHeight:An.height,scroll:An},vn.forEach(wn,function(In){if(In in Nn.result)Nn.locals[In]=Nn.result[In];else throw"No such measurement as "+In}),vn.findNext(this,Nn)}}}}),gn.addLeafExpression("closestExpr",function(hn,vn,ln){if(ln.matchToken("closest")){if(ln.matchToken("parent"))var bn=!0;var wn=null;if(ln.currentToken().type==="ATTRIBUTE_REF"){var Nn=hn.requireElement("attributeRefAccess",ln,null);wn="["+Nn.attribute.name+"]"}if(wn==null){var Sn=hn.requireElement("expression",ln);Sn.css==null?hn.raiseParseError(ln,"Expected a CSS expression"):wn=Sn.css}if(ln.matchToken("to"))var On=hn.parseElement("expression",ln);else var On=hn.parseElement("implicitMeTarget",ln);var An={type:"closestExpr",parentSearch:bn,expr:Sn,css:wn,to:On,args:[On],op:function(In,Pn){if(Pn==null)return null;{let jn=[];return vn.implicitLoop(Pn,function(Dn){bn?jn.push(Dn.parentElement?Dn.parentElement.closest(wn):null):jn.push(Dn.closest(wn))}),vn.shouldAutoIterate(Pn)?jn:jn[0]}},evaluate:function(In){return vn.unifiedEval(this,In)}};return Nn?(Nn.root=An,Nn.args=[An],Nn):An}}),gn.addCommand("go",function(hn,vn,ln){if(ln.matchToken("go")){if(ln.matchToken("back"))var bn=!0;else if(ln.matchToken("to"),ln.matchToken("url")){var wn=hn.requireElement("stringLike",ln),Nn=!0;if(ln.matchToken("in")){ln.requireToken("new"),ln.requireToken("window");var Sn=!0}}else{ln.matchToken("the");var On=ln.matchAnyToken("top","middle","bottom"),An=ln.matchAnyToken("left","center","right");(On||An)&&ln.requireToken("of");var wn=hn.requireElement("unaryExpression",ln),In=ln.matchAnyOpToken("+","-");if(In){ln.pushFollow("px");try{var Pn=hn.requireElement("expression",ln)}finally{ln.popFollow()}}ln.matchToken("px");var jn=ln.matchAnyToken("smoothly","instantly"),Dn={block:"start",inline:"nearest"};On&&(On.value==="top"?Dn.block="start":On.value==="bottom"?Dn.block="end":On.value==="middle"&&(Dn.block="center")),An&&(An.value==="left"?Dn.inline="start":An.value==="center"?Dn.inline="center":An.value==="right"&&(Dn.inline="end")),jn&&(jn.value==="smoothly"?Dn.behavior="smooth":jn.value==="instantly"&&(Dn.behavior="instant"))}var en={target:wn,args:[wn,Pn],op:function(rn,Gr,Zr){return bn?window.history.back():Nn?Gr&&(Sn?window.open(Gr):window.location.href=Gr):vn.implicitLoop(Gr,function(sn){if(sn===window&&(sn=document.body),In){let nn=sn.getBoundingClientRect(),un=document.createElement("div"),on=In.value==="+"?Zr:Zr*-1,fn=Dn.inline=="start"||Dn.inline=="end"?on:0,pn=Dn.block=="start"||Dn.block=="end"?on:0;un.style.position="absolute",un.style.top=nn.top+window.scrollY+pn+"px",un.style.left=nn.left+window.scrollX+fn+"px",un.style.height=nn.height+"px",un.style.width=nn.width+"px",un.style.zIndex=""+Number.MIN_SAFE_INTEGER,un.style.opacity="0",document.body.appendChild(un),setTimeout(function(){document.body.removeChild(un)},100),sn=un}sn.scrollIntoView(Dn)}),vn.findNext(en,rn)}};return en}}),Jr.conversions.dynamicResolvers.push(function(hn,vn){if(!(hn==="Values"||hn.indexOf("Values:")===0))return;var ln=hn.split(":")[1],bn={},wn=gn.runtime.implicitLoop.bind(gn.runtime);if(wn(vn,function(On){var An=Sn(On);if(An!==void 0){bn[An.name]=An.value;return}if(On.querySelectorAll!=null){var In=On.querySelectorAll("input,select,textarea");In.forEach(Nn)}}),ln){if(ln==="JSON")return JSON.stringify(bn);if(ln==="Form")return new URLSearchParams(bn).toString();throw"Unknown conversion: "+ln}else return bn;function Nn(On){var An=Sn(On);if(An!=null){if(bn[An.name]==null){bn[An.name]=An.value;return}if(Array.isArray(bn[An.name])&&Array.isArray(An.value)){bn[An.name]=[].concat(bn[An.name],An.value);return}}}function Sn(On){try{var An={name:On.name,value:On.value};if(An.name==null||An.value==null||On.type=="radio"&&On.checked==!1)return;if(On.type=="checkbox"&&(On.checked==!1?An.value=void 0:typeof An.value=="string"&&(An.value=[An.value])),On.type=="select-multiple"){var In=On.querySelectorAll("option[selected]");An.value=[];for(var Pn=0;Pn<In.length;Pn++)An.value.push(In[Pn].value)}return An}catch{return}}}),Jr.conversions.HTML=function(hn){var vn=function(ln){if(ln instanceof Array)return ln.map(function(Sn){return vn(Sn)}).join("");if(ln instanceof HTMLElement)return ln.outerHTML;if(ln instanceof NodeList){for(var bn="",wn=0;wn<ln.length;wn++){var Nn=ln[wn];Nn instanceof HTMLElement&&(bn+=Nn.outerHTML)}return bn}return ln.toString?ln.toString():""};return vn(hn)},Jr.conversions.Fragment=function(hn){var vn=document.createDocumentFragment();return gn.runtime.implicitLoop(hn,function(ln){if(ln instanceof Node)vn.append(ln);else{var bn=document.createElement("template");bn.innerHTML=ln,vn.append(bn.content)}}),vn}}let Wn=new yn,si=Wn.lexer,ei=Wn.parser;function bi(gn,Yr){return Wn.evaluate(gn,Yr)}function ti(){var gn=Array.from(Qr.document.querySelectorAll("script[type='text/hyperscript'][src]"));Promise.all(gn.map(function(mn){return fetch(mn.src).then(function(Tn){return Tn.text()})})).then(mn=>mn.forEach(Tn=>$n(Tn))).then(()=>Yr(function(){cn(),Wn.processNode(document.documentElement),document.dispatchEvent(new Event("hyperscript:ready")),Qr.document.addEventListener("htmx:load",function(mn){Wn.processNode(mn.detail.elt)})}));function Yr(mn){document.readyState!=="loading"?setTimeout(mn):document.addEventListener("DOMContentLoaded",mn)}function tn(){var mn=document.querySelector('meta[name="htmx-config"]');return mn?ai(mn.content):null}function cn(){var mn=tn();mn&&Object.assign(Jr,mn)}}let $n=Object.assign(bi,{config:Jr,use(gn){gn($n)},internals:{lexer:si,parser:ei,runtime:Wn,Lexer:Kr,Tokens:an,Parser:En,Runtime:yn},ElementCollection:Bn,addFeature:ei.addFeature.bind(ei),addCommand:ei.addCommand.bind(ei),addLeafExpression:ei.addLeafExpression.bind(ei),addIndirectExpression:ei.addIndirectExpression.bind(ei),evaluate:Wn.evaluate.bind(Wn),parse:Wn.parse.bind(Wn),processNode:Wn.processNode.bind(Wn),version:"0.9.14",browserInit:ti});return $n})});var zi=Pi(Oi()),Di=Pi(Hi());Di.default.browserInit();window.htmx=Oi();document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("htmx:beforeSwap",function(Qr){Qr.detail.xhr.status===404?alert("Error: Not Found (404)"):Qr.detail.xhr.status===422&&(Qr.detail.shouldSwap=!0,Qr.detail.isError=!1)})});})();
